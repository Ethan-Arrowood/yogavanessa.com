
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="15114c9e-f131-5ef9-9b16-a89d86590e05")}catch(e){}}();
(()=>{"use strict";var e={5:(e,t)=>{var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},27:(e,t,r)=>{var n=r(1008),i=r(4543),o=r(6357),a=r(5889),s=r(5180),c=r(94).CONFIGURABLE,u=r(6842),l=r(4317),d=l.enforce,h=l.get,p=String,f=Object.defineProperty,m=n("".slice),g=n("".replace),v=n([].join),y=s&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),E=String(String).split("String"),_=e.exports=function(e,t,r){"Symbol("===m(p(t),0,7)&&(t="["+g(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!a(e,"name")||c&&e.name!==t)&&(s?f(e,"name",{value:t,configurable:!0}):e.name=t),y&&r&&a(r,"arity")&&e.length!==r.arity&&f(e,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);return a(n,"source")||(n.source=v(E,"string"==typeof t?t:"")),e};Function.prototype.toString=_((function(){return o(this)&&h(this).source||u(this)}),"toString")},82:(e,t,r)=>{var n=r(94).PROPER,i=r(4543),o=r(8908);e.exports=function(e){return i((function(){return!!o[e]()||"​᠎"!=="​᠎"[e]()||n&&o[e].name!==e}))}},94:(e,t,r)=>{var n=r(5180),i=r(5889),o=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=i(o,"name"),c=s&&"something"===function(){}.name,u=s&&(!n||n&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},99:(e,t,r)=>{var n=r(4543);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},151:(e,t,r)=>{var n=r(1634),i=String,o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not an object")}},158:(e,t,r)=>{var n=r(4523),i=r(6357),o=n.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},191:(e,t,r)=>{var n=r(1008),i=r(4543),o=r(6032),a=Object,s=n("".split);e.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"===o(e)?s(e,""):a(e)}:a},196:(e,t,r)=>{var n=r(6566),i=r(4523),o=r(1008),a=r(4396),s=r(9704),c=r(8907),u=r(3308),l=r(2135),d=r(6357),h=r(3445),p=r(1634),f=r(4543),m=r(668),g=r(6143),v=r(3103);e.exports=function(e,t,r){var y=-1!==e.indexOf("Map"),E=-1!==e.indexOf("Weak"),_=y?"set":"add",b=i[e],S=b&&b.prototype,C=b,I={},O=function(e){var t=o(S[e]);s(S,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return!(E&&!p(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return E&&!p(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return!(E&&!p(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(a(e,!d(b)||!(E||S.forEach&&!f((function(){(new b).entries().next()})))))C=r.getConstructor(t,e,y,_),c.enable();else if(a(e,!0)){var w=new C,T=w[_](E?{}:-0,1)!==w,A=f((function(){w.has(1)})),P=m((function(e){new b(e)})),D=!E&&f((function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)}));P||((C=t((function(e,t){l(e,S);var r=v(new b,e,C);return h(t)||u(t,r[_],{that:r,AS_ENTRIES:y}),r}))).prototype=S,S.constructor=C),(A||D)&&(O("delete"),O("has"),y&&O("get")),(D||T)&&O(_),E&&S.clear&&delete S.clear}return I[e]=C,n({global:!0,constructor:!0,forced:C!==b},I),g(C,e),E||r.setStrong(C,e,y),C}},215:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},231:(e,t,r)=>{var n=r(7418),i=r(5526),o=r(9904),a=Array,s=Math.max;e.exports=function(e,t,r){for(var c=i(e),u=n(t,c),l=n(void 0===r?c:r,c),d=a(s(l-u,0)),h=0;u<l;u++,h++)o(d,h,e[u]);return d.length=h,d}},488:(e,t,r)=>{var n=r(1881),i=r(2957),o=r(1008),a=r(1644),s=r(151),c=r(3445),u=r(2388),l=r(9286),d=r(8581),h=r(7157),p=r(5966),f=r(2255),m=r(6046),g=r(231),v=r(6010),y=r(8779),E=r(9933),_=r(4543),b=E.UNSUPPORTED_Y,S=4294967295,C=Math.min,I=[].push,O=o(/./.exec),w=o(I),T=o("".slice);a("split",(function(e,t,r){var o;return o="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var o=f(l(this)),a=void 0===r?S:r>>>0;if(0===a)return[];if(void 0===e)return[o];if(!u(e))return i(t,o,e,a);for(var s,c,d,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,v=new RegExp(e.source,p+"g");(s=i(y,v,o))&&!((c=v.lastIndex)>m&&(w(h,T(o,m,s.index)),s.length>1&&s.index<o.length&&n(I,h,g(s,1)),d=s[0].length,m=c,h.length>=a));)v.lastIndex===s.index&&v.lastIndex++;return m===o.length?!d&&O(v,"")||w(h,""):w(h,T(o,m)),h.length>a?g(h,0,a):h}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:i(t,this,e,r)}:t,[function(t,r){var n=l(this),a=c(t)?void 0:m(t,e);return a?i(a,t,n,r):i(o,f(n),t,r)},function(e,n){var i=s(this),a=f(e),c=r(o,i,a,n,o!==t);if(c.done)return c.value;var u=d(i,RegExp),l=i.unicode,m=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(b?"g":"y"),g=new u(b?"^(?:"+i.source+")":i,m),y=void 0===n?S:n>>>0;if(0===y)return[];if(0===a.length)return null===v(g,a)?[a]:[];for(var E=0,_=0,I=[];_<a.length;){g.lastIndex=b?0:_;var O,A=v(g,b?T(a,_):a);if(null===A||(O=C(p(g.lastIndex+(b?_:0)),a.length))===E)_=h(a,_,l);else{if(w(I,T(a,E,_)),I.length===y)return I;for(var P=1;P<=A.length-1;P++)if(w(I,A[P]),I.length===y)return I;_=E=O}}return w(I,T(a,E)),I}]}),!!_((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),b)},495:(e,t,r)=>{var n=r(2388),i=TypeError;e.exports=function(e){if(n(e))throw new i("The method doesn't accept regular expressions");return e}},581:(e,t,r)=>{var n=r(9286),i=Object;e.exports=function(e){return i(n(e))}},613:(e,t,r)=>{var n=r(1008),i=r(5966),o=r(2255),a=r(4458),s=r(9286),c=n(a),u=n("".slice),l=Math.ceil,d=function(e){return function(t,r,n){var a,d,h=o(s(t)),p=i(r),f=h.length,m=void 0===n?" ":o(n);return p<=f||""===m?h:((d=c(m,l((a=p-f)/m.length))).length>a&&(d=u(d,0,a)),e?h+d:d+h)}};e.exports={start:d(!1),end:d(!0)}},668:(e,t,r)=>{var n=r(3683)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){try{if(!t&&!i)return!1}catch(e){return!1}var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(e){}return r}},714:(e,t,r)=>{var n=r(793).IteratorPrototype,i=r(2104),o=r(6372),a=r(6143),s=r(7869),c=function(){return this};e.exports=function(e,t,r,u){var l=t+" Iterator";return e.prototype=i(n,{next:o(+!u,r)}),a(e,l,!1,!0),s[l]=c,e}},787:(e,t,r)=>{var n=r(7611),i=r(6046),o=r(3445),a=r(7869),s=r(3683)("iterator");e.exports=function(e){if(!o(e))return i(e,s)||i(e,"@@iterator")||a[n(e)]}},792:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},793:(e,t,r)=>{var n,i,o,a=r(4543),s=r(6357),c=r(1634),u=r(2104),l=r(7763),d=r(9704),h=r(3683),p=r(7051),f=h("iterator"),m=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(n=i):m=!0),!c(n)||a((function(){var e={};return n[f].call(e)!==e}))?n={}:p&&(n=u(n)),s(n[f])||d(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:m}},797:(e,t,r)=>{var n=r(9929);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},812:(e,t,r)=>{var n=r(5889),i=r(7527),o=r(9763),a=r(8449);e.exports=function(e,t,r){for(var s=i(t),c=a.f,u=o.f,l=0;l<s.length;l++){var d=s[l];n(e,d)||r&&n(r,d)||c(e,d,u(t,d))}}},832:(e,t,r)=>{var n=r(2679)("span").classList,i=n&&n.constructor&&n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},853:(e,t,r)=>{var n=r(191),i=r(9286);e.exports=function(e){return n(i(e))}},935:(e,t,r)=>{var n=r(6566),i=r(2753).includes,o=r(4543),a=r(5845);n({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},1008:(e,t,r)=>{var n=r(9944),i=Function.prototype,o=i.call,a=n&&i.bind.bind(o,o);e.exports=n?a:function(e){return function(){return o.apply(e,arguments)}}},1152:(e,t,r)=>{var n=r(5180),i=r(4523),o=r(1008),a=r(4396),s=r(3103),c=r(6587),u=r(9712).f,l=r(5161),d=r(2388),h=r(2255),p=r(1274),f=r(9933),m=r(4192),g=r(9704),v=r(4543),y=r(5889),E=r(4317).enforce,_=r(9089),b=r(3683),S=r(3027),C=r(8702),I=b("match"),O=i.RegExp,w=O.prototype,T=i.SyntaxError,A=o(w.exec),P=o("".charAt),D=o("".replace),N=o("".indexOf),R=o("".slice),x=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,k=/a/g,L=/a/g,M=new O(k)!==k,j=f.MISSED_STICKY,U=f.UNSUPPORTED_Y;if(a("RegExp",n&&(!M||j||S||C||v((function(){return L[I]=!1,O(k)!==k||O(L)===L||"/a/i"!==String(O(k,"i"))}))))){for(var H=function(e,t){var r,n,i,o,a,u,f=l(w,this),m=d(e),g=void 0===t,v=[],_=e;if(!f&&m&&g&&e.constructor===H)return e;if((m||l(w,e))&&(e=e.source,g&&(t=p(_))),e=void 0===e?"":h(e),t=void 0===t?"":h(t),_=e,S&&"dotAll"in k&&(n=!!t&&N(t,"s")>-1)&&(t=D(t,/s/g,"")),r=t,j&&"sticky"in k&&(i=!!t&&N(t,"y")>-1)&&U&&(t=D(t,/y/g,"")),C&&(o=function(e){for(var t,r=e.length,n=0,i="",o=[],a={},s=!1,c=!1,u=0,l="";n<=r;n++){if("\\"===(t=P(e,n)))t+=P(e,++n);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:A(x,R(e,n+1))&&(n+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===l||y(a,l))throw new T("Invalid capture group name");a[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=t:i+=t}return[i,o]}(e),e=o[0],v=o[1]),a=s(O(e,t),f?this:w,H),(n||i||v.length)&&(u=E(a),n&&(u.dotAll=!0,u.raw=H(function(e){for(var t,r=e.length,n=0,i="",o=!1;n<=r;n++)"\\"!==(t=P(e,n))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+P(e,++n);return i}(e),r)),i&&(u.sticky=!0),v.length&&(u.groups=v)),e!==_)try{c(a,"source",""===_?"(?:)":_)}catch(e){}return a},F=u(O),B=0;F.length>B;)m(H,O,F[B++]);w.constructor=H,H.prototype=w,g(i,"RegExp",H,{constructor:!0})}_("RegExp")},1156:(e,t,r)=>{var n=r(1008),i=r(5889),o=r(853),a=r(2753).indexOf,s=r(5525),c=n([].push);e.exports=function(e,t){var r,n=o(e),u=0,l=[];for(r in n)!i(s,r)&&i(n,r)&&c(l,r);for(;t.length>u;)i(n,r=t[u++])&&(~a(l,r)||c(l,r));return l}},1232:(e,t,r)=>{var n=r(1316),i=r(9386),o=r(9944),a=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},1257:(e,t,r)=>{var n,i=r(6566),o=r(1316),a=r(9763).f,s=r(5966),c=r(2255),u=r(495),l=r(9286),d=r(6412),h=r(7051),p=o("".endsWith),f=o("".slice),m=Math.min,g=d("endsWith");i({target:"String",proto:!0,forced:!(!h&&!g&&(n=a(String.prototype,"endsWith"),n&&!n.writable)||g)},{endsWith:function(e){var t=c(l(this));u(e);var r=arguments.length>1?arguments[1]:void 0,n=t.length,i=void 0===r?n:m(s(r),n),o=c(e);return p?p(t,o,i):f(t,i-o.length,i)===o}})},1274:(e,t,r)=>{var n=r(2957),i=r(5889),o=r(5161),a=r(4315),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||i(e,"flags")||!o(s,e)?t:n(a,e)}},1316:(e,t,r)=>{var n=r(6032),i=r(1008);e.exports=function(e){if("Function"===n(e))return i(e)}},1505:(e,t,r)=>{var n=r(2957),i=r(1644),o=r(151),a=r(3445),s=r(5966),c=r(2255),u=r(9286),l=r(6046),d=r(7157),h=r(6010);i("match",(function(e,t,r){return[function(t){var r=u(this),i=a(t)?void 0:l(t,e);return i?n(i,t,r):new RegExp(t)[e](c(r))},function(e){var n=o(this),i=c(e),a=r(t,n,i);if(a.done)return a.value;if(!n.global)return h(n,i);var u=n.unicode;n.lastIndex=0;for(var l,p=[],f=0;null!==(l=h(n,i));){var m=c(l[0]);p[f]=m,""===m&&(n.lastIndex=d(i,s(n.lastIndex),u)),f++}return 0===f?null:p}]}))},1634:(e,t,r)=>{var n=r(6357),i=r(2155),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===o}:function(e){return"object"==typeof e?null!==e:n(e)}},1644:(e,t,r)=>{r(3831);var n=r(1316),i=r(9704),o=r(8779),a=r(4543),s=r(3683),c=r(6587),u=s("species"),l=RegExp.prototype;e.exports=function(e,t,r,d){var h=s(e),p=!a((function(){var t={};return t[h]=function(){return 7},7!==""[e](t)})),f=p&&!a((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[h]=/./[h]),r.exec=function(){return t=!0,null},r[h](""),!t}));if(!p||!f||r){var m=n(/./[h]),g=t(h,""[e],(function(e,t,r,i,a){var s=n(e),c=t.exec;return c===o||c===l.exec?p&&!a?{done:!0,value:m(t,r,i)}:{done:!0,value:s(r,t,i)}:{done:!1}}));i(String.prototype,e,g[0]),i(l,h,g[1])}d&&c(l[h],"sham",!0)}},1881:(e,t,r)=>{var n=r(9944),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(o):function(){return a.apply(o,arguments)})},2077:(e,t,r)=>{var n=r(1232),i=r(1008),o=r(191),a=r(581),s=r(5526),c=r(797),u=i([].push),l=function(e){var t=1===e,r=2===e,i=3===e,l=4===e,d=6===e,h=7===e,p=5===e||d;return function(f,m,g,v){for(var y,E,_=a(f),b=o(_),S=n(m,g),C=s(b),I=0,O=v||c,w=t?O(f,C):r||h?O(f,0):void 0;C>I;I++)if((p||I in b)&&(E=S(y=b[I],I,_),e))if(t)w[I]=E;else if(E)switch(e){case 3:return!0;case 5:return y;case 6:return I;case 2:u(w,y)}else switch(e){case 4:return!1;case 7:u(w,y)}return d?-1:i||l?l:w}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},2093:(e,t,r)=>{var n=r(7735);e.exports=n("document","documentElement")},2104:(e,t,r)=>{var n,i=r(151),o=r(8337),a=r(8471),s=r(5525),c=r(2093),u=r(2679),l=r(9847),d="prototype",h="script",p=l("IE_PROTO"),f=function(){},m=function(e){return"<"+h+">"+e+"</"+h+">"},g=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;v="undefined"!=typeof document?document.domain&&n?g(n):(t=u("iframe"),r="java"+h+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F):g(n);for(var i=a.length;i--;)delete v[d][a[i]];return v()};s[p]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[d]=i(e),r=new f,f[d]=null,r[p]=e):r=v(),void 0===t?r:o.f(r,t)}},2135:(e,t,r)=>{var n=r(5161),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new i("Incorrect invocation")}},2155:e=>{var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},2221:(e,t,r)=>{var n=r(6566),i=r(3957);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},2255:(e,t,r)=>{var n=r(7611),i=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},2357:(e,t,r)=>{var n=r(7735),i=r(6357),o=r(5161),a=r(2496),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&o(t.prototype,s(e))}},2372:(e,t,r)=>{var n=r(4543);e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},2388:(e,t,r)=>{var n=r(1634),i=r(6032),o=r(3683)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"===i(e))}},2496:(e,t,r)=>{var n=r(4687);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},2528:(e,t,r)=>{var n=r(1156),i=r(8471);e.exports=Object.keys||function(e){return n(e,i)}},2675:(e,t,r)=>{var n=r(2957),i=r(151),o=r(6046);e.exports=function(e,t,r){var a,s;i(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw r;return r}a=n(a,e)}catch(e){s=!0,a=e}if("throw"===t)throw r;if(s)throw a;return i(a),r}},2679:(e,t,r)=>{var n=r(4523),i=r(1634),o=n.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},2753:(e,t,r)=>{var n=r(853),i=r(7418),o=r(5526),a=function(e){return function(t,r,a){var s,c=n(t),u=o(c),l=i(a,u);if(e&&r!=r){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},2834:(e,t,r)=>{var n=r(6357),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw new o("Can't set "+i(e)+" as a prototype")}},2844:(e,t,r)=>{var n,i,o=r(4523),a=r(4848),s=o.process,c=o.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l&&(i=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},2892:(e,t,r)=>{var n=r(4523),i=r(792),o=r(832),a=r(3371),s=r(6587),c=function(e){if(e&&e.forEach!==a)try{s(e,"forEach",a)}catch(t){e.forEach=a}};for(var u in i)i[u]&&c(n[u]&&n[u].prototype);c(o)},2946:(e,t,r)=>{var n=r(1008),i=r(9386);e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},2957:(e,t,r)=>{var n=r(9944),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},2969:(e,t,r)=>{var n=r(4523),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},2981:(e,t)=>{t.f=Object.getOwnPropertySymbols},3027:(e,t,r)=>{var n=r(4543),i=r(4523).RegExp;e.exports=n((function(){var e=i(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},3048:(e,t,r)=>{var n=r(1008);e.exports=n(1..valueOf)},3103:(e,t,r)=>{var n=r(6357),i=r(1634),o=r(7943);e.exports=function(e,t,r){var a,s;return o&&n(a=t.constructor)&&a!==r&&i(s=a.prototype)&&s!==r.prototype&&o(e,s),e}},3249:(e,t,r)=>{var n=r(6566),i=r(3308),o=r(9904);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,r){o(t,e,r)}),{AS_ENTRIES:!0}),t}})},3280:(e,t,r)=>{var n=r(4523),i=r(4543),o=r(1008),a=r(2255),s=r(8906).trim,c=r(8908),u=o("".charAt),l=n.parseFloat,d=n.Symbol,h=d&&d.iterator,p=1/l(c+"-0")!=-1/0||h&&!i((function(){l(Object(h))}));e.exports=p?function(e){var t=s(a(e)),r=l(t);return 0===r&&"-"===u(t,0)?-0:r}:l},3308:(e,t,r)=>{var n=r(1232),i=r(2957),o=r(151),a=r(215),s=r(5745),c=r(5526),u=r(5161),l=r(6417),d=r(787),h=r(2675),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},m=f.prototype;e.exports=function(e,t,r){var g,v,y,E,_,b,S,C=r&&r.that,I=!(!r||!r.AS_ENTRIES),O=!(!r||!r.IS_RECORD),w=!(!r||!r.IS_ITERATOR),T=!(!r||!r.INTERRUPTED),A=n(t,C),P=function(e){return g&&h(g,"normal",e),new f(!0,e)},D=function(e){return I?(o(e),T?A(e[0],e[1],P):A(e[0],e[1])):T?A(e,P):A(e)};if(O)g=e.iterator;else if(w)g=e;else{if(!(v=d(e)))throw new p(a(e)+" is not iterable");if(s(v)){for(y=0,E=c(e);E>y;y++)if((_=D(e[y]))&&u(m,_))return _;return new f(!1)}g=l(e,v)}for(b=O?e.next:g.next;!(S=i(b,g)).done;){try{_=D(S.value)}catch(e){h(g,"throw",e)}if("object"==typeof _&&_&&u(m,_))return _}return new f(!1)}},3371:(e,t,r)=>{var n=r(2077).forEach,i=r(4486)("forEach");e.exports=i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},3445:e=>{e.exports=function(e){return null==e}},3452:(e,t,r)=>{var n=r(4543),i=r(1634),o=r(6032),a=r(2372),s=Object.isExtensible,c=n((function(){s(1)}));e.exports=c||a?function(e){return!!i(e)&&(!a||"ArrayBuffer"!==o(e))&&(!s||s(e))}:s},3642:(e,t,r)=>{var n=r(27),i=r(8449);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},3644:(e,t,r)=>{var n={};n[r(3683)("toStringTag")]="z",e.exports="[object z]"===String(n)},3683:(e,t,r)=>{var n=r(4523),i=r(9441),o=r(5889),a=r(6048),s=r(4687),c=r(2496),u=n.Symbol,l=i("wks"),d=c?u.for||u:u&&u.withoutSetter||a;e.exports=function(e){return o(l,e)||(l[e]=s&&o(u,e)?u[e]:d("Symbol."+e)),l[e]}},3831:(e,t,r)=>{var n=r(6566),i=r(8779);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},3834:(e,t,r)=>{var n=r(6032),i=r(853),o=r(9712).f,a=r(231),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"===n(e)?function(e){try{return o(e)}catch(e){return a(s)}}(e):o(i(e))}},3952:(e,t,r)=>{var n=r(6566),i=r(2957),o=r(7051),a=r(94),s=r(6357),c=r(714),u=r(7763),l=r(7943),d=r(6143),h=r(6587),p=r(9704),f=r(3683),m=r(7869),g=r(793),v=a.PROPER,y=a.CONFIGURABLE,E=g.IteratorPrototype,_=g.BUGGY_SAFARI_ITERATORS,b=f("iterator"),S="keys",C="values",I="entries",O=function(){return this};e.exports=function(e,t,r,a,f,g,w){c(r,t,a);var T,A,P,D=function(e){if(e===f&&L)return L;if(!_&&e&&e in x)return x[e];switch(e){case S:case C:case I:return function(){return new r(this,e)}}return function(){return new r(this)}},N=t+" Iterator",R=!1,x=e.prototype,k=x[b]||x["@@iterator"]||f&&x[f],L=!_&&k||D(f),M="Array"===t&&x.entries||k;if(M&&(T=u(M.call(new e)))!==Object.prototype&&T.next&&(o||u(T)===E||(l?l(T,E):s(T[b])||p(T,b,O)),d(T,N,!0,!0),o&&(m[N]=O)),v&&f===C&&k&&k.name!==C&&(!o&&y?h(x,"name",C):(R=!0,L=function(){return i(k,this)})),f)if(A={values:D(C),keys:g?L:D(S),entries:D(I)},w)for(P in A)(_||R||!(P in x))&&p(x,P,A[P]);else n({target:t,proto:!0,forced:_||R},A);return o&&!w||x[b]===L||p(x,b,L,{name:f}),m[t]=L,A}},3957:(e,t,r)=>{var n=r(5180),i=r(1008),o=r(2957),a=r(4543),s=r(2528),c=r(2981),u=r(5),l=r(581),d=r(191),h=Object.assign,p=Object.defineProperty,f=i([].concat);e.exports=!h||a((function(){if(n&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol("assign detection"),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!==h({},e)[r]||s(h({},t)).join("")!==i}))?function(e,t){for(var r=l(e),i=arguments.length,a=1,h=c.f,p=u.f;i>a;)for(var m,g=d(arguments[a++]),v=h?f(s(g),h(g)):s(g),y=v.length,E=0;y>E;)m=v[E++],n&&!o(p,g,m)||(r[m]=g[m]);return r}:h},3965:(e,t,r)=>{var n=r(4523),i=r(2969),o="__core-js_shared__",a=n[o]||i(o,{});e.exports=a},4192:(e,t,r)=>{var n=r(8449).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},4237:(e,t,r)=>{var n=r(94).PROPER,i=r(9704),o=r(151),a=r(2255),s=r(4543),c=r(1274),u="toString",l=RegExp.prototype[u],d=s((function(){return"/a/b"!==l.call({source:"a",flags:"b"})})),h=n&&l.name!==u;(d||h)&&i(RegExp.prototype,u,(function(){var e=o(this);return"/"+a(e.source)+"/"+a(c(e))}),{unsafe:!0})},4315:(e,t,r)=>{var n=r(151);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4317:(e,t,r)=>{var n,i,o,a=r(158),s=r(4523),c=r(1634),u=r(6587),l=r(5889),d=r(3965),h=r(9847),p=r(5525),f="Object already initialized",m=s.TypeError,g=s.WeakMap;if(a||d.state){var v=d.state||(d.state=new g);v.get=v.get,v.has=v.has,v.set=v.set,n=function(e,t){if(v.has(e))throw new m(f);return t.facade=e,v.set(e,t),t},i=function(e){return v.get(e)||{}},o=function(e){return v.has(e)}}else{var y=h("state");p[y]=!0,n=function(e,t){if(l(e,y))throw new m(f);return t.facade=e,u(e,y,t),t},i=function(e){return l(e,y)?e[y]:{}},o=function(e){return l(e,y)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw new m("Incompatible receiver, "+e+" required");return r}}}},4396:(e,t,r)=>{var n=r(4543),i=r(6357),o=/#|\.prototype\./,a=function(e,t){var r=c[s(e)];return r===l||r!==u&&(i(t)?n(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},4458:(e,t,r)=>{var n=r(4827),i=r(2255),o=r(9286),a=RangeError;e.exports=function(e){var t=i(o(this)),r="",s=n(e);if(s<0||s===1/0)throw new a("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(r+=t);return r}},4469:e=>{var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},4486:(e,t,r)=>{var n=r(4543);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},4523:function(e,t,r){var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||this||Function("return this")()},4543:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},4567:(e,t,r)=>{var n=r(4848);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},4687:(e,t,r)=>{var n=r(2844),i=r(4543),o=r(4523).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol("symbol detection");return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},4775:(e,t,r)=>{var n=r(1008),i=r(4827),o=r(2255),a=r(9286),s=n("".charAt),c=n("".charCodeAt),u=n("".slice),l=function(e){return function(t,r){var n,l,d=o(a(t)),h=i(r),p=d.length;return h<0||h>=p?e?"":void 0:(n=c(d,h))<55296||n>56319||h+1===p||(l=c(d,h+1))<56320||l>57343?e?s(d,h):n:e?u(d,h,h+2):l-56320+(n-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},4827:(e,t,r)=>{var n=r(4469);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},4848:e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},5025:e=>{e.exports=function(e,t){return{value:e,done:t}}},5161:(e,t,r)=>{var n=r(1008);e.exports=n({}.isPrototypeOf)},5180:(e,t,r)=>{var n=r(4543);e.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},5221:(e,t,r)=>{var n=r(5180),i=r(4543),o=r(1008),a=r(7763),s=r(2528),c=r(853),u=o(r(5).f),l=o([].push),d=n&&i((function(){var e=Object.create(null);return e[2]=2,!u(e,2)})),h=function(e){return function(t){for(var r,i=c(t),o=s(i),h=d&&null===a(i),p=o.length,f=0,m=[];p>f;)r=o[f++],n&&!(h?r in i:u(i,r))||l(m,e?[r,i[r]]:i[r]);return m}};e.exports={entries:h(!0),values:h(!1)}},5240:(e,t,r)=>{var n=r(4543);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},5292:(e,t,r)=>{var n=r(6653),i=r(215),o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not a constructor")}},5372:(e,t,r)=>{r(7250)},5525:e=>{e.exports={}},5526:(e,t,r)=>{var n=r(5966);e.exports=function(e){return n(e.length)}},5745:(e,t,r)=>{var n=r(3683),i=r(7869),o=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},5774:(e,t,r)=>{var n=r(2957),i=r(6357),o=r(1634),a=TypeError;e.exports=function(e,t){var r,s;if("string"===t&&i(r=e.toString)&&!o(s=n(r,e)))return s;if(i(r=e.valueOf)&&!o(s=n(r,e)))return s;if("string"!==t&&i(r=e.toString)&&!o(s=n(r,e)))return s;throw new a("Can't convert object to primitive value")}},5845:(e,t,r)=>{var n=r(3683),i=r(2104),o=r(8449).f,a=n("unscopables"),s=Array.prototype;void 0===s[a]&&o(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},5889:(e,t,r)=>{var n=r(1008),i=r(581),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},5966:(e,t,r)=>{var n=r(4827),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},5993:(e,t,r)=>{var n=r(4523),i=r(792),o=r(832),a=r(6656),s=r(6587),c=r(3683),u=c("iterator"),l=c("toStringTag"),d=a.values,h=function(e,t){if(e){if(e[u]!==d)try{s(e,u,d)}catch(t){e[u]=d}if(e[l]||s(e,l,t),i[t])for(var r in a)if(e[r]!==a[r])try{s(e,r,a[r])}catch(t){e[r]=a[r]}}};for(var p in i)h(n[p]&&n[p].prototype,p);h(o,"DOMTokenList")},6010:(e,t,r)=>{var n=r(2957),i=r(151),o=r(6357),a=r(6032),s=r(8779),c=TypeError;e.exports=function(e,t){var r=e.exec;if(o(r)){var u=n(r,e,t);return null!==u&&i(u),u}if("RegExp"===a(e))return n(s,e,t);throw new c("RegExp#exec called on incompatible receiver")}},6032:(e,t,r)=>{var n=r(1008),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},6046:(e,t,r)=>{var n=r(9386),i=r(3445);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},6048:(e,t,r)=>{var n=r(1008),i=0,o=Math.random(),a=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},6143:(e,t,r)=>{var n=r(8449).f,i=r(5889),o=r(3683)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!i(e,o)&&n(e,o,{configurable:!0,value:t})}},6357:(e,t,r)=>{var n=r(2155),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},6372:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6412:(e,t,r)=>{var n=r(3683)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},6417:(e,t,r)=>{var n=r(2957),i=r(9386),o=r(151),a=r(215),s=r(787),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?s(e):t;if(i(r))return o(n(r,e));throw new c(a(e)+" is not iterable")}},6460:(e,t,r)=>{var n=r(6566),i=r(1008),o=r(4827),a=r(3048),s=r(4458),c=r(4543),u=RangeError,l=String,d=Math.floor,h=i(s),p=i("".slice),f=i(1..toFixed),m=function(e,t,r){return 0===t?r:t%2==1?m(e,t-1,r*e):m(e*e,t/2,r)},g=function(e,t,r){for(var n=-1,i=r;++n<6;)i+=t*e[n],e[n]=i%1e7,i=d(i/1e7)},v=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=d(n/t),n=n%t*1e7},y=function(e){for(var t=6,r="";--t>=0;)if(""!==r||0===t||0!==e[t]){var n=l(e[t]);r=""===r?n:r+h("0",7-n.length)+n}return r};n({target:"Number",proto:!0,forced:c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}))},{toFixed:function(e){var t,r,n,i,s=a(this),c=o(e),d=[0,0,0,0,0,0],f="",E="0";if(c<0||c>20)throw new u("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return l(s);if(s<0&&(f="-",s=-s),s>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(s*m(2,69,1))-69)<0?s*m(2,-t,1):s/m(2,t,1),r*=4503599627370496,(t=52-t)>0){for(g(d,0,r),n=c;n>=7;)g(d,1e7,0),n-=7;for(g(d,m(10,n,1),0),n=t-1;n>=23;)v(d,1<<23),n-=23;v(d,1<<n),g(d,1,1),v(d,2),E=y(d)}else g(d,0,r),g(d,1<<-t,0),E=y(d)+h("0",c);return c>0?f+((i=E.length)<=c?"0."+h("0",c-i)+E:p(E,0,i-c)+"."+p(E,i-c)):f+E}})},6519:(e,t,r)=>{var n=r(9704);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},6566:(e,t,r)=>{var n=r(4523),i=r(9763).f,o=r(6587),a=r(9704),s=r(2969),c=r(812),u=r(4396);e.exports=function(e,t){var r,l,d,h,p,f=e.target,m=e.global,g=e.stat;if(r=m?n:g?n[f]||s(f,{}):(n[f]||{}).prototype)for(l in t){if(h=t[l],d=e.dontCallGetSet?(p=i(r,l))&&p.value:r[l],!u(m?l:f+(g?".":"#")+l,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),a(r,l,h,e)}}},6587:(e,t,r)=>{var n=r(5180),i=r(8449),o=r(6372);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},6653:(e,t,r)=>{var n=r(1008),i=r(4543),o=r(6357),a=r(7611),s=r(7735),c=r(6842),u=function(){},l=[],d=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=n(h.exec),f=!h.test(u),m=function(e){if(!o(e))return!1;try{return d(u,l,e),!0}catch(e){return!1}},g=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,c(e))}catch(e){return!0}};g.sham=!0,e.exports=!d||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?g:m},6656:(e,t,r)=>{var n=r(853),i=r(5845),o=r(7869),a=r(4317),s=r(8449).f,c=r(3952),u=r(5025),l=r(7051),d=r(5180),h="Array Iterator",p=a.set,f=a.getterFor(h);e.exports=c(Array,"Array",(function(e,t){p(this,{type:h,target:n(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,r=e.kind,n=e.index++;if(!t||n>=t.length)return e.target=void 0,u(void 0,!0);switch(r){case"keys":return u(n,!1);case"values":return u(t[n],!1)}return u([n,t[n]],!1)}),"values");var m=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&d&&"values"!==m.name)try{s(m,"name",{value:"values"})}catch(e){}},6842:(e,t,r)=>{var n=r(1008),i=r(6357),o=r(3965),a=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},6872:(e,t,r)=>{var n=r(6032);e.exports=Array.isArray||function(e){return"Array"===n(e)}},7051:e=>{e.exports=!1},7156:(e,t,r)=>{var n=r(6566),i=r(3280);n({target:"Number",stat:!0,forced:Number.parseFloat!==i},{parseFloat:i})},7157:(e,t,r)=>{var n=r(4775).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},7250:(e,t,r)=>{var n,i=r(5240),o=r(4523),a=r(1008),s=r(6519),c=r(8907),u=r(196),l=r(8137),d=r(1634),h=r(4317).enforce,p=r(4543),f=r(158),m=Object,g=Array.isArray,v=m.isExtensible,y=m.isFrozen,E=m.isSealed,_=m.freeze,b=m.seal,S={},C={},I=!o.ActiveXObject&&"ActiveXObject"in o,O=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},w=u("WeakMap",O,l),T=w.prototype,A=a(T.set);if(f)if(I){n=l.getConstructor(O,"WeakMap",!0),c.enable();var P=a(T.delete),D=a(T.has),N=a(T.get);s(T,{delete:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),P(this,e)||t.frozen.delete(e)}return P(this,e)},has:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),D(this,e)||t.frozen.has(e)}return D(this,e)},get:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),D(this,e)?N(this,e):t.frozen.get(e)}return N(this,e)},set:function(e,t){if(d(e)&&!v(e)){var r=h(this);r.frozen||(r.frozen=new n),D(this,e)?A(this,e,t):r.frozen.set(e,t)}else A(this,e,t);return this}})}else i&&p((function(){var e=_([]);return A(new w,e,1),!y(e)}))&&s(T,{set:function(e,t){var r;return g(e)&&(y(e)?r=S:E(e)&&(r=C)),A(this,e,t),r===S&&_(e),r===C&&b(e),this}})},7310:(e,t,r)=>{var n=r(5180),i=r(4543);e.exports=n&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},7418:(e,t,r)=>{var n=r(4827),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},7527:(e,t,r)=>{var n=r(7735),i=r(1008),o=r(9712),a=r(2981),s=r(151),c=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(s(e)),r=a.f;return r?c(t,r(e)):t}},7611:(e,t,r)=>{var n=r(3644),i=r(6357),o=r(6032),a=r(3683)("toStringTag"),s=Object,c="Arguments"===o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=s(e),a))?r:c?o(t):"Object"===(n=o(t))&&i(t.callee)?"Arguments":n}},7680:(e,t,r)=>{var n,i=r(6566),o=r(1316),a=r(9763).f,s=r(5966),c=r(2255),u=r(495),l=r(9286),d=r(6412),h=r(7051),p=o("".startsWith),f=o("".slice),m=Math.min,g=d("startsWith");i({target:"String",proto:!0,forced:!(!h&&!g&&(n=a(String.prototype,"startsWith"),n&&!n.writable)||g)},{startsWith:function(e){var t=c(l(this));u(e);var r=s(m(arguments.length>1?arguments[1]:void 0,t.length)),n=c(e);return p?p(t,n,r):f(t,r,r+n.length)===n}})},7735:(e,t,r)=>{var n=r(4523),i=r(6357);e.exports=function(e,t){return arguments.length<2?(r=n[e],i(r)?r:void 0):n[e]&&n[e][t];var r}},7763:(e,t,r)=>{var n=r(5889),i=r(6357),o=r(581),a=r(9847),s=r(99),c=a("IE_PROTO"),u=Object,l=u.prototype;e.exports=s?u.getPrototypeOf:function(e){var t=o(e);if(n(t,c))return t[c];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},7869:e=>{e.exports={}},7943:(e,t,r)=>{var n=r(2946),i=r(151),o=r(2834);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),o(n),t?e(r,n):r.__proto__=n,r}}():void 0)},8137:(e,t,r)=>{var n=r(1008),i=r(6519),o=r(8907).getWeakData,a=r(2135),s=r(151),c=r(3445),u=r(1634),l=r(3308),d=r(2077),h=r(5889),p=r(4317),f=p.set,m=p.getterFor,g=d.find,v=d.findIndex,y=n([].splice),E=0,_=function(e){return e.frozen||(e.frozen=new b)},b=function(){this.entries=[]},S=function(e,t){return g(e.entries,(function(e){return e[0]===t}))};b.prototype={get:function(e){var t=S(this,e);if(t)return t[1]},has:function(e){return!!S(this,e)},set:function(e,t){var r=S(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&y(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,r,n){var d=e((function(e,i){a(e,p),f(e,{type:t,id:E++,frozen:void 0}),c(i)||l(i,e[n],{that:e,AS_ENTRIES:r})})),p=d.prototype,g=m(t),v=function(e,t,r){var n=g(e),i=o(s(t),!0);return!0===i?_(n).set(t,r):i[n.id]=r,e};return i(p,{delete:function(e){var t=g(this);if(!u(e))return!1;var r=o(e);return!0===r?_(t).delete(e):r&&h(r,t.id)&&delete r[t.id]},has:function(e){var t=g(this);if(!u(e))return!1;var r=o(e);return!0===r?_(t).has(e):r&&h(r,t.id)}}),i(p,r?{get:function(e){var t=g(this);if(u(e)){var r=o(e);return!0===r?_(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),d}}},8291:(e,t,r)=>{var n=r(6566),i=r(1008),o=r(495),a=r(9286),s=r(2255),c=r(6412),u=i("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(s(a(this)),s(o(e)),arguments.length>1?arguments[1]:void 0)}})},8304:(e,t,r)=>{var n=r(1881),i=r(2957),o=r(1008),a=r(1644),s=r(4543),c=r(151),u=r(6357),l=r(3445),d=r(4827),h=r(5966),p=r(2255),f=r(9286),m=r(7157),g=r(6046),v=r(9070),y=r(6010),E=r(3683)("replace"),_=Math.max,b=Math.min,S=o([].concat),C=o([].push),I=o("".indexOf),O=o("".slice),w="$0"==="a".replace(/./,"$0"),T=!!/./[E]&&""===/./[E]("a","$0");a("replace",(function(e,t,r){var o=T?"$":"$0";return[function(e,r){var n=f(this),o=l(e)?void 0:g(e,E);return o?i(o,e,n,r):i(t,p(n),e,r)},function(e,i){var a=c(this),s=p(e);if("string"==typeof i&&-1===I(i,o)&&-1===I(i,"$<")){var l=r(t,a,s,i);if(l.done)return l.value}var f=u(i);f||(i=p(i));var g,E=a.global;E&&(g=a.unicode,a.lastIndex=0);for(var w,T=[];null!==(w=y(a,s))&&(C(T,w),E);)""===p(w[0])&&(a.lastIndex=m(s,h(a.lastIndex),g));for(var A,P="",D=0,N=0;N<T.length;N++){for(var R,x=p((w=T[N])[0]),k=_(b(d(w.index),s.length),0),L=[],M=1;M<w.length;M++)C(L,void 0===(A=w[M])?A:String(A));var j=w.groups;if(f){var U=S([x],L,k,s);void 0!==j&&C(U,j),R=p(n(i,void 0,U))}else R=v(x,s,k,L,j,i);k>=D&&(P+=O(s,D,k)+R,D=k+x.length)}return P+O(s,D)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!w||T)},8337:(e,t,r)=>{var n=r(5180),i=r(7310),o=r(8449),a=r(151),s=r(853),c=r(2528);t.f=n&&!i?Object.defineProperties:function(e,t){a(e);for(var r,n=s(t),i=c(t),u=i.length,l=0;u>l;)o.f(e,r=i[l++],n[r]);return e}},8370:(e,t,r)=>{var n=r(6566),i=r(5221).entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},8449:(e,t,r)=>{var n=r(5180),i=r(9053),o=r(7310),a=r(151),s=r(9833),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";t.f=n?o?function(e,t,r){if(a(e),t=s(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&p in r&&!r[p]){var n=l(e,t);n&&n[p]&&(e[t]=r.value,r={configurable:h in r?r[h]:n[h],enumerable:d in r?r[d]:n[d],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(a(e),t=s(t),a(r),i)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},8471:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8581:(e,t,r)=>{var n=r(151),i=r(5292),o=r(3445),a=r(3683)("species");e.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||o(r=n(s)[a])?t:i(r)}},8702:(e,t,r)=>{var n=r(4543),i=r(4523).RegExp;e.exports=n((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},8779:(e,t,r)=>{var n,i,o=r(2957),a=r(1008),s=r(2255),c=r(4315),u=r(9933),l=r(9441),d=r(2104),h=r(4317).get,p=r(3027),f=r(8702),m=l("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,v=g,y=a("".charAt),E=a("".indexOf),_=a("".replace),b=a("".slice),S=(i=/b*/g,o(g,n=/a/,"a"),o(g,i,"a"),0!==n.lastIndex||0!==i.lastIndex),C=u.BROKEN_CARET,I=void 0!==/()??/.exec("")[1];(S||I||C||p||f)&&(v=function(e){var t,r,n,i,a,u,l,p=this,f=h(p),O=s(e),w=f.raw;if(w)return w.lastIndex=p.lastIndex,t=o(v,w,O),p.lastIndex=w.lastIndex,t;var T=f.groups,A=C&&p.sticky,P=o(c,p),D=p.source,N=0,R=O;if(A&&(P=_(P,"y",""),-1===E(P,"g")&&(P+="g"),R=b(O,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==y(O,p.lastIndex-1))&&(D="(?: "+D+")",R=" "+R,N++),r=new RegExp("^(?:"+D+")",P)),I&&(r=new RegExp("^"+D+"$(?!\\s)",P)),S&&(n=p.lastIndex),i=o(g,A?r:p,R),A?i?(i.input=b(i.input,N),i[0]=b(i[0],N),i.index=p.lastIndex,p.lastIndex+=i[0].length):p.lastIndex=0:S&&i&&(p.lastIndex=p.global?i.index+i[0].length:n),I&&i&&i.length>1&&o(m,i[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&T)for(i.groups=u=d(null),a=0;a<T.length;a++)u[(l=T[a])[0]]=i[l[1]];return i}),e.exports=v},8906:(e,t,r)=>{var n=r(1008),i=r(9286),o=r(2255),a=r(8908),s=n("".replace),c=RegExp("^["+a+"]+"),u=RegExp("(^|[^"+a+"])["+a+"]+$"),l=function(e){return function(t){var r=o(i(t));return 1&e&&(r=s(r,c,"")),2&e&&(r=s(r,u,"$1")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},8907:(e,t,r)=>{var n=r(6566),i=r(1008),o=r(5525),a=r(1634),s=r(5889),c=r(8449).f,u=r(9712),l=r(3834),d=r(3452),h=r(6048),p=r(5240),f=!1,m=h("meta"),g=0,v=function(e){c(e,m,{value:{objectID:"O"+g++,weakData:{}}})},y=e.exports={enable:function(){y.enable=function(){},f=!0;var e=u.f,t=i([].splice),r={};r[m]=1,e(r).length&&(u.f=function(r){for(var n=e(r),i=0,o=n.length;i<o;i++)if(n[i]===m){t(n,i,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,m)){if(!d(e))return"F";if(!t)return"E";v(e)}return e[m].objectID},getWeakData:function(e,t){if(!s(e,m)){if(!d(e))return!0;if(!t)return!1;v(e)}return e[m].weakData},onFreeze:function(e){return p&&f&&d(e)&&!s(e,m)&&v(e),e}};o[m]=!0},8908:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9053:(e,t,r)=>{var n=r(5180),i=r(4543),o=r(2679);e.exports=!n&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},9070:(e,t,r)=>{var n=r(1008),i=r(581),o=Math.floor,a=n("".charAt),s=n("".replace),c=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,d,h){var p=r+e.length,f=n.length,m=l;return void 0!==d&&(d=i(d),m=u),s(h,m,(function(i,s){var u;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,r);case"'":return c(t,p);case"<":u=d[c(s,1,-1)];break;default:var l=+s;if(0===l)return i;if(l>f){var h=o(l/10);return 0===h?i:h<=f?void 0===n[h-1]?a(s,1):n[h-1]+a(s,1):i}u=n[l-1]}return void 0===u?"":u}))}},9089:(e,t,r)=>{var n=r(7735),i=r(3642),o=r(3683),a=r(5180),s=o("species");e.exports=function(e){var t=n(e);a&&t&&!t[s]&&i(t,s,{configurable:!0,get:function(){return this}})}},9098:(e,t,r)=>{var n=r(6566),i=r(8906).trim;n({target:"String",proto:!0,forced:r(82)("trim")},{trim:function(){return i(this)}})},9113:(e,t,r)=>{var n=r(2957),i=r(1634),o=r(2357),a=r(6046),s=r(5774),c=r(3683),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var r,c=a(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!i(r)||o(r))return r;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},9170:(e,t,r)=>{var n=r(6566),i=r(5221).values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},9286:(e,t,r)=>{var n=r(3445),i=TypeError;e.exports=function(e){if(n(e))throw new i("Can't call method on "+e);return e}},9386:(e,t,r)=>{var n=r(6357),i=r(215),o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not a function")}},9441:(e,t,r)=>{var n=r(7051),i=r(3965);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.33.0",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},9704:(e,t,r)=>{var n=r(6357),i=r(8449),o=r(27),a=r(2969);e.exports=function(e,t,r,s){s||(s={});var c=s.enumerable,u=void 0!==s.name?s.name:t;if(n(r)&&o(r,u,s),s.global)c?e[t]=r:a(t,r);else{try{s.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},9712:(e,t,r)=>{var n=r(1156),i=r(8471).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},9763:(e,t,r)=>{var n=r(5180),i=r(2957),o=r(5),a=r(6372),s=r(853),c=r(9833),u=r(5889),l=r(9053),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=s(e),t=c(t),l)try{return d(e,t)}catch(e){}if(u(e,t))return a(!i(o.f,e,t),e[t])}},9833:(e,t,r)=>{var n=r(9113),i=r(2357);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},9847:(e,t,r)=>{var n=r(9441),i=r(6048),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},9904:(e,t,r)=>{var n=r(9833),i=r(8449),o=r(6372);e.exports=function(e,t,r){var a=n(t);a in e?i.f(e,a,o(0,r)):e[a]=r}},9929:(e,t,r)=>{var n=r(6872),i=r(6653),o=r(1634),a=r(3683)("species"),s=Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(i(t)&&(t===s||n(t.prototype))||o(t)&&null===(t=t[a]))&&(t=void 0)),void 0===t?s:t}},9933:(e,t,r)=>{var n=r(4543),i=r(4523).RegExp,o=n((function(){var e=i("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),a=o||n((function(){return!i("a","y").sticky})),s=o||n((function(){var e=i("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:o}},9944:(e,t,r)=>{var n=r(4543);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},9964:(e,t,r)=>{var n=r(6566),i=r(613).start;n({target:"String",proto:!0,forced:r(4567)},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};r.r(n),r.d(n,{FunctionToString:()=>nt,InboundFilters:()=>Xe,LinkedErrors:()=>Dr});var i={};r.r(i),r.d(i,{Breadcrumbs:()=>jt,Dedupe:()=>Ft,GlobalHandlers:()=>or,HttpContext:()=>dr,LinkedErrors:()=>yr,TryCatch:()=>Sr}),r(6656),r(2221),r(5993),r(935),r(3831),r(8291),r(2892);var o=/android/i;function a(){var e=window.navigator.userAgent;return!!e&&Boolean((e.includes("Safari")&&(e.includes("iPhone")||e.includes("iPad"))&&!e.includes("Trident")||e.includes("AppleWebKit")&&!(e.includes("Android")||e.includes("Linux")||e.includes("Trident"))&&(e.includes("Mobile")||e.includes("iPhone")||e.includes("iPad"))&&!e.includes("Macintosh")&&!e.includes("Windows"))&&!(e.includes("Chrome")||e.includes("CriOS")||e.includes("Edg")))}function s(){var e=window.navigator.userAgent;return!!e&&Boolean((e.includes("Safari")||e.includes("AppleWebKit"))&&(e.includes("Macintosh")||e.includes("Windows"))&&!e.includes("iPhone")&&!e.includes("iPad")&&!e.includes("Chrome")&&!e.includes("Edg")&&!e.includes("Firefox"))}var c={get documentBody(){return window.document.body},get documentReferrer(){return window.document.referrer},get documentVisibilityState(){return document.visibilityState},getQueryParams:function(e,t){var r=new URL(e),n={};return t.forEach((e=>{var t=r.searchParams.get(e);null!==t&&(n[e]=t)})),n},isAndroid:function(){return o.test(window.navigator.userAgent)},isDesktopSafari:s,isMobileSafari:a,isSafari:function(){return a()||s()},get isSecureContext(){return window.isSecureContext},isSupported:function(){return void 0!==window.postMessage&&void 0!==window.fetch&&void 0!==document.createElement("a").classList},get isTopLevelWindow(){return window.parent===window},get supportsCryptoDigest(){var e;return void 0!==(null===(e=crypto.subtle)||void 0===e?void 0:e.digest)},get supportsDocumentVisibilityState(){return void 0!==document.visibilityState},get supportsPerformanceEntries(){return"performance"in window&&"function"==typeof window.performance.getEntriesByType},get supportsSendBeacon(){return"function"==typeof window.navigator.sendBeacon},get windowInnerHeight(){return window.innerHeight},get windowInnerWidth(){return window.innerWidth},get windowLocation(){return window.location},get windowNavigationBeacon(){return(e,t)=>window.navigator.sendBeacon(e,t)},get windowNavigatorLanguages(){var{language:e,languages:t}=window.navigator;return Array.isArray(t)?e&&e!==t[0]?[e,...t]:t:e?[e]:["en-US"]},get windowParentLocation(){return window.parent.location},get windowPerformance(){return window.performance}};const u="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function l(e){return e&&e.Math==Math?e:void 0}const d="object"==typeof globalThis&&l(globalThis)||"object"==typeof window&&l(window)||"object"==typeof self&&l(self)||"object"==typeof r.g&&l(r.g)||function(){return this}()||{};function h(){return d}function p(e,t,r){const n=r||d,i=n.__SENTRY__=n.__SENTRY__||{};return i[e]||(i[e]=t())}const f=["debug","info","warn","error","log","assert","trace"],m={};function g(e){if(!("console"in d))return e();const t=d.console,r={},n=Object.keys(m);n.forEach((e=>{const n=m[e];r[e]=t[e],t[e]=n}));try{return e()}finally{n.forEach((e=>{t[e]=r[e]}))}}const v=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return u?f.forEach((r=>{t[r]=(...t)=>{e&&g((()=>{d.console[r](`Sentry Logger [${r}]:`,...t)}))}})):f.forEach((e=>{t[e]=()=>{}})),t}(),y=Object.prototype.toString;function E(e){switch(y.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return P(e,Error)}}function _(e,t){return y.call(e)===`[object ${t}]`}function b(e){return _(e,"ErrorEvent")}function S(e){return _(e,"DOMError")}function C(e){return _(e,"String")}function I(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function O(e){return null===e||I(e)||"object"!=typeof e&&"function"!=typeof e}function w(e){return _(e,"Object")}function T(e){return"undefined"!=typeof Event&&P(e,Event)}function A(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function P(e,t){try{return e instanceof t}catch(e){return!1}}function D(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const N=h();function R(e,t={}){if(!e)return"<unknown>";try{let r=e;const n=5,i=[];let o=0,a=0;const s=" > ",c=s.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;r&&o++<n&&(u=x(r,l),!("html"===u||o>1&&a+i.length*c+u.length>=d));)i.push(u),a+=u.length,r=r.parentNode;return i.reverse().join(s)}catch(e){return"<unknown>"}}function x(e,t){const r=e,n=[];let i,o,a,s,c;if(!r||!r.tagName)return"";if(N.HTMLElement&&r instanceof HTMLElement&&r.dataset&&r.dataset.sentryComponent)return r.dataset.sentryComponent;n.push(r.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>r.getAttribute(e))).map((e=>[e,r.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{n.push(`[${e[0]}="${e[1]}"]`)}));else if(r.id&&n.push(`#${r.id}`),i=r.className,i&&C(i))for(o=i.split(/\s+/),c=0;c<o.length;c++)n.push(`.${o[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)a=l[c],s=r.getAttribute(a),s&&n.push(`[${a}="${s}"]`);return n.join("")}function k(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function L(e,t){if(!Array.isArray(e))return"";const r=[];for(let t=0;t<e.length;t++){const n=e[t];try{D(n)?r.push("[VueViewModel]"):r.push(String(n))}catch(e){r.push("[value cannot be serialized]")}}return r.join(t)}function M(e,t=[],r=!1){return t.some((t=>function(e,t,r=!1){return!!C(e)&&(_(t,"RegExp")?t.test(e):!!C(t)&&(r?e===t:e.includes(t)))}(e,t,r)))}function j(e,t,r){if(!(t in e))return;const n=e[t],i=r(n);"function"==typeof i&&H(i,n),e[t]=i}function U(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch(r){u&&v.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function H(e,t){try{const r=t.prototype||{};e.prototype=t.prototype=r,U(e,"__sentry_original__",t)}catch(e){}}function F(e){return e.__sentry_original__}function B(e){if(E(e))return{message:e.message,name:e.name,stack:e.stack,...V(e)};if(T(e)){const t={type:e.type,target:q(e.target),currentTarget:q(e.currentTarget),...V(e)};return"undefined"!=typeof CustomEvent&&P(e,CustomEvent)&&(t.detail=e.detail),t}return e}function q(e){try{return"undefined"!=typeof Element&&P(e,Element)?R(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function V(e){if("object"==typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function G(e){return z(e,new Map)}function z(e,t){if(function(e){if(!w(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const r=t.get(e);if(void 0!==r)return r;const n={};t.set(e,n);for(const r of Object.keys(e))void 0!==e[r]&&(n[r]=z(e[r],t));return n}if(Array.isArray(e)){const r=t.get(e);if(void 0!==r)return r;const n=[];return t.set(e,n),e.forEach((e=>{n.push(z(e,t))})),n}return e}function $(){const e=d,t=e.crypto||e.msCrypto;let r=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(r=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&r())>>e/4).toString(16)))}function Y(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function W(e){const{message:t,event_id:r}=e;if(t)return t;const n=Y(e);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function K(e,t,r){const n=e.exception=e.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=r||"Error")}function J(e,t){const r=Y(e);if(!r)return;const n=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n&&n.data,...t.data};r.mechanism.data=e}}function X(e){if(e&&e.__sentry_captured__)return!0;try{U(e,"__sentry_captured__",!0)}catch(e){}return!1}const Z="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var Q;function ee(e){return new re((t=>{t(e)}))}function te(e){return new re(((t,r)=>{r(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(Q||(Q={}));class re{constructor(e){re.prototype.__init.call(this),re.prototype.__init2.call(this),re.prototype.__init3.call(this),re.prototype.__init4.call(this),this._state=Q.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new re(((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(e){n(e)}else r(t)},e=>{if(t)try{r(t(e))}catch(e){n(e)}else n(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new re(((t,r)=>{let n,i;return this.then((t=>{i=!1,n=t,e&&e()}),(t=>{i=!0,n=t,e&&e()})).then((()=>{i?r(n):t(n)}))}))}__init(){this._resolve=e=>{this._setResult(Q.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Q.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Q.PENDING&&(A(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Q.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Q.RESOLVED&&e[1](this._value),this._state===Q.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function ne(){return p("globalEventProcessors",(()=>[]))}function ie(e){ne().push(e)}function oe(e,t,r,n=0){return new re(((i,o)=>{const a=e[n];if(null===t||"function"!=typeof a)i(t);else{const s=a({...t},r);Z&&a.id&&null===s&&v.log(`Event processor "${a.id}" dropped event`),A(s)?s.then((t=>oe(e,t,r,n+1).then(i))).then(null,o):oe(e,s,r,n+1).then(i).then(null,o)}}))}function ae(){return Date.now()/1e3}const se=function(){const{performance:e}=d;if(!e||!e.now)return ae;const t=Date.now()-e.now(),r=null==e.timeOrigin?t:e.timeOrigin;return()=>(r+e.now())/1e3}();let ce;(()=>{const{performance:e}=d;if(!e||!e.now)return void(ce="none");const t=36e5,r=e.now(),n=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+r-n):t,o=i<t,a=e.timing&&e.timing.navigationStart,s="number"==typeof a?Math.abs(a+r-n):t;o||s<t?i<=s?(ce="timeOrigin",e.timeOrigin):ce="navigationStart":ce="dateNow"})();const ue="production";function le(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||se(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:$()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}const de=/\(error: (.*)\)/,he=/captureMessage|captureException/;const pe="<anonymous>";function fe(e){try{return e&&"function"==typeof e&&e.name||pe}catch(e){return pe}}function me(e,t=100,r=1/0){try{return ve("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function ge(e,t=3,r=102400){const n=me(e,t);return i=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>r?ge(e,t-1,r):n;var i}function ve(e,t,n=1/0,i=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(r){if(e)return!!t.has(r)||(t.add(r),!1);for(let e=0;e<t.length;e++)if(t[e]===r)return!0;return t.push(r),!1},function(r){if(e)t.delete(r);else for(let e=0;e<t.length;e++)if(t[e]===r){t.splice(e,1);break}}]}()){const[a,s]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(c=t)||c==c))return t;var c;const u=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==r.g&&t===r.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(D(t))return"[VueViewModel]";if(function(e){return w(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${fe(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!u.startsWith("[object "))return u;if(t.__sentry_skip_normalization__)return t;const l="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===l)return u.replace("object ","");if(a(t))return"[Circular ~]";const d=t;if(d&&"function"==typeof d.toJSON)try{return ve("",d.toJSON(),l-1,i,o)}catch(e){}const h=Array.isArray(t)?[]:{};let p=0;const f=B(t);for(const e in f){if(!Object.prototype.hasOwnProperty.call(f,e))continue;if(p>=i){h[e]="[MaxProperties ~]";break}const t=f[e];h[e]=ve(e,t,l-1,i,o),p++}return s(t),h}function ye(e){const{spanId:t,traceId:r}=e.spanContext(),{data:n,op:i,parent_span_id:o,status:a,tags:s,origin:c}=Ee(e);return G({data:n,op:i,parent_span_id:o,span_id:t,status:a,tags:s,trace_id:r,origin:c})}function Ee(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}const _e=new WeakMap;const be=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Se(e,t){return Fe().captureEvent(e,t)}function Ce(e,t){Fe().addBreadcrumb(e,t)}function Ie(){return Fe().getClient()}function Oe(e){return e.transaction}function we(e,t,r){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:o}=r&&r.getUser()||{},a=G({environment:n.environment||ue,release:n.release,user_segment:o,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",a),a}function Te(e){const t=Ie();if(!t)return{};const r=we(Ee(e).trace_id||"",t,Fe().getScope()),n=Oe(e);if(!n)return r;const i=n&&n._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:o,source:a}=n.metadata;null!=o&&(r.sample_rate=`${o}`);const s=Ee(n);return a&&"url"!==a&&(r.transaction=s.description),r.sampled=String(function(e){const{traceFlags:t}=e.spanContext();return Boolean(1&t)}(n)),t.emit&&t.emit("createDsc",r),r}function Ae(e,t){const{fingerprint:r,span:n,breadcrumbs:i,sdkProcessingMetadata:o}=t;!function(e,t){const{extra:r,tags:n,user:i,contexts:o,level:a,transactionName:s}=t,c=G(r);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const u=G(n);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const l=G(i);l&&Object.keys(l).length&&(e.user={...l,...e.user});const d=G(o);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts}),a&&(e.level=a),s&&(e.transaction=s)}(e,t),n&&function(e,t){e.contexts={trace:ye(t),...e.contexts};const r=Oe(t);if(r){e.sdkProcessingMetadata={dynamicSamplingContext:Te(t),...e.sdkProcessingMetadata};const n=Ee(r).description;n&&(e.tags={transaction:n,...e.tags})}}(e,n),function(e,t){var r;e.fingerprint=e.fingerprint?(r=e.fingerprint,Array.isArray(r)?r:[r]):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,r),function(e,t){const r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}(e,i),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,o)}function Pe(e,t){const{extra:r,tags:n,user:i,contexts:o,level:a,sdkProcessingMetadata:s,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:h,transactionName:p,span:f}=t;De(e,"extra",r),De(e,"tags",n),De(e,"user",i),De(e,"contexts",o),De(e,"sdkProcessingMetadata",s),a&&(e.level=a),p&&(e.transactionName=p),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...h}}function De(e,t,r){if(r&&Object.keys(r).length){e[t]={...e[t]};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[t][n]=r[n])}}let Ne;class Re{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=xe()}static clone(e){return e?e.clone():new Re}clone(){const e=new Re;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&le(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof Re){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(w(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=xe(),this}addBreadcrumb(e,t){const r="number"==typeof t?t:100;if(r<=0)return this;const n={timestamp:ae(),...e},i=this._breadcrumbs;return i.push(n),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:r,_tags:n,_extra:i,_user:o,_level:a,_fingerprint:s,_eventProcessors:c,_propagationContext:u,_sdkProcessingMetadata:l,_transactionName:d,_span:h}=this;return{breadcrumbs:e,attachments:t,contexts:r,tags:n,extra:i,user:o,level:a,fingerprint:s||[],eventProcessors:c,propagationContext:u,sdkProcessingMetadata:l,transactionName:d,span:h}}applyToEvent(e,t={},r=[]){return Ae(e,this.getScopeData()),oe([...r,...ne(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const r=t&&t.event_id?t.event_id:$();if(!this._client)return v.warn("No client configured on scope - will not capture exception!"),r;const n=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:n,...t,event_id:r},this),r}captureMessage(e,t,r){const n=r&&r.event_id?r.event_id:$();if(!this._client)return v.warn("No client configured on scope - will not capture message!"),n;const i=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n},this),n}captureEvent(e,t){const r=t&&t.event_id?t.event_id:$();return this._client?(this._client.captureEvent(e,{...t,event_id:r},this),r):(v.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function xe(){return{traceId:$(),spanId:$().substring(16)}}const ke="7.120.4",Le=parseFloat(ke),Me=100;class je{constructor(e,t,r,n=Le){let i,o;this._version=n,t?i=t:(i=new Re,i.setClient(e)),r?o=r:(o=new Re,o.setClient(e)),this._stack=[{scope:i}],e&&this.bindClient(e),this._isolationScope=o}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();let r;try{r=e(t)}catch(e){throw this.popScope(),e}return A(r)?r.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const r=this._lastEventId=t&&t.event_id?t.event_id:$(),n=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:n,...t,event_id:r}),r}captureMessage(e,t,r){const n=this._lastEventId=r&&r.event_id?r.event_id:$(),i=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n}),n}captureEvent(e,t){const r=t&&t.event_id?t.event_id:$();return e.type||(this._lastEventId=r),this.getScope().captureEvent(e,{...t,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:r,client:n}=this.getStackTop();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Me}=n.getOptions&&n.getOptions()||{};if(o<=0)return;const a={timestamp:ae(),...e},s=i?g((()=>i(a,t))):a;null!==s&&(n.emit&&n.emit("beforeAddBreadcrumb",s,t),r.addBreadcrumb(s,o))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:r}=this.getStackTop();r&&e(t)}run(e){const t=He(this);try{e(this)}finally{He(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return Z&&v.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const r=this._callExtensionMethod("startTransaction",e,t);return Z&&!r&&(this.getClient()?v.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):v.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e){let t={};"ok"===e.status&&(t={status:"exited"}),le(e,t)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:r}=this.getStackTop(),{release:n,environment:i=ue}=r&&r.getOptions()||{},{userAgent:o}=d.navigator||{},a=function(e){const t=se(),r={sid:$(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return G({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(r)};return e&&le(r,e),r}({release:n,environment:i,user:t.getUser(),...o&&{userAgent:o},...e}),s=t.getSession&&t.getSession();return s&&"ok"===s.status&&le(s,{status:"exited"}),this.endSession(),t.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),r=e.getSession();r&&t&&t.captureSession&&t.captureSession(r)}_callExtensionMethod(e,...t){const r=Ue().__SENTRY__;if(r&&r.extensions&&"function"==typeof r.extensions[e])return r.extensions[e].apply(this,t);Z&&v.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Ue(){return d.__SENTRY__=d.__SENTRY__||{extensions:{},hub:void 0},d}function He(e){const t=Ue(),r=Be(t);return qe(t,e),r}function Fe(){const e=Ue();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=Ue()){return t=e,!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)&&!Be(e).isOlderThan(Le)||qe(e,new je),Be(e);var t}(e)}function Be(e){return p("hub",(()=>new je),e)}function qe(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}const Ve=[];function Ge(e,t){for(const r of t)r&&r.afterAllSetup&&r.afterAllSetup(e)}function ze(e,t,r){if(r[t.name])Z&&v.log(`Integration skipped because it was already installed: ${t.name}`);else{if(r[t.name]=t,-1===Ve.indexOf(t.name)&&(t.setupOnce(ie,Fe),Ve.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,n)=>r(t,n,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const r=t.processEvent.bind(t),n=(t,n)=>r(t,n,e);n.id=t.name,e.addEventProcessor(n)}Z&&v.log(`Integration installed: ${t.name}`)}}function $e(e,t){const r=function(...e){return t(...e)};return r.id=e,r}const Ye=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],We=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Ke="InboundFilters",Je=(e={})=>({name:Ke,setupOnce(){},processEvent(t,r,n){const i=n.getOptions(),o=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Ye],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:We],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,i);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(Z&&v.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${W(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let r;e.message&&t.push(e.message);try{r=e.exception.values[e.exception.values.length-1]}catch(e){}return r&&r.value&&(t.push(r.value),r.type&&t.push(`${r.type}: ${r.value}`)),Z&&0===t.length&&v.error(`Could not extract message for event ${W(e)}`),t}(e).some((e=>M(e,t)))}(e,t.ignoreErrors)?(Z&&v.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${W(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const r=e.transaction;return!!r&&M(r,t)}(e,t.ignoreTransactions)?(Z&&v.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${W(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const r=Ze(e);return!!r&&M(r,t)}(e,t.denyUrls)?(Z&&v.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${W(e)}.\nUrl: ${Ze(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const r=Ze(e);return!r||M(r,t)}(e,t.allowUrls)&&(Z&&v.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${W(e)}.\nUrl: ${Ze(e)}`),!0)}(t,o)?null:t}}),Xe=$e(Ke,Je);function Ze(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const r=e[t];if(r&&"<anonymous>"!==r.filename&&"[native code]"!==r.filename)return r.filename||null}return null}(t):null}catch(t){return Z&&v.error(`Cannot extract url for event ${W(e)}`),null}}let Qe;const et="FunctionToString",tt=new WeakMap,rt=()=>({name:et,setupOnce(){Qe=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=F(this),r=tt.has(Ie())&&void 0!==t?t:this;return Qe.apply(r,e)}}catch(e){}},setup(e){tt.set(e,!0)}}),nt=$e(et,rt),it={},ot={};function at(e,t){it[e]=it[e]||[],it[e].push(t)}function st(e,t){ot[e]||(t(),ot[e]=!0)}function ct(e,t){const r=e&&it[e];if(r)for(const n of r)try{n(t)}catch(t){u&&v.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${fe(n)}\nError:`,t)}}function ut(){"console"in d&&f.forEach((function(e){e in d.console&&j(d.console,e,(function(t){return m[e]=t,function(...t){ct("console",{args:t,level:e});const r=m[e];r&&r.apply(d.console,t)}}))}))}const lt=d;let dt,ht,pt;function ft(){if(!lt.document)return;const e=ct.bind(null,"dom"),t=mt(e,!0);lt.document.addEventListener("click",t,!1),lt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const r=lt[t]&&lt[t].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(j(r,"addEventListener",(function(t){return function(r,n,i){if("click"===r||"keypress"==r)try{const n=this,o=n.__sentry_instrumentation_handlers__=n.__sentry_instrumentation_handlers__||{},a=o[r]=o[r]||{refCount:0};if(!a.handler){const n=mt(e);a.handler=n,t.call(this,r,n,i)}a.refCount++}catch(e){}return t.call(this,r,n,i)}})),j(r,"removeEventListener",(function(e){return function(t,r,n){if("click"===t||"keypress"==t)try{const r=this,i=r.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,n),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete r.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,r,n)}})))}))}function mt(e,t=!1){return r=>{if(!r||r._sentryCaptured)return;const n=function(e){try{return e.target}catch(e){return null}}(r);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(r.type,n))return;U(r,"_sentryCaptured",!0),n&&!n._sentryId&&U(n,"_sentryId",$());const i="keypress"===r.type?"input":r.type;(function(e){if(e.type!==ht)return!1;try{if(!e.target||e.target._sentryId!==pt)return!1}catch(e){}return!0})(r)||(e({event:r,name:i,global:t}),ht=r.type,pt=n?n._sentryId:void 0),clearTimeout(dt),dt=lt.setTimeout((()=>{pt=void 0,ht=void 0}),1e3)}}const gt=d,vt="__sentry_xhr_v3__";function yt(){if(!gt.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;j(e,"open",(function(e){return function(...t){const r=Date.now(),n=C(t[0])?t[0].toUpperCase():void 0,i=function(e){if(C(e))return e;try{return e.toString()}catch(e){}}(t[1]);if(!n||!i)return e.apply(this,t);this[vt]={method:n,url:i,request_headers:{}},"POST"===n&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const e=this[vt];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}ct("xhr",{args:[n,i],endTimestamp:Date.now(),startTimestamp:r,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?j(this,"onreadystatechange",(function(e){return function(...t){return o(),e.apply(this,t)}})):this.addEventListener("readystatechange",o),j(this,"setRequestHeader",(function(e){return function(...t){const[r,n]=t,i=this[vt];return i&&C(r)&&C(n)&&(i.request_headers[r.toLowerCase()]=n),e.apply(this,t)}})),e.apply(this,t)}})),j(e,"send",(function(e){return function(...t){const r=this[vt];return r?(void 0!==t[0]&&(r.body=t[0]),ct("xhr",{args:[r.method,r.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)):e.apply(this,t)}}))}const Et=h();function _t(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function bt(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in Et))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(_t(Et.fetch))return!0;let e=!1;const t=Et.document;if(t&&"function"==typeof t.createElement)try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=_t(r.contentWindow.fetch)),t.head.removeChild(r)}catch(e){u&&v.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&j(d,"fetch",(function(e){return function(...t){const{method:r,url:n}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,r]=e;return{url:Ct(t),method:St(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:Ct(t),method:St(t,"method")?String(t.method).toUpperCase():"GET"}}(t),i={args:t,fetchData:{method:r,url:n},startTimestamp:Date.now()};return ct("fetch",{...i}),e.apply(d,t).then((e=>(ct("fetch",{...i,endTimestamp:Date.now(),response:e}),e)),(e=>{throw ct("fetch",{...i,endTimestamp:Date.now(),error:e}),e}))}}))}function St(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Ct(e){return"string"==typeof e?e:e?St(e,"url")?e.url:e.toString?e.toString():"":""}const It=h(),Ot=d;let wt;function Tt(){if(!function(){const e=It.chrome,t=e&&e.app&&e.app.runtime,r="history"in It&&!!It.history.pushState&&!!It.history.replaceState;return!t&&r}())return;const e=Ot.onpopstate;function t(e){return function(...t){const r=t.length>2?t[2]:void 0;if(r){const e=wt,t=String(r);wt=t,ct("history",{from:e,to:t})}return e.apply(this,t)}}Ot.onpopstate=function(...t){const r=Ot.location.href,n=wt;if(wt=r,ct("history",{from:n,to:r}),e)try{return e.apply(this,t)}catch(e){}},j(Ot.history,"pushState",t),j(Ot.history,"replaceState",t)}const At=["fatal","error","warning","log","info","debug"];function Pt(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:r,hash:n,relative:t[5]+r+n}}const Dt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Nt=d;let Rt=0;function xt(){return Rt>0}function kt(e,t={},r){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(F(e))return e}catch(t){return e}const n=function(){const n=Array.prototype.slice.call(arguments);try{r&&"function"==typeof r&&r.apply(this,arguments);const i=n.map((e=>kt(e,t)));return e.apply(this,i)}catch(e){throw Rt++,setTimeout((()=>{Rt--})),function(...e){const t=Fe();if(2===e.length){const[r,n]=e;return r?t.withScope((()=>(t.getStackTop().scope=r,n(r)))):t.withScope(n)}t.withScope(e[0])}((r=>{var i;r.addEventProcessor((e=>(t.mechanism&&(K(e,void 0,void 0),J(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),i=e,Fe().captureException(i,function(e){if(e)return function(e){return e instanceof Re||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>be.includes(e)))}(e)?{captureContext:e}:e}(undefined))})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(e){}H(n,e),U(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch(e){}return n}const Lt="Breadcrumbs",Mt=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Lt,setupOnce(){},setup(e){var r;t.console&&function(e){const t="console";at(t,e),st(t,ut)}(function(e){return function(t){if(Ie()!==e)return;const r={category:"console",data:{arguments:t.args,logger:"console"},level:(n=t.level,"warn"===n?"warning":At.includes(n)?n:"log"),message:L(t.args," ")};var n;if("assert"===t.level){if(!1!==t.args[0])return;r.message=`Assertion failed: ${L(t.args.slice(1)," ")||"console.assert"}`,r.data.arguments=t.args.slice(1)}Ce(r,{input:t.args,level:t.level})}}(e)),t.dom&&(r=function(e,t){return function(r){if(Ie()!==e)return;let n,i,o="object"==typeof t?t.serializeAttribute:void 0,a="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;a&&a>1024&&(Dt&&v.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${a} was configured. Sentry will use 1024 instead.`),a=1024),"string"==typeof o&&(o=[o]);try{const e=r.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;n=R(t,{keyAttrs:o,maxStringLength:a}),i=function(e){if(!N.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}(t)}catch(e){n="<unknown>"}if(0===n.length)return;const s={category:`ui.${r.name}`,message:n};i&&(s.data={"ui.component_name":i}),Ce(s,{event:r.event,name:r.name,global:r.global})}}(e,t.dom),at("dom",r),st("dom",ft)),t.xhr&&function(e){at("xhr",e),st("xhr",yt)}(function(e){return function(t){if(Ie()!==e)return;const{startTimestamp:r,endTimestamp:n}=t,i=t.xhr[vt];if(!r||!n||!i)return;const{method:o,url:a,status_code:s,body:c}=i;Ce({category:"xhr",data:{method:o,url:a,status_code:s},type:"http"},{xhr:t.xhr,input:c,startTimestamp:r,endTimestamp:n})}}(e)),t.fetch&&function(e){const t="fetch";at(t,e),st(t,bt)}(function(e){return function(t){if(Ie()!==e)return;const{startTimestamp:r,endTimestamp:n}=t;if(n&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error)Ce({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:r,endTimestamp:n});else{const e=t.response;Ce({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:r,endTimestamp:n})}}}(e)),t.history&&function(e){const t="history";at(t,e),st(t,Tt)}(function(e){return function(t){if(Ie()!==e)return;let r=t.from,n=t.to;const i=Pt(Nt.location.href);let o=r?Pt(r):void 0;const a=Pt(n);o&&o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(n=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),Ce({category:"navigation",data:{from:r,to:n}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){Ie()===e&&Ce({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:W(t)},{event:t})}}(e))}}},jt=$e(Lt,Mt),Ut="Dedupe",Ht=()=>{let e;return{name:Ut,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){return!!t&&(!!function(e,t){const r=e.message,n=t.message;return!(!r&&!n)&&(!(r&&!n||!r&&n)&&(r===n&&(!!qt(e,t)&&!!Bt(e,t))))}(e,t)||!!function(e,t){const r=Vt(t),n=Vt(e);return!(!r||!n)&&(r.type===n.type&&r.value===n.value&&(!!qt(e,t)&&!!Bt(e,t)))}(e,t))}(t,e))return Dt&&v.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},Ft=$e(Ut,Ht);function Bt(e,t){let r=Gt(e),n=Gt(t);if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;if(n.length!==r.length)return!1;for(let e=0;e<n.length;e++){const t=n[e],i=r[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function qt(e,t){let r=e.fingerprint,n=t.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;try{return!(r.join("")!==n.join(""))}catch(e){return!1}}function Vt(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Gt(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}let zt=null;function $t(){zt=d.onerror,d.onerror=function(e,t,r,n,i){return ct("error",{column:n,error:i,line:r,msg:e,url:t}),!(!zt||zt.__SENTRY_LOADER__)&&zt.apply(this,arguments)},d.onerror.__SENTRY_INSTRUMENTED__=!0}let Yt=null;function Wt(){Yt=d.onunhandledrejection,d.onunhandledrejection=function(e){return ct("unhandledrejection",e),!(Yt&&!Yt.__SENTRY_LOADER__)||Yt.apply(this,arguments)},d.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Kt(e,t){const r=Xt(e,t),n={type:t&&t.name,value:Qt(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function Jt(e,t){return{exception:{values:[Kt(e,t)]}}}function Xt(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Zt.test(e.message))return 1}return 0}(t);try{return e(r,n)}catch(e){}return[]}const Zt=/Minified React error #\d+;/i;function Qt(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function er(e,t,r,n,i){let o;if(b(t)&&t.error)return Jt(e,t.error);if(S(t)||_(t,"DOMException")){const i=t;if("stack"in t)o=Jt(e,t);else{const t=i.name||(S(i)?"DOMError":"DOMException"),a=i.message?`${t}: ${i.message}`:t;o=tr(e,a,r,n),K(o,a)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return E(t)?Jt(e,t):w(t)||T(t)?(o=function(e,t,r,n){const i=Ie(),o=i&&i.getOptions().normalizeDepth,a={exception:{values:[{type:T(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:rr(t,{isUnhandledRejection:n})}]},extra:{__serialized__:ge(t,o)}};if(r){const t=Xt(e,r);t.length&&(a.exception.values[0].stacktrace={frames:t})}return a}(e,t,r,i),J(o,{synthetic:!0}),o):(o=tr(e,t,r,n),K(o,`${t}`,void 0),J(o,{synthetic:!0}),o)}function tr(e,t,r,n){const i={};if(n&&r){const n=Xt(e,r);n.length&&(i.exception={values:[{value:t,stacktrace:{frames:n}}]})}if(I(t)){const{__sentry_template_string__:e,__sentry_template_values__:r}=t;return i.logentry={message:e,params:r},i}return i.message=t,i}function rr(e,{isUnhandledRejection:t}){const r=function(e,t=40){const r=Object.keys(B(e));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=t)return k(r[0],t);for(let e=r.length;e>0;e--){const n=r.slice(0,e).join(", ");if(!(n.length>t))return e===r.length?n:k(n,t)}return""}(e),n=t?"promise rejection":"exception";return b(e)?`Event \`ErrorEvent\` captured as ${n} with message \`${e.message}\``:T(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${n}`:`Object captured as ${n} with keys: ${r}`}const nr="GlobalHandlers",ir=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:nr,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(function(e){!function(){const t="error";at(t,(t=>{const{stackParser:r,attachStacktrace:n}=cr();if(Ie()!==e||xt())return;const{msg:i,url:o,line:a,column:s,error:c}=t,u=void 0===c&&C(i)?function(e,t,r,n){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let o=b(e)?e.message:e,a="Error";const s=o.match(i);s&&(a=s[1],o=s[2]);return ar({exception:{values:[{type:a,value:o}]}},t,r,n)}(i,o,a,s):ar(er(r,c||i,void 0,n,!1),o,a,s);u.level="error",Se(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})),st(t,$t)}()}(e),sr("onerror")),t.onunhandledrejection&&(function(e){!function(){const t="unhandledrejection";at(t,(t=>{const{stackParser:r,attachStacktrace:n}=cr();if(Ie()!==e||xt())return;const i=function(e){if(O(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),o=O(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:er(r,i,void 0,n,!0);o.level="error",Se(o,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})),st(t,Wt)}()}(e),sr("onunhandledrejection"))}}},or=$e(nr,ir);function ar(e,t,r,n){const i=e.exception=e.exception||{},o=i.values=i.values||[],a=o[0]=o[0]||{},s=a.stacktrace=a.stacktrace||{},c=s.frames=s.frames||[],u=isNaN(parseInt(n,10))?void 0:n,l=isNaN(parseInt(r,10))?void 0:r,d=C(t)&&t.length>0?t:function(){try{return N.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),e}function sr(e){Dt&&v.log(`Global Handler attached: ${e}`)}function cr(){const e=Ie();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const ur="HttpContext",lr=()=>({name:ur,setupOnce(){},preprocessEvent(e){if(!Nt.navigator&&!Nt.location&&!Nt.document)return;const t=e.request&&e.request.url||Nt.location&&Nt.location.href,{referrer:r}=Nt.document||{},{userAgent:n}=Nt.navigator||{},i={...e.request&&e.request.headers,...r&&{Referer:r},...n&&{"User-Agent":n}},o={...e.request,...t&&{url:t},headers:i};e.request=o}}),dr=$e(ur,lr);function hr(e,t,r=250,n,i,o,a){if(!(o.exception&&o.exception.values&&a&&P(a.originalException,Error)))return;const s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var c,u;s&&(o.exception.values=(c=pr(e,t,i,a.originalException,n,o.exception.values,s,0),u=r,c.map((e=>(e.value&&(e.value=k(e.value,u)),e)))))}function pr(e,t,r,n,i,o,a,s){if(o.length>=r+1)return o;let c=[...o];if(P(n[i],Error)){fr(a,s);const o=e(t,n[i]),u=c.length;mr(o,i,u,s),c=pr(e,t,r,n[i],i,[o,...c],o,u)}return Array.isArray(n.errors)&&n.errors.forEach(((n,o)=>{if(P(n,Error)){fr(a,s);const u=e(t,n),l=c.length;mr(u,`errors[${o}]`,l,s),c=pr(e,t,r,n,i,[u,...c],u,l)}})),c}function fr(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function mr(e,t,r,n){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:r,parent_id:n}}const gr="LinkedErrors",vr=(e={})=>{const t=e.limit||5,r=e.key||"cause";return{name:gr,setupOnce(){},preprocessEvent(e,n,i){const o=i.getOptions();hr(Kt,o.stackParser,o.maxValueLength,r,t,e,n)}}},yr=$e(gr,vr),Er=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],_r="TryCatch",br=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:_r,setupOnce(){t.setTimeout&&j(Nt,"setTimeout",Cr),t.setInterval&&j(Nt,"setInterval",Cr),t.requestAnimationFrame&&j(Nt,"requestAnimationFrame",Ir),t.XMLHttpRequest&&"XMLHttpRequest"in Nt&&j(XMLHttpRequest.prototype,"send",Or);const e=t.eventTarget;e&&(Array.isArray(e)?e:Er).forEach(wr)}}},Sr=$e(_r,br);function Cr(e){return function(...t){const r=t[0];return t[0]=kt(r,{mechanism:{data:{function:fe(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Ir(e){return function(t){return e.apply(this,[kt(t,{mechanism:{data:{function:"requestAnimationFrame",handler:fe(e)},handled:!1,type:"instrument"}})])}}function Or(e){return function(...t){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in r&&"function"==typeof r[e]&&j(r,e,(function(t){const r={mechanism:{data:{function:e,handler:fe(t)},handled:!1,type:"instrument"}},n=F(t);return n&&(r.mechanism.data.handler=fe(n)),kt(t,r)}))})),e.apply(this,t)}}function wr(e){const t=Nt,r=t[e]&&t[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(j(r,"addEventListener",(function(t){return function(r,n,i){try{"function"==typeof n.handleEvent&&(n.handleEvent=kt(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:fe(n),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[r,kt(n,{mechanism:{data:{function:"addEventListener",handler:fe(n),target:e},handled:!1,type:"instrument"}}),i])}})),j(r,"removeEventListener",(function(e){return function(t,r,n){const i=r;try{const r=i&&i.__sentry_wrapped__;r&&e.call(this,t,r,n)}catch(e){}return e.call(this,t,i,n)}})))}const Tr=[Je(),rt(),br(),Mt(),ir(),vr(),Ht(),lr()];function Ar(e,t){const r={type:t.name||t.constructor.name,value:t.message},n=function(e,t){return e(t.stack||"",1)}(e,t);return n.length&&(r.stacktrace={frames:n}),r}const Pr="LinkedErrors",Dr=$e(Pr,((e={})=>{const t=e.limit||5,r=e.key||"cause";return{name:Pr,setupOnce(){},preprocessEvent(e,n,i){const o=i.getOptions();hr(Ar,o.stackParser,o.maxValueLength,r,t,e,n)}}})),Nr=n;let Rr={};Nt.Sentry&&Nt.Sentry.Integrations&&(Rr=Nt.Sentry.Integrations);const xr={...Rr,...Nr,...i},kr="?";function Lr(e,t,r,n){const i={filename:e,function:t,in_app:!0};return void 0!==r&&(i.lineno=r),void 0!==n&&(i.colno=n),i}const Mr=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,jr=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ur=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Hr=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Fr=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Br=function(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,r=0)=>{const n=[],i=e.split("\n");for(let e=r;e<i.length;e++){const r=i[e];if(r.length>1024)continue;const o=de.test(r)?r.replace(de,"$1"):r;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){n.push(t);break}}if(n.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),he.test(t[t.length-1].function||"")&&(t.pop(),he.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(n)}}([30,e=>{const t=Mr.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=jr.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,r]=qr(t[1]||kr,t[2]);return Lr(r,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=Ur.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Hr.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||kr;return[r,e]=qr(r,e),Lr(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=Fr.exec(e);return t?Lr(t[2],t[1]||kr,+t[3],t[4]?+t[4]:void 0):void 0}]),qr=(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:kr,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};class Vr extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const Gr=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function zr(e,t=!1){const{host:r,path:n,pass:i,port:o,projectId:a,protocol:s,publicKey:c}=e;return`${s}://${c}${t&&i?`:${i}`:""}@${r}${o?`:${o}`:""}/${n?`${n}/`:n}${a}`}function $r(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Yr(e,t=[]){return[e,t]}function Wr(e,t){const[r,n]=e;return[r,[...n,t]]}function Kr(e,t){const r=e[1];for(const e of r)if(t(e,e[0].type))return!0;return!1}function Jr(e,t){return(t||new TextEncoder).encode(e)}function Xr(e,t){const[r,n]=e;let i=JSON.stringify(r);function o(e){"string"==typeof i?i="string"==typeof e?i+e:[Jr(i,t),e]:i.push("string"==typeof e?Jr(e,t):e)}for(const e of n){const[t,r]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof r||r instanceof Uint8Array)o(r);else{let e;try{e=JSON.stringify(r)}catch(t){e=JSON.stringify(me(r))}o(e)}}return"string"==typeof i?i:function(e){const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}(i)}function Zr(e,t){const r="string"==typeof e.data?Jr(e.data,t):e.data;return[G({type:"attachment",length:r.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),r]}const Qr={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function en(e){return Qr[e]}function tn(e){if(!e||!e.sdk)return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}function rn(e,t,r=function(e){const t=[];function r(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return te(new Vr("Not adding Promise because buffer limit was reached."));const i=n();return-1===t.indexOf(i)&&t.push(i),i.then((()=>r(i))).then(null,(()=>r(i).then(null,(()=>{})))),i},drain:function(e){return new re(((r,n)=>{let i=t.length;if(!i)return r(!0);const o=setTimeout((()=>{e&&e>0&&r(!1)}),e);t.forEach((e=>{ee(e).then((()=>{--i||(clearTimeout(o),r(!0))}),n)}))}))}}}(e.bufferSize||30)){let n={};function i(i){const o=[];if(Kr(i,((t,r)=>{const i=en(r);if(function(e,t,r=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,i)){const n=nn(t,r);e.recordDroppedEvent("ratelimit_backoff",i,n)}else o.push(t)})),0===o.length)return ee();const a=Yr(i[0],o),s=t=>{Kr(a,((r,n)=>{const i=nn(r,n);e.recordDroppedEvent(t,en(n),i)}))};return r.add((()=>t({body:Xr(a,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Z&&v.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),n=function(e,{statusCode:t,headers:r},n=Date.now()){const i={...e},o=r&&r["x-sentry-rate-limits"],a=r&&r["retry-after"];if(o)for(const e of o.trim().split(",")){const[t,r,,,o]=e.split(":",5),a=parseInt(t,10),s=1e3*(isNaN(a)?60:a);if(r)for(const e of r.split(";"))"metric_bucket"===e&&o&&!o.split(";").includes("custom")||(i[e]=n+s);else i.all=n+s}else a?i.all=n+function(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const n=Date.parse(`${e}`);return isNaN(n)?6e4:n-t}(a,n):429===t&&(i.all=n+6e4);return i}(n,e),e)),(e=>{throw s("network_error"),e})))).then((e=>e),(e=>{if(e instanceof Vr)return Z&&v.error("Skipped sending event because buffer is full."),s("queue_overflow"),ee();throw e}))}return i.__sentry__baseTransport__=!0,{send:i,flush:e=>r.drain(e)}}function nn(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}let on;function an(e,t=function(){if(on)return on;if(_t(Nt.fetch))return on=Nt.fetch.bind(Nt);const e=Nt.document;let t=Nt.fetch;if(e&&"function"==typeof e.createElement)try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r);const n=r.contentWindow;n&&n.fetch&&(t=n.fetch),e.head.removeChild(r)}catch(e){Dt&&v.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return on=t.bind(Nt)}()){let r=0,n=0;return rn(e,(function(i){const o=i.body.length;r+=o,n++;const a={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:r<=6e4&&n<15,...e.fetchOptions};try{return t(e.url,a).then((e=>(r-=o,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return on=void 0,r-=o,n--,te(e)}}))}function sn(e,t={}){const r="string"==typeof t?t:t.tunnel,n="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return r||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return r={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(r).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)).join("&");var r}(e,n)}`}const cn="Not capturing exception because it's already been captured.";class un{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=function(e){const t="string"==typeof e?function(e){const t=Gr.exec(e);if(!t)return void g((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[r,n,i="",o,a="",s]=t.slice(1);let c="",u=s;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return $r({host:o,pass:i,path:c,projectId:u,port:a,protocol:r,publicKey:n})}(e):$r(e);if(t&&function(e){if(!u)return!0;const{port:t,projectId:r,protocol:n}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(v.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?t&&isNaN(parseInt(t,10))&&(v.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(v.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),1):(v.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))}(t))return t}(e.dsn):Z&&v.warn("No DSN provided, client will not send events."),this._dsn){const t=sn(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){if(X(e))return void(Z&&v.log(cn));let n=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,r))).then((e=>{n=e}))),n}captureMessage(e,t,r,n){let i=r&&r.event_id;const o=I(e)?e:String(e),a=O(e)?this.eventFromMessage(o,t,r):this.eventFromException(e,r);return this._process(a.then((e=>this._captureEvent(e,r,n))).then((e=>{i=e}))),i}captureEvent(e,t,r){if(t&&t.originalException&&X(t.originalException))return void(Z&&v.log(cn));let n=t&&t.event_id;const i=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,i||r).then((e=>{n=e}))),n}captureSession(e){"string"!=typeof e.release?Z&&v.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),le(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((r=>t.flush(e).then((e=>r&&e))))):ee(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return Z&&v.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];ze(this,e,this._integrations),t||Ge(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let r=function(e,t,r,n){const i=tn(r),o=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,r&&r.sdk);const a=function(e,t,r,n){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&n&&{dsn:zr(n)},...i&&{trace:G({...i})}}}(e,i,n,t);return delete e.sdkProcessingMetadata,Yr(a,[[{type:o},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])r=Wr(r,Zr(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const n=this._sendEnvelope(r);n&&n.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,r,n){const i=tn(r);return Yr({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!n&&t&&{dsn:zr(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,r){if(this._options.sendClientReports){const n="number"==typeof r?r:1,i=`${e}:${t}`;Z&&v.log(`Recording outcome: "${i}"${n>1?` (${n} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+n}}captureAggregateMetrics(e){Z&&v.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=function(e,t,r,n){const i={sent_at:(new Date).toISOString()};r&&r.sdk&&(i.sdk={name:r.sdk.name,version:r.sdk.version}),n&&t&&(i.dsn=zr(t));const o=function(e){const t=function(e){let t="";for(const r of e){const e=Object.entries(r.tags),n=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${r.name}@${r.unit}:${r.metric}|${r.metricType}${n}|T${r.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Yr(i,[o])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const r={};return t.forEach((t=>{t&&ze(e,t,r)})),r}(this,e),Ge(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let r=!1,n=!1;const i=t.exception&&t.exception.values;if(i){n=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){r=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&r)&&(le(e,{...r&&{status:"crashed"},errors:e.errors||Number(n||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new re((t=>{let r=0;const n=setInterval((()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,r,n=function(){return Fe().getIsolationScope()}()){const i=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o.length>0&&(t.integrations=o),this.emit("preprocessEvent",e,t),function(e,t,r,n,i,o){const{normalizeDepth:a=3,normalizeMaxBreadth:s=1e3}=e,c={...t,event_id:t.event_id||r.event_id||$(),timestamp:t.timestamp||ae()},u=r.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:r,release:n,dist:i,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?r:ue),void 0===e.release&&void 0!==n&&(e.release=n),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=k(e.message,o));const a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=k(a.value,o));const s=e.request;s&&s.url&&(s.url=k(s.url,o))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,u),void 0===t.type&&function(e,t){const r=d._sentryDebugIds;if(!r)return;let n;const i=_e.get(t);i?n=i:(n=new Map,_e.set(t,n));const o=Object.keys(r).reduce(((e,i)=>{let o;const a=n.get(i);a?o=a:(o=t(i),n.set(i,o));for(let t=o.length-1;t>=0;t--){const n=o[t];if(n.filename){e[n.filename]=r[i];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=o[e.filename])}))}))}catch(e){}}(c,e.stackParser);const l=function(e,t){if(!t)return e;const r=e?e.clone():new Re;return r.update(t),r}(n,r.captureContext);r.mechanism&&J(c,r.mechanism);const h=i&&i.getEventProcessors?i.getEventProcessors():[],p=(Ne||(Ne=new Re),Ne).getScopeData();o&&Pe(p,o.getScopeData()),l&&Pe(p,l.getScopeData());const f=[...r.attachments||[],...p.attachments];return f.length&&(r.attachments=f),Ae(c,p),oe([...h,...ne(),...p.eventProcessors],c,r).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.keys(t).forEach((e=>{r.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof a&&a>0?function(e,t,r){if(!e)return null;const n={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:me(e.data,t,r)}})))},...e.user&&{user:me(e.user,t,r)},...e.contexts&&{contexts:me(e.contexts,t,r)},...e.extra&&{extra:me(e.extra,t,r)}};return e.contexts&&e.contexts.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=me(e.contexts.trace.data,t,r))),e.spans&&(n.spans=e.spans.map((e=>{const n=Ee(e).data;return n&&(e.data=me(n,t,r)),e}))),n}(e,a,s):e)))}(i,e,t,r,this,n).then((e=>{if(null===e)return e;const t={...n.getPropagationContext(),...r?r.getPropagationContext():void 0};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:n,spanId:i,parentSpanId:o,dsc:a}=t;e.contexts={trace:{trace_id:n,span_id:i,parent_span_id:o},...e.contexts};const s=a||we(n,this,r);e.sdkProcessingMetadata={dynamicSamplingContext:s,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then((e=>e.event_id),(e=>{if(Z){const t=e;"log"===t.logLevel?v.log(t.message):v.warn(t)}}))}_processEvent(e,t,r){const n=this.getOptions(),{sampleRate:i}=n,o=dn(e),a=ln(e),s=e.type||"error",c=`before send for type \`${s}\``;if(a&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),te(new Vr(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const u="replay_event"===s?"replay":s,l=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,r,l).then((r=>{if(null===r)throw this.recordDroppedEvent("event_processor",u,e),new Vr("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return r;const i=function(e,t,r){const{beforeSend:n,beforeSendTransaction:i}=e;if(ln(t)&&n)return n(t,r);if(dn(t)&&i){if(t.spans){const e=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return i(t,r)}return t}(n,r,t);return function(e,t){const r=`${t} must return \`null\` or a valid event.`;if(A(e))return e.then((e=>{if(!w(e)&&null!==e)throw new Vr(r);return e}),(e=>{throw new Vr(`${t} rejected with ${e}`)}));if(!w(e)&&null!==e)throw new Vr(r);return e}(i,c)})).then((n=>{if(null===n){if(this.recordDroppedEvent("before_send",u,e),o){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new Vr(`${c} returned \`null\`, will not send event.`,"log")}const i=r&&r.getSession();if(!o&&i&&this._updateSessionFromEvent(i,n),o){const e=(n.sdkProcessingMetadata&&n.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(n.spans?n.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const a=n.transaction_info;if(o&&a&&n.transaction!==e.transaction){const e="custom";n.transaction_info={...a,source:e}}return this.sendEvent(n,t),n})).then(null,(e=>{if(e instanceof Vr)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new Vr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{Z&&v.error("Error while sending event:",e)}));Z&&v.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[r,n]=t.split(":");return{reason:r,category:n,quantity:e[t]}}))}}function ln(e){return void 0===e.type}function dn(e){return"transaction"===e.type}class hn extends un{constructor(e){!function(e,t,r=[t],n="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:r.map((e=>({name:`${n}:@sentry/${e}`,version:ke}))),version:ke}),e._metadata=i}(e,"browser",["browser"],Nt.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Nt.document&&Nt.document.addEventListener("visibilitychange",(()=>{"hidden"===Nt.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,r,n){const i=er(e,t,r&&r.syntheticException||void 0,n);return J(i),i.level="error",r&&r.event_id&&(i.event_id=r.event_id),ee(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return function(e,t,r="info",n,i){const o=tr(e,t,n&&n.syntheticException||void 0,i);return o.level=r,n&&n.event_id&&(o.event_id=n.event_id),ee(o)}(this._options.stackParser,e,t,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Dt&&v.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:r,dsn:n}){const i={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!r&&!!n&&{dsn:zr(n)}},o=function(e){return[{type:"user_report"},e]}(e);return Yr(i,[o])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(Dt&&v.log("No outcomes to send"));if(!this._dsn)return void(Dt&&v.log("No dsn provided, will not send outcomes"));Dt&&v.log("Sending outcomes:",e);const t=(r=e,Yr((n=this._options.tunnel&&zr(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:ae(),discarded_events:r}]]));var r,n;this._sendEnvelope(t)}}class pn{constructor(e){this.debug=e.debug??!1;const t={debug:this.debug,dist:`${e.release.split("@")[1]}-${e.environment}`,dsn:e.dsn,environment:e.environment,integrations:[...Tr,new xr.GlobalHandlers({onerror:e.useGlobalHandlers??!1,onunhandledrejection:e.useGlobalHandlers??!1})],release:e.release,stackParser:Br,transport:e.transport??an};e.beforeSend&&(t.beforeSend=e.beforeSend);const r=new hn(t),n=new Re;e.initialScope&&n.update(e.initialScope),this.hub=new je(r,n),!0===e.useGlobalHandlers&&He(this.hub)}setCustomTags(e){this.hub.configureScope((t=>{Object.entries(e).forEach((([e,r])=>{t.setTag(e,r)}))}))}setUser(e){this.hub.setUser({id:e})}captureException(e,t){this.debug&&console.error("[Sentry exception]",e,t),this.hub.captureException(e,t)}addBreadcrumb(e,t){this.debug&&console.log("[Sentry Breadcrumb]",e,t),this.hub.addBreadcrumb(e,t)}}async function fn(e,t,r=new Error("Promise timeout exceeded")){let n=-1;const i=new Promise(((e,i)=>{n=window.setTimeout((()=>{i(r)}),t)})),o=await Promise.race([i,e()]);return window.clearTimeout(n),o}const mn=(e,t)=>Math.min(200*Math.pow(2,e-1)+Math.floor(1e3*Math.random()),t);class gn extends Error{constructor(e,t,r){super(`Request timeout exceeded (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestTimeoutError",Object.setPrototypeOf(this,gn.prototype)}}class vn extends Error{constructor(e,t,r){super(`Invalid JSON received (status=${t}; url=${e})`),this.originalErrorMessage=r,this.name="HttpRequestInvalidJsonError",Object.setPrototypeOf(this,vn.prototype)}}class yn extends Error{constructor(e,t,r){super(`Network error during request (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestNetworkError",Object.setPrototypeOf(this,yn.prototype)}}function En(e,t){return{body:e,status:t.status,statusText:t.statusText}}function _n(e){const t=new Headers([["Accept","application/json"],["Content-Type","application/json; charset=utf-8"]]);for(const r in e){const n=e[r];void 0!==n&&t.set(r,n)}return t}async function bn(e,t,r=1,n=Date.now()){const i=Date.now()-n,{body:o,headers:a={},credentials:s="include",mode:c="cors",timeoutMs:u=1e4,maxAttempts:l=3,maxBackoffMs:d=32e3}=t;let h=null;void 0!==window.AbortController&&null!==window.AbortController&&(h=new window.AbortController);const p={...t,body:null!=o?JSON.stringify(o):null,credentials:s,headers:_n(a),mode:c,signal:h?h.signal:null};try{const t=await fn(window.fetch.bind(null,e,p),u,new gn(r,i,e));return await async function(e,t){let r={};const n=e.status;if(!(n<500))return En(r,e);{let i;try{return 204!==n&&(r=await e.json()),En(r,e)}catch(r){if(r instanceof Error){const n=r.toString();try{i=await e.text(),i=`${i} ${n}`}catch{i=n}throw new vn(t,e.status,i)}throw new vn(t,e.status,JSON.stringify(r))}}}(t,e)}catch(o){if(o instanceof gn)h?.abort();else{if(o instanceof vn)throw o;if(r===l)throw new yn(r,i,e)}if(r===l)throw o;const a=mn(r,d);return new Promise((i=>{setTimeout((()=>{i(bn(e,t,r+1,n))}),a)}))}}const Sn=function(e,t){return bn(e,{...t,method:"POST"})};var Cn,In,On,wn,Tn,An,Pn,Dn,Nn,Rn,xn,kn,Ln,Mn,jn,Un=null!=="production"?"production":"development",Hn="local",Fn={get ANALYTICS_CLIENT_VERSION(){},get API_PROTOCOL(){return"https://"},get API_PUBLIC_HOST(){switch(Un){case"production":return"squareup.com";case"sandbox":return"squareupsandbox.com";default:return"squareupstaging.com"}},get API_URL(){return"".concat(this.API_PROTOCOL).concat(this.PCI_CONNECT_API_HOST)},get ASSET_BASE_URL(){return function(e){switch(e){case"production":return"https://web.squarecdn.com";case"sandbox":return"https://sandbox.web.squarecdn.com";case"development":return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}(Un)},get ASSET_URL(){return this.VERSION===Hn?this.ASSET_BASE_URL:"".concat(this.ASSET_BASE_URL,"/").concat(this.VERSION)},get BANK_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/bank-nonce")},get CARD_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/card-nonce")},get CONNECT_API_URL(){return"https://connect.".concat(this.API_PUBLIC_HOST)},get CREATE_OAUTH_PLAID_LINK_SESSION_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/plaid/oauth-link-session")},get ENABLE_ERROR_LOGGING(){return"development"!==Un},get GET_PRODUCT_INFORMATION_ENDPOINT(){return"".concat(this.API_URL,"/v2/tokenization/product-information")},get GIFT_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/gift-card-element-iframe.html")},get GOOGLE_PAY_GENERATE_TOKEN_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/google-pay/token")},get HYDRATION_ENDPOINT(){return"".concat(this.API_URL,"/payments/hydrate")},get IFRAME_SRC(){return"".concat(this.ASSET_URL,"/main-iframe.html")},get INITIALIZE_THREE_DS_METHOD_ENDPOINT(){return"".concat(this.API_URL,"/v2/analytics/three-ds-method")},get INSTANT_WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/instant-wallet-nonce")},get METRICS_URL(){return"".concat(this.API_URL,"/payments/mtx")},get METRICS_V2_URL(){return"".concat(this.API_URL,"/payments/mtx/v2")},get PCI_CONNECT_API_HOST(){return"pci-connect.".concat(this.API_PUBLIC_HOST)},get SENTRY_DSN(){switch(Un){case"test":case"development":return"https://acacaeaccacacacabcaacdacdacadaca@sentry.io/000001";default:return"https://565ee38bb5ff45dabc25ab6d7b8bebe3@o160250.ingest.sentry.io/3478832"}},get SINGLE_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/single-card-element-iframe.html")},get SINGLE_CARD_WRAPPER_STYLES(){return"".concat(this.ASSET_URL,"/card-wrapper.css")},THREE_DS_AUTHENTICATE_ENDPOINT(e){return"".concat(this.VERIFICATION_ENDPOINT,"/").concat(e,"/three-ds-authentication")},get VERIFICATION_ENDPOINT(){return"".concat(this.API_URL,"/v2/analytics/verifications")},VERIFICATION_UPDATE_ENDPOINT(e){return"".concat(this.VERIFICATION_ENDPOINT,"/").concat(e)},get VERSION(){return null!=="1.81.0"?"1.81.0":Hn},env:Un,staticAsset(e){return"".concat(this.ASSET_URL,"/static-assets/").concat(e)}},Bn=(r(7156),r(6460),r(8370),r(9170),r(1152),r(4237),r(1257),r(1505),r(8304),r(7680),Object.freeze({SHIPPING_CONTACT_CHANGED:"shippingcontactchanged",SHIPPING_OPTION_CHANGED:"shippingoptionchanged"})),qn=Object.freeze({AFTERPAY_SHIPPING_ADDRESS_CHANGED:"afterpay_shippingaddresschanged",AFTERPAY_SHIPPING_OPTION_CHANGED:"afterpay_shippingoptionchanged"}),Vn=Object.freeze({ACH:"ACH",AFTERPAY_CLEARPAY:"AfterpayClearpay",APPLE_PAY:"Apple Pay",CARD:"Card",CASH_APP_PAY:"Cash App Pay",GIFT_CARD:"Gift Card",GOOGLE_PAY:"Google Pay"}),Gn="Cancel",zn="Error",$n="Invalid",Yn="OK";class Wn extends Error{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown Error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e;t.length>0&&(r=function(e,t){return"".concat(e,"\n  ").concat(t.map((e=>{switch(!0){case"message"in e:return e.message;case"detail"in e:return e.detail;default:return"[Unspecified Error]"}})).join("\n  "))}(e,t)),super(r),this.errors=t,this.name="SqError",Object.setPrototypeOf(this,Wn.prototype)}fromSerializedError(e){this.name=e.name,this.message=e.message,e.errors&&(this.errors=e.errors)}}class Kn extends Wn{constructor(){super("Tokenization has failed. `accountHolderName` is a required option when calling ach.tokenize()"),this.name="PlaidMissingNameError",Object.setPrototypeOf(this,Kn.prototype)}}class Jn extends Wn{constructor(){super("You cannot call `tokenize` when using an `onTokenize` callback"),this.name="AfterpayOnTokenizeListenerError",Object.setPrototypeOf(this,Jn.prototype)}}class Xn extends Wn{constructor(e,t){super("This instance of ".concat(e," is missing the ").concat(t," listener.")),this.name="PaymentMethodMissingListener",Object.setPrototypeOf(this,Xn.prototype)}}class Zn extends Wn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("The payment request used for Afterpay/Clearpay caused a failure",e),this.errors=e,this.name="AfterpayRequestError",Object.setPrototypeOf(this,Zn.prototype)}}class Qn extends Wn{constructor(){super("The amount is outside of the merchant's Afterpay payment limits."),this.name="AfterpayAmountOutsideLimitsError",Object.setPrototypeOf(this,Qn.prototype)}}class ei extends Wn{constructor(){super("The currency provided is not supported for use with Afterpay/Clearpay"),this.name="AfterpayUnsupportedCurrencyError",Object.setPrototypeOf(this,ei.prototype)}}class ti extends Wn{constructor(){super("Afterpay/Clearpay is not enabled for this merchant."),this.name="AfterpayMerchantError",Object.setPrototypeOf(this,ti.prototype)}}class ri extends Wn{constructor(e){super(e),this.name="AfterpayInvalidPaymentRequestError",Object.setPrototypeOf(this,ri.prototype)}}class ni extends Wn{constructor(e){super("An issue occurred while verifying the buyer",[e]),this.name="VerifyBuyerError",Object.setPrototypeOf(this,ni.prototype)}toJSON(){return{errors:this.errors.map((e=>{var t={};return["name","message","type","code","token"].forEach((function(r){r in e&&(t[r]=e[r])})),t})),name:this.name}}}function ii(e){return"type"in e&&"message"in e}class oi extends Wn{constructor(e){var t=e instanceof HTMLElement?e.nodeName:e;super("The element ".concat(t," was not found")),this.name="ElementNotFoundError",Object.setPrototypeOf(this,oi.prototype)}}class ai extends Wn{constructor(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).concat(e);super("Please ensure you call payments.paymentRequest (https://developer.squareup.com/reference/sdks/web/payments#Payments.paymentRequest) with the appropriate options.\n".concat(t.join("\n"))),this.name="InvalidPaymentRequestError",Object.setPrototypeOf(this,ai.prototype)}}class si extends Wn{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(e)),this.name="InvalidPaymentRequestUpdateError",Object.setPrototypeOf(this,si.prototype)}}class ci extends Wn{constructor(e,t){super("The callback provided to the event listener ".concat(e," threw an error with message: ").concat(t)),this.name="InvalidEventListenerCallbackError",Object.setPrototypeOf(this,ci.prototype)}}class ui extends Wn{constructor(e){super("option: '".concat(e,"'")),this.name="InvalidOptionError",Object.setPrototypeOf(this,ui.prototype)}}!function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.POSTAL_CODE_CHANGED="postalCodeChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(Cn||(Cn={})),function(e){e.CARD_NUMBER="cardNumber",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.POSTAL_CODE="postalCode"}(In||(In={})),function(e){e.CARD_INPUT="input",e.CARD_INPUT_FOCUS="input.is-focus",e.CARD_INPUT_PLACEHOLDER="input::placeholder",e.CARD_INPUT_FOCUS_PLACEHOLDER="input.is-focus::placeholder",e.CARD_INPUT_ERROR="input.is-error",e.CARD_INPUT_ERROR_PLACEHOLDER="input.is-error::placeholder",e.CARD_COMPONENT=".input-container",e.CARD_COMPONENT_FOCUS=".input-container.is-focus",e.CARD_COMPONENT_ERROR=".input-container.is-error",e.CARD_INPUT_HELPER_TEXT=".message-text",e.CARD_INPUT_HELPER_ICON=".message-icon",e.CARD_INPUT_ERROR_TEXT=".message-text.is-error",e.CARD_INPUT_ERROR_ICON=".message-icon.is-error"}(On||(On={})),function(e){e.GIFT_CARD_NUMBER="giftCardNumber"}(wn||(wn={})),function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(Tn||(Tn={})),function(e){e.UNKNOWN="Unknown"}(An||(An={})),function(e){e.GIFT="Gift"}(Pn||(Pn={}));class li extends Wn{constructor(e){super("".concat(e," is not a valid field name. Valid field names are ").concat([...Object.values(In),...Object.values(wn)].join(", "))),this.name="InvalidFieldNameError",Object.setPrototypeOf(this,li.prototype)}}class di extends Wn{constructor(e){super("Configuration property '".concat(e,"' is invalid")),this.name="InvalidConfigurationPropertyError",Object.setPrototypeOf(this,di.prototype)}}class hi extends Wn{constructor(e,t,r){super("Configuration property '".concat(e,"' has an invalid value '").concat(t,"'.").concat(void 0!==r?" ".concat(r,"."):"")),this.name="InvalidConfigurationValueError",Object.setPrototypeOf(this,hi.prototype)}}class pi extends Wn{constructor(e){var t=e.map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldTypes",Object.setPrototypeOf(this,pi.prototype)}}class fi extends Wn{constructor(e){var t=e.map((e=>{var[t,r]=e;return'accepted property: "'.concat(t,'" values are "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldValues",Object.setPrototypeOf(this,fi.prototype)}}class mi extends Wn{constructor(e){super(e),this.name="CashAppPayInvalidPaymentRequestError",Object.setPrototypeOf(this,mi.prototype)}}class gi extends Wn{constructor(){super("A redirect url is always required for requests. This must also be a secure link."),this.name="CashAppPayMissingRedirectUrlError",Object.setPrototypeOf(this,gi.prototype)}}class vi extends Wn{constructor(){super("Non function passed as shouldTokenize checker"),this.name="CashAppPayInvalidShouldTokenizeError",Object.setPrototypeOf(this,vi.prototype)}}class yi extends Wn{constructor(e,t){super("amount '".concat(e,"' in ").concat(t," is not expressed in a valid format")),this.name="InvalidCurrencyFormatError",Object.setPrototypeOf(this,yi.prototype)}}class Ei extends Wn{constructor(){super("Web Payments SDK does not support this browser"),this.name="BrowserNotSupportedError",Object.setPrototypeOf(this,Ei.prototype)}}class _i extends Wn{constructor(){super("Web Payments SDK can only be embedded on sites that use HTTPS and have a secure context"),this.name="WebSdkEmbedError",Object.setPrototypeOf(this,_i.prototype)}}class bi extends Wn{constructor(e,t){var r=null!=t?t:null==e?void 0:e.field;super("Method unsupported: ".concat(null==e?void 0:e.message).concat(void 0!==r?" (field=".concat(r,")"):"")),this.name="PaymentMethodUnsupportedError",Object.setPrototypeOf(this,bi.prototype)}}class Si extends Wn{constructor(e){super("This instance of ".concat(e," has already been attached to the page.")),this.name="PaymentMethodAlreadyAttachedError",Object.setPrototypeOf(this,Si.prototype)}}class Ci extends Wn{constructor(e){super("".concat(e," has not been attached to the page. It must be attached before you can call this method.")),this.name="PaymentMethodNotAttachedError",Object.setPrototypeOf(this,Ci.prototype)}}class Ii extends Wn{constructor(e){super("This instance of ".concat(e," has already been destroyed.")),this.name="PaymentMethodAlreadyDestroyedError",Object.setPrototypeOf(this,Ii.prototype)}}class Oi extends Wn{constructor(e,t){var r=e instanceof HTMLElement?e.nodeName:e;super("The value ".concat(r," is not a valid element type or selector. Only valid elements or selectors referring to ").concat([...t].join(", ")," elements are allowed.")),this.name="InvalidElementTypeError",Object.setPrototypeOf(this,Oi.prototype)}}class wi extends Wn{constructor(e,t){super("An element with one of the following conflicting IDs was found on the page: ".concat(t,". You must change those elements' ID before you can use ").concat(e)),this.name="InvalidElementPresentError",Object.setPrototypeOf(this,wi.prototype)}}class Ti extends Wn{constructor(e){super("Invalid style property '".concat(e,"'.")),this.name="InvalidInputStylePropertyError",Object.setPrototypeOf(this,Ti.prototype)}}class Ai extends Wn{constructor(e,t){super("Invalid style value '".concat(t,"' for property '").concat(e,"'.")),this.name="InvalidInputStyleValueError",Object.setPrototypeOf(this,Ai.prototype)}}class Pi extends Wn{constructor(e){super("Invalid style selector '".concat(e,"'.")),this.name="InvalidInputStyleSelectorError",Object.setPrototypeOf(this,Pi.prototype)}}class Di extends Wn{constructor(e){super("One or more style selectors and/or CSS properties are invalid",e),this.errors=e,this.name="InvalidStylesError",Object.setPrototypeOf(this,Di.prototype)}}class Ni extends Wn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Tokenization has failed",e),this.errors=e,this.name="TokenizationError",Object.setPrototypeOf(this,Ni.prototype)}}class Ri extends Wn{constructor(e){var t="An unexpected error occurred";e&&(t+=" while ".concat(e)),super("".concat(t,".")),this.name="UnexpectedError",Object.setPrototypeOf(this,Ri.prototype)}}!function(e){e.ON_TOKENIZATION="ontokenization",e.CLOSE_OAUTH="CLOSE_OAUTH",e.ERROR="ERROR",e.EXIT="EXIT",e.FAIL_OAUTH="FAIL_OAUTH",e.HANDOFF="HANDOFF",e.MATCHED_SELECT_INSTITUTION="MATCHED_SELECT_INSTITUTION",e.MATCHED_SELECT_VERIFY_METHOD="MATCHED_SELECT_VERIFY_METHOD",e.OPEN="OPEN",e.OPEN_MY_PLAID="OPEN_MY_PLAID",e.OPEN_OAUTH="OPEN_OAUTH",e.SEARCH_INSTITUTION="SEARCH_INSTITUTION",e.SELECT_BRAND="SELECT_BRAND",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.SUBMIT_CREDENTIALS="SUBMIT_CREDENTIALS",e.SUBMIT_MFA="SUBMIT_MFA",e.TRANSITION_VIEW="TRANSITION_VIEW"}(Dn||(Dn={})),function(e){e.BLACK="black",e.MINT="mint",e.GREEN="green"}(Nn||(Nn={})),function(e){e.CheckoutWithAfterpay="checkout_with_afterpay",e.BuyNowWithAfterpay="buy_now_with_afterpay",e.PlaceOrderWithAfterpay="place_order_with_afterpay"}(Rn||(Rn={})),function(e){e.REVIEW_MY_ORDER="review_my_order",e.BUY_NOW="buy_now"}(xn||(xn={})),function(e){e.BLACK_ON_MINT="black-on-mint",e.BLACK_ON_WHITE="black-on-white",e.MINT_ON_BLACK="mint-on-black",e.WHITE_ON_BLACK="white-on-black"}(kn||(kn={})),function(e){e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg"}(Ln||(Ln={})),function(e){e.CIRCLED_INFO_ICON="circled-info-icon",e.CIRCLED_QUESTION_ICON="circled-question-icon",e.LEARN_MORE_TEXT="learn-more-text",e.MORE_INFO_TEXT="more-info-text",e.NONE="none"}(Mn||(Mn={})),function(e){e.MINT="mint",e.WHITE="white"}(jn||(jn={}));var xi,ki,Li,Mi,ji,Ui,Hi,Fi,Bi,qi,Vi,Gi,zi=["CLASSIC","TIMELINE","COLLAPSIBLE","MODAL"],$i=["borderColor","borderRadius","borderWidth"],Yi=["borderColor","borderWidth"],Wi=["color"],Ki=["color"];!function(e){e.UNKNOWN="OTHER_BRAND",e.AMERICAN_EXPRESS="AMERICAN_EXPRESS",e.DINERS_CLUB="DISCOVER_DINERS",e.DISCOVER="DISCOVER",e.JCB="JCB",e.MASTERCARD="MASTERCARD",e.UNION_PAY="CHINA_UNIONPAY",e.VISA="VISA"}(xi||(xi={})),function(e){e.UNKNOWN_CARD_TYPE="UNKNOWN_CARD_TYPE",e.CREDIT="CREDIT",e.DEBIT="DEBIT"}(ki||(ki={})),function(e){e.UNKNOWN_PAYMENT_TYPE="UNKNOWN_PREPAID_TYPE",e.NOT_PREPAID="NOT_PREPAID",e.PREPAID="PREPAID"}(Li||(Li={})),function(e){e.ROUND="round",e.SEMIROUND="semiround"}(Mi||(Mi={})),function(e){e.MEDIUM="medium",e.SMALL="small"}(ji||(ji={})),function(e){e.DARK="dark",e.LIGHT="light"}(Ui||(Ui={})),function(e){e.FULL="full",e.STATIC="static"}(Hi||(Hi={})),function(e){e.ONTOKENIZATION="ontokenization",e.CUSTOMER_INTERACTION="customerInteraction",e.CUSTOMER_DISMISSED="customerDismissed"}(Fi||(Fi={})),function(e){e.DEFAULT="default",e.BLACK="black",e.WHITE="white"}(Bi||(Bi={})),function(e){e.STATIC="static",e.FILL="fill"}(qi||(qi={})),function(e){e.LONG="long",e.SHORT="short"}(Vi||(Vi={})),function(e){e.PAYMENT_METHOD_DESTROYED="PAYMENT_METHOD_DESTROYED",e.SHIPPING_ADDRESS_UNSERVICEABLE="SHIPPING_ADDRESS_UNSERVICEABLE",e.SHIPPING_ADDRESS_INVALID="SHIPPING_ADDRESS_INVALID"}(Gi||(Gi={}));class Ji{constructor(e,t){this.type=e,this.detail=t,this.type=e,this.detail=t}}class Xi extends Wn{constructor(){super("The Payment 'applicationId' option is not in the correct format."),this.name="InvalidApplicationIdError",Object.setPrototypeOf(this,Xi.prototype)}}class Zi extends Wn{constructor(e,t){super("Web Payments SDK was initialized with an application ID created in ".concat(e," however you are currently using ").concat(t,".")),this.name="ApplicationIdEnvironmentMismatchError ",Object.setPrototypeOf(this,Zi.prototype)}}class Qi extends Wn{constructor(){super("The Payment 'locationId' option is not in the correct format."),this.name="InvalidLocationIdError",Object.setPrototypeOf(this,Qi.prototype)}}var eo=new RegExp(/^[\w.-]+$/i),to=new RegExp(/sq0at/i);function ro(e){return Fn.env===e}function no(){return ro("production")}var io=/^_/g,oo=/(?!^)([A-Z])/g,ao=/[\s_]+(?=[A-Za-z])/g;function so(e){return"JPY"===e.toUpperCase()?0:2}var co=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.entries(t).map((e=>{var[t,r]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r))})).join("&");return encodeURI(e)+(r.length>0?"?".concat(r):"")},uo=function(e){return e.replace(/-/,"_")},lo=function(e){return e.replace(io,"-").replace(oo," $1").replace(ao,"-").toLowerCase()},ho=function(e){return Object.values(e)},po=function(e,t){return"".concat(e,": ").concat(t,";")},fo=function(e,t){return t.some((function(t){return e instanceof t}))},mo=function(e){return void 0!==e&&""!==e},go=function(e,t,r){var n=so(t),i=e/Math.pow(10,n);return new Intl.NumberFormat(r,{currency:t,style:"currency"}).format(i)},vo=function(e,t){var r=so(t);return(e/Math.pow(10,r)).toFixed(r)},yo=function(e,t){var r=so(t),n="^(-?[0-9]+)";r>0&&(n="".concat(n,"(?:\\.([0-9]{1,").concat(r,"})[0-9]*)?")),n="".concat(n,"$");var i=e.match(n);if(!i)throw new yi(e,t);var[o,a,s=""]=i;if(0===r)return Number(a);var c="0".repeat(r-s.length);return Number(a+s+c)};class Eo{constructor(e){var t={beforeSend:(e,t)=>{var r;return Fn.ENABLE_ERROR_LOGGING?e:(console.error(e.exception),null!==(r=e.exception)&&void 0!==r&&r.values&&e.exception.values.forEach((e=>{console.error(e)})),null)},dsn:Fn.SENTRY_DSN,environment:Fn.env,release:"web-payments-sdk@".concat(Fn.VERSION),transport:e.transport,useGlobalHandlers:e.useGlobalHandlers};this.browserErrorLogger=new pn(t),this.browserErrorLogger.setCustomTags({applicationId:e.applicationId,applicationUrl:e.applicationUrl,source:e.source,version:Fn.VERSION})}setCustomTags(e){this.browserErrorLogger.setCustomTags(e)}setUser(e){this.browserErrorLogger.setUser(e)}addBreadcrumb(e,t){this.browserErrorLogger.addBreadcrumb(e,t)}captureException(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fo(e,[yn,gn])||(e instanceof vn&&this.browserErrorLogger.addBreadcrumb({category:"invalid json error message",message:e.originalErrorMessage}),this.browserErrorLogger.captureException(e,{captureContext:{tags:t}}))}}var _o={message:"An internal error has occurred. Unable to complete the request.",type:"INTERNAL_SERVER_ERROR"},bo={message:"The requested resource was not found.",type:"NOT_FOUND"},So={message:"The endpoint is currently unavailable.",type:"SERVICE_UNAVAILABLE"},Co={message:"Too many requests in progress.",type:"TOO_MANY_REQUESTS"},Io={message:"Request not authorized.",type:"UNAUTHORIZED"},Oo={message:"An unknown error has occurred",type:"UNKNOWN"};class wo extends Wn{constructor(e){super(e),this.name="InternalError",Object.setPrototypeOf(this,wo.prototype)}}class To extends Wn{constructor(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(e){switch(e){case 401:return Io;case 404:return bo;case 429:return Co;case 500:return _o;case 503:return So;default:return Oo}}(t);super("".concat(i.message," (message=").concat(r,"; url=").concat(e,")"),n),this.name="InternalHttpError",Object.setPrototypeOf(this,To.prototype)}}class Ao extends Wn{constructor(e,t){super("".concat(e," (payment_method=").concat(t,")")),this.name="InternalPaymentMethodError",Object.setPrototypeOf(this,Ao.prototype)}}class Po extends Wn{constructor(e){super(e),this.name="InvalidIframeError",Object.setPrototypeOf(this,Po.prototype)}}class Do extends Wn{constructor(e){super("Received error event from iframe"),this.event=e,this.name="IframeErrorEventError",Object.setPrototypeOf(this,Do.prototype)}}class No extends Wn{constructor(e,t,r){super("Request timeout exceeded (attempts=".concat(e,"; duration=").concat(t,"ms; url=").concat(r,")")),this.name="InternalTimeoutError",Object.setPrototypeOf(this,No.prototype)}}var Ro={message:"An unknown error has occurred",type:"UNKNOWN"},xo={message:"An error occurred while verifying the buyer",type:"VERIFICATION_ERROR"},ko={UNKNOWN:Ro};new Set(["EXPIRED_PLAID_SESSION","INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID","DATABASE_INSIGHTS_VERIFICATION_FAILURE"]);var Lo={INVALID_APPLICATION_ID:{message:"Invalid applicationId",type:"INVALID_APPLICATION_ID"},INVALID_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid",type:"VALIDATION_ERROR"},INVALID_CVV:{field:"cvv",message:"CVV is not valid",type:"VALIDATION_ERROR"},INVALID_EXPIRATION_DATE:{field:"expirationDate",message:"Expiration date is not valid",type:"VALIDATION_ERROR"},INVALID_POSTAL_CODE:{field:"postalCode",message:"Postal code is not valid",type:"VALIDATION_ERROR"},INVALID_SANDBOX_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid for sandbox use. Please use one of the test numbers documented at https://developer.squareup.com/docs/testing/test-values.",type:"VALIDATION_ERROR"},INVALID_STAGING_CARD_NUMBER:{field:"cardNumber",message:"Card number is not allowed in Staging. See: https://go/panfake-ui",type:"VALIDATION_ERROR"},MISSING_APPLICATION_ID:{message:"Missing applicationId",type:"MISSING_APPLICATION_ID"},MISSING_CARD_DATA:{message:"Missing card data",type:"MISSING_CARD_DATA"},UNKNOWN:Ro,UNSUPPORTED_CARD_BRAND:{field:"cardNumber",message:"Card not supported",type:"UNSUPPORTED_CARD_BRAND"}};class Mo extends Wn{constructor(e){super("Internal Validation Error",e),this.errors=e,this.name="InternalValidationError",Object.setPrototypeOf(this,Mo.prototype)}}function jo(e,t){return{field:e,message:"".concat(e," is required and must be a(n) ").concat(t,"."),type:"VALIDATION_ERROR"}}function Uo(){return new Ni([Lo.UNKNOWN])}function Ho(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ho(Object(r),!0).forEach((function(t){Bo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ho(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bo(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qo={HttpRequestInvalidJsonError:vn,HttpRequestNetworkError:yn,HttpRequestTimeoutError:gn,InternalError:wo,InternalHttpError:To,InternalPaymentMethodError:Ao,InternalTimeoutError:No,InternalValidationError:Mo,InvalidIframeError:Po};function Vo(e){return Object.values(qo).some((t=>e instanceof t))}var Go,zo={AfterpayAmountOutsideLimitsError:Qn,AfterpayMerchantError:ti,AfterpayRequestError:Zn,AfterpayUnsupportedCurrencyError:ei,BrowserNotSupportedError:Ei,ElementNotFoundError:oi,InvalidCurrencyFormatError:yi,InvalidElementTypeError:Oi,InvalidEventListenerCallbackError:ci,InvalidOptionError:ui,InvalidPaymentRequestError:ai,InvalidPaymentRequestUpdateError:si,PaymentMethodUnsupportedError:bi,PlaidMissingNameError:Kn,TokenizationError:Ni,UnexpectedError:Ri,VerifyBuyerError:ni,WebSdkEmbedError:_i},$o=Fo(Fo(Fo({},zo),qo),{},{AfterpayInvalidPaymentRequestError:ri,AfterpayOnTokenizeListenerError:Jn,InvalidApplicationIdError:Xi,InvalidInputStylePropertyError:Ti,InvalidInputStyleValueError:Ai,InvalidStylesError:Di,PaymentMethodAlreadyAttachedError:Si,PaymentMethodAlreadyDestroyedError:Ii,PaymentMethodMissingListener:Xn,PaymentMethodNotAttachedError:Ci,SqError:Wn}),Yo=["en","ja","fr","es"],Wo=["en-US","en-IE","en-CA","en-GB","en-AU","ja-JP","fr-FR","fr-CA","es-ES","es-US"];function Ko(e){return Wo.includes(e)}var Jo={"en-AU":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},formTitle:"Secure credit card form",helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}},cardIcon:{brandNames:{JCB:"JCB",americanExpress:"American Express",discover:"Discover",discoverDiners:"Diners Club",masterCard:"Mastercard",squareGiftCardV2:"Square gift card",unionPay:"UnionPay",unknown:"Unknown card",visa:"Visa"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},formTitle:"Secure gift card form",helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},formTitle:"Secure Credit Card Form",helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}},cardIcon:{brandNames:{JCB:"JCB",americanExpress:"American Express",discover:"Discover",discoverDiners:"Diners Club",masterCard:"Mastercard",squareGiftCardV2:"Square gift card",unionPay:"UnionPay",unknown:"Unknown card",visa:"Visa"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},formTitle:"Secure Gift Card Form",helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-GB":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},formTitle:"Secure card form",helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}},cardIcon:{brandNames:{JCB:"JCB",americanExpress:"American Express",discover:"Discover",discoverDiners:"Diners Club",masterCard:"Mastercard",squareGiftCardV2:"Square Gift Card",unionPay:"UnionPay",unknown:"Unknown card",visa:"Visa"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},formTitle:"Secure gift card form",helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-IE":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiry date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},formTitle:"Secure card form",helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiry date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}},cardIcon:{brandNames:{JCB:"JCB",americanExpress:"American Express",discover:"Discover",discoverDiners:"Diners Club",masterCard:"Mastercard",squareGiftCardV2:"Square Gift Card",unionPay:"UnionPay",unknown:"Unknown card",visa:"Visa"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},formTitle:"Secure gift card form",helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-US":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},formTitle:"Secure Credit Card Form",helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},cardIcon:{brandNames:{visa:"Visa",masterCard:"Mastercard",americanExpress:"American Express",discover:"Discover",discoverDiners:"Diners Club",JCB:"JCB",unionPay:"UnionPay",squareGiftCardV2:"Square gift card",unknown:"Unknown card"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},formTitle:"Secure Gift Card Form",helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"es-ES":{paymentMethods:{afterpay:{checkoutWidget:{title:"Tus 4 pagos sin intereses",today:"Hoy",weeks:"semanas"}},cards:{errors:{cardNumberError:"Introduce un número de tarjeta válido.",cvvError:"Introduce un código de seguridad válido.",expirationDateError:"Introduce una fecha de caducidad válida.",multipleErrors:"Corrige los errores resaltados.",postalCodeErrors:{CA:"Introduce un código postal válido.",GB:"Introduce un código postal válido.",US:"Introduce un código postal válido."}},formTitle:"Formulario seguro para tarjetas de crédito",helperText:{cardNumber:"Introduce tu número de tarjeta",cvv:"Introduce el código de seguridad",expirationDate:"Introduce la fecha de caducidad",postalCodes:{CA:"Introduce el código postal",GB:"Introduce el código postal",US:"Introduce el código postal"}},inputFieldTitles:{cardNumber:"Número de la tarjeta de crédito",cvv:"Código CVV",expirationDate:"Fecha de vencimiento",postalCodes:{CA:"Código postal",GB:"Código postal",US:"Código postal"}},placeholderText:{cardNumber:"Número de tarjeta",cvv:"Código CVV",expirationDate:"MM/AA",postalCodes:{CA:"Código postal",GB:"Código postal",US:"C.P."}},cardIcon:{brandNames:{JCB:"JCB",americanExpress:"American Express",discover:"Discover",discoverDiners:"Diners Club",masterCard:"Mastercard",squareGiftCardV2:"Tarjeta regalo de Square",unionPay:"UnionPay",unknown:"Tarjeta desconocida",visa:"Visa"}}},giftCards:{errors:{giftCardNumberError:"Introduce un número de tarjeta de regalo válido."},formTitle:"Formulario seguro para tarjetas regalo",helperText:{giftCardNumber:"Introduce el número de tu tarjeta de regalo"},inputFieldTitles:{giftCardNumber:"Número de la tarjeta regalo"},placeholderText:{giftCardNumber:"Tarjeta de regalo"}},wallets:{callbackErrors:{contactError:"Se ha producido un error al procesar el contacto de envío que has seleccionado. Inténtalo de nuevo.",optionsError:"Se ha producido un error al procesar la opción de envío que has seleccionado. Inténtalo de nuevo."}}}},"es-US":{paymentMethods:{afterpay:{checkoutWidget:{title:"Tus pagos de 4 cuotas sin interés",today:"Hoy",weeks:"semanas"}},cards:{errors:{cardNumberError:"Introduce un número de tarjeta válido.",cvvError:"Ingresa un código de seguridad válido.",expirationDateError:"Ingresar una fecha de vencimiento válida.",multipleErrors:"Arregla los errores resaltados.",postalCodeErrors:{CA:"Introduce un código postal válido.",GB:"Introduce un código postal válido.",US:"Introduce un código zip válido."}},formTitle:"Formulario seguro para tarjetas de crédito",helperText:{cardNumber:"Ingresa el número de la tarjeta",cvv:"Ingresa el código de seguridad",expirationDate:"Ingresa la fecha de vencimiento",postalCodes:{CA:"Ingresa el código postal",GB:"Ingresa el código postal",US:"Ingresar el código ZIP"}},inputFieldTitles:{cardNumber:"Número de la tarjeta de crédito",cvv:"CVV",expirationDate:"Fecha de vencimiento",postalCodes:{CA:"Código postal",GB:"Código postal",US:"Código ZIP"}},placeholderText:{cardNumber:"Número de tarjeta",cvv:"CVV",expirationDate:"MM/AA",postalCodes:{CA:"Código postal",GB:"Código postal",US:"ZIP"}},cardIcon:{brandNames:{JCB:"JCB",americanExpress:"American Express",discover:"Descubre",discoverDiners:"Diners Club",masterCard:"Mastercard",squareGiftCardV2:"Tarjeta de regalo Square",unionPay:"UnionPay",unknown:"Tarjeta desconocida",visa:"Visa"}}},giftCards:{errors:{giftCardNumberError:"Ingresa un número válido de tarjeta de regalo."},formTitle:"Formulario seguro para tarjetas de regalo",helperText:{giftCardNumber:"Ingresar el número de la tarjeta de regalo"},inputFieldTitles:{giftCardNumber:"Número de la tarjeta de regalo"},placeholderText:{giftCardNumber:"Tarjeta de regalo"}},wallets:{callbackErrors:{contactError:"Ocurrió un error al procesar el contacto de envío seleccionado. Vuelve a intentarlo.",optionsError:"Ocurrió un error al procesar la opción de envío seleccionada. Vuelve a intentarlo."}}}},"fr-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide.",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Veuillez saisir une date d’expiration valide.",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide.",GB:"Saisissez un code postal valide.",US:"Saisissez un code postal valide."}},formTitle:"Formulaire de carte de crédit sécurisé",helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir le code postal",GB:"Saisir le code postal",US:"Saisir le code postal"}},inputFieldTitles:{cardNumber:"Numéro de carte bancaire",cvv:"CVV",expirationDate:"Date d’expiration",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}},placeholderText:{cardNumber:"Numéro de la carte",cvv:"CVV",expirationDate:"MM/AA",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}},cardIcon:{brandNames:{JCB:"JCB",americanExpress:"American Express",discover:"Discover",discoverDiners:"Diners Club",masterCard:"Mastercard",squareGiftCardV2:"Carte cadeau Square",unionPay:"UnionPay",unknown:"Carte inconnue",visa:"Visa"}}},giftCards:{errors:{giftCardNumberError:"Saisissez un numéro de carte cadeau valide."},formTitle:"Formulaire de carte cadeau sécurisé",helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},inputFieldTitles:{giftCardNumber:"Numéro de carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"fr-FR":{paymentMethods:{afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Saisir une date d’expiration valide",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide",GB:"Saisissez un code postal valide",US:"Saisissez un code ZIP valide"}},formTitle:"Formulaire de carte bancaire sécurisé",helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir un code postal",GB:"Saisir un code postal",US:"Saisir un code ZIP"}},inputFieldTitles:{cardNumber:"Numéro de carte bancaire",cvv:"CVV",expirationDate:"Date d’expiration",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}},placeholderText:{cardNumber:"Numéro de carte",expirationDate:"MM/AA",cvv:"CVV",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code ZIP"}},cardIcon:{brandNames:{JCB:"JCB",americanExpress:"American Express",discover:"Discover",discoverDiners:"Diners Club",masterCard:"Mastercard",squareGiftCardV2:"Carte cadeau Square",unionPay:"UnionPay",unknown:"Carte inconnue",visa:"Visa"}}},giftCards:{errors:{giftCardNumberError:"Saisir un numéro de carte cadeau valide"},formTitle:"Formulaire de carte cadeau sécurisé",helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},inputFieldTitles:{giftCardNumber:"Numéro de carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"ja-JP":{paymentMethods:{afterpay:{checkoutWidget:{title:"無利息の4回払い",today:"今日",weeks:"週間"}},cards:{errors:{cardNumberError:"正しいカード番号を入力してください。",cvvError:"有効なセキュリティコードを入力してください。",expirationDateError:"正しい有効期限を入力してください。",multipleErrors:"強調表示されたエラーを修正してください。",postalCodeErrors:{CA:"正しい郵便番号を入力してください。",GB:"有効な郵便番号を入力してください。",US:"正しいZIPコードを入力してください。"}},formTitle:"セキュアクレジットカードフォーム",helperText:{cardNumber:"カード番号を入力してください",cvv:"セキュリティコードを入力してください",expirationDate:"有効期限を入力してください",postalCodes:{CA:"郵便番号を入力してください",GB:"郵便番号を入力してください",US:"ZIPコードを入力してください"}},inputFieldTitles:{cardNumber:"クレジットカード番号",cvv:"CVV",expirationDate:"有効期限",postalCodes:{CA:"郵便番号",GB:"郵便番号",US:"ZIPコード"}},placeholderText:{cardNumber:"カード番号",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"郵便番号",GB:"郵便番号",US:"ZIP"}},cardIcon:{brandNames:{JCB:"JCB",americanExpress:"American Express",discover:"Discover",discoverDiners:"Diners Club",masterCard:"Mastercard",squareGiftCardV2:"Square ギフトカード",unionPay:"UnionPay",unknown:"不明なカード",visa:"Visa"}}},giftCards:{errors:{giftCardNumberError:"有効なギフトカード番号を入力してください。"},formTitle:"セキュアギフトカードフォーム",helperText:{giftCardNumber:"ギフトカード番号を入力してください"},inputFieldTitles:{giftCardNumber:"ギフトカード番号"},placeholderText:{giftCardNumber:"ギフトカード"}},wallets:{callbackErrors:{contactError:"選択された配送住所を処理する際にエラーが発生しました。もう一度やり直してください。",optionsError:"選択された配送方法を処理する際にエラーが発生しました。もう一度やり直してください。"}}}}},Xo={en:"en-US",es:"es-ES",fr:"fr-FR",ja:"ja-JP"};class Zo{constructor(e){this.currentLocale="en-US",this.setLocale(e)}setLocale(e){var[t,r]=e.split("-"),n=this.currentLocale;return Ko(e)?(this.currentLocale=e,{newLocale:this.currentLocale,previousLocale:n}):function(e){return Yo.includes(e)}(t)?(this.currentLocale=Xo[t],{message:"Locale ".concat(e," is not supported. Language ").concat(t," is supported, but region ").concat(r," is not. Falling back to ").concat(this.currentLocale,"."),newLocale:this.currentLocale,previousLocale:n}):{message:"Locale ".concat(e," is not supported. Language ").concat(t," and region ").concat(r," are both unsupported."),newLocale:this.currentLocale,previousLocale:n}}getCurrentLocale(){return this.currentLocale}getLocaleString(){return Jo[this.currentLocale]}}function Qo(e){return"[object Object]"===Object.prototype.toString.call(e)}function ea(e){return"object"==typeof e&&null!==e}var ta="INVALID_VALUE",ra="SANITIZED",na=new Set(["countryCode","currencyCode","requestBillingContact","requestShippingContact","lineItems","total","shippingOptions","shippingContact"]),ia=new Set(["error","shippingErrors","lineItems","total","shippingOptions","taxLineItems","shippingLineItems","discounts"]),oa=new Set([...ia.values(),"eventName"]),aa=new Set(["accountHolderName","amount","bankAccountId","currency","total"]),sa=new Set([...aa.values(),"intent","cadence","startDate"]),ca=new Set(["amount","currencyCode","total","billingContact"]),ua=new Set([...ca.values(),"intent","customerInitiated","sellerKeyedIn"]),la=new Set(["includeInputLabels","postalCode","style"]),da=new Set(["includeInputLabels","style"]),ha=new Set(["lineItems","total","shippingOptions","shippingContact"]),pa=new Set(["buttonColor","buttonSizeMode","buttonType"]),fa=new Set(["shape","size","values","theme","width"]),ma=Na(Dn),ga=Na(Cn),va=Na(Tn),ya=Na(Bn),Ea=Na(In),_a=Na(wn),ba=Na(Bi),Sa=Na(qi),Ca=Na(Vi),Ia=Na(ji),Oa=Na(Mi),wa=Na(Ui),Ta=Na(Hi),Aa=new Set(["shippingOption"]),Pa=new Set([...Aa.values(),"error"]),Da=new Set(["checkoutWidgetLaunch","locale","selectorOrElement"]);function Na(e){return new Set(Object.values(e))}function Ra(e){return JSON.stringify({value:e})}function xa(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Qo(e)){var a={};return Object.entries(e).forEach((e=>{var[r,s]=e;if(t.has(r)){var c=s;n.has(r)?c=ra:r in i&&(c=i[r].has(s)?s:ta),a[r]=c}else o&&(a[r]=ra)})),JSON.stringify(a)}return"invalid non-struct type: ".concat("object"!=typeof(r=e)?typeof r:Array.isArray(r)?"array":null===r?"null":Object.prototype.toString.call(r))}var ka=function(e,t,r){switch(e){case"TOKENIZE_CONFIGURED":return function(e,t){switch(e){case"ACH":return function(e){return xa(e,sa,aa)}(t);case"Card":return function(e){var{verificationDetails:t={},cofToken:r}=e,n=xa(t,ua,ca,void 0,!0),i={verificationDetails:JSON.parse(n)};return void 0!==r&&(i.cofToken=function(e){return"string"==typeof e&&e.startsWith("ccof:")?ra:ta}(r)),JSON.stringify(i)}(t)}return ta}(t,r);case"CONFIGURED":case"CONFIG_UPDATED":return function(e,t){switch(e){case"Card":case"Gift Card":return function(e,t){return xa(t,"Card"===e?la:da)}(e,t);case"Google Pay":return function(e){return xa(e,pa,void 0,{buttonColor:ba,buttonSizeMode:Sa,buttonType:Ca})}(t);case"Payment Request":return function(e){return xa(e,na,ha)}(t);case"Cash App Pay V1":return function(e){return xa(e,fa,void 0,{shape:Oa,size:Ia,theme:wa,values:wa,width:Ta})}(t)}return ta}(t,r);case"FOCUSED":return Ra(function(e,t){if("string"!=typeof t)return ta;switch(e){case"Card":if(Ea.has(t))return t;break;case"Gift Card":if(_a.has(t))return t}return ta}(t,r));case"SET_LOCALE":return Ra(function(e){return"string"!=typeof e?ta:Ko(e)?e:ta}(r));case"EVENT_LISTENER_ADDED":return Ra(function(e,t){if("string"!=typeof t)return ta;switch(e){case"ACH":if(ma.has(t))return t;break;case"Card":if(ga.has(t))return t;break;case"Gift Card":if(va.has(t))return t;break;case"Payment Request":if(ya.has(t))return t}return ta}(t,r));case"EVENT_LISTENER_ON_COMPLETE_RESPONSE":return function(e,t){return"Payment Request"===e?function(e){return xa(e,oa,ia,{eventName:ya})}(t):ta}(t,r);case"SHIPPING_OPTION_UPDATE_RECEIVED":return xa(r,Pa,Aa,void 0,!0);case"AFTERPAY_CHECKOUT_WIDGET_CONFIGURED":return xa(r,Da);default:return""}};function La(e,t){return void 0!==e.document.body&&null!==e.document.createNodeIterator(e.document.body,NodeFilter.SHOW_ELEMENT,{acceptNode:t}).nextNode()}function Ma(e,t){return Boolean(e.querySelector(t))}r(3249);var ja=function(e){var t,r=void 0!==e.angular,n=Ma(e.document,"[ng-version]")||void 0!==e.getAllAngularRootElements||void 0!==e.getAngularVersion,i=void 0!==e.bootstrap,o=void 0!==e.Ember,a=void 0!==e.jQuery,s=Ma(e.document,'form[action*="paypal.com"]'),c=function(e){return La(e,(function(e){return"__k"in e||"_component"in e||"__c"in e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),u=function(e){var t=Ma(e.document,"*[data-reactroot]");if(t)return t;return La(e,(function(e){return"_reactRootContainer"in e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),l=function(e){var t=void 0!==e.__NUXT__||void 0!==e.$nuxt,r=void 0!==e.__VUE__;if(r||t)return r||t;return La(e,(function(e){return"__vue__"in e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),d={angular:n,angularJS:r,bootstrap:i,ember:o,jquery:a,nextJS:void 0!==(null===(t=e.__NEXT_DATA__)||void 0===t?void 0:t.buildId),paypalBuyNow:s,preact:c,react:u,vue:l};return Object.fromEntries(Object.entries(d).filter((e=>{var[t,r]=e;return r})))},Ua=new Set(["AFTERPAY_CHECKOUT_WIDGET_CONFIGURED","CLEAR","CONFIG_UPDATED","CONFIGURED","DESTROYED","DETACHED","EVENT_LISTENER_ADDED","EVENT_LISTENER_ON_COMPLETE_RESPONSE","FOCUSED","RECALCULATED_SIZE","SET_LOCALE","SET_ERROR","SHIPPING_OPTION_UPDATE_RECEIVED","TOKENIZE_CONFIGURED"]),Ha=new Set(["PAYMENTS_REUSE","PAYMENTS_ENV_METADATA","DEVELOPER_ERROR","DEVELOPER_ERROR_PENDING","REQUEST_AFTERPAY_INVALID"]),Fa=new Set(["GET_PRODUCT_INFORMATION","LOAD","MAIN_IFRAME","NONCE"]),Ba={ATTACH:!0,BUILD:!0,EXTERNAL_SESSION:!0,INITIALIZATION:!1,PROOF_OF_WORK:!1};function qa(e){return e in Ba}var Va=/[$()*+.?[\\\]^{|}]/g,Ga=new RegExp(Va.source),za=function(e){return Ga.test(e)?e.replace(Va,"\\$&"):e},$a={CARD_NONCE_ENDPOINT:new RegExp(za(Fn.CARD_NONCE_ENDPOINT)),GET_PRODUCT_INFORMATION_ENDPOINT:new RegExp(za(Fn.GET_PRODUCT_INFORMATION_ENDPOINT)),LIBRARY_RESOURCE:new RegExp("".concat(za(Fn.ASSET_BASE_URL),"/([\\w\\d.-]*/)?square\\.js")),MAIN_IFRAME_RESOURCE:new RegExp("".concat(za(Fn.ASSET_URL),"/main-iframe"))};function Ya(e,t){if(!c.supportsPerformanceEntries)return null;var r=c.windowPerformance,n=function(e,t,r){var n=e.filter((e=>e.initiatorType===t&&r.test(e.name)));return n[n.length-1]}([...r.getEntriesByType("resource"),...r.getEntriesByType("navigation")],e,t);return n?Math.round(function(e){return e.duration>0?e.duration:Math.max(Math.trunc(e.responseEnd-e.startTime),0)}(n)):null}var Wa=function(e){switch(e){case"GET_PRODUCT_INFORMATION":return Ya("fetch",$a.GET_PRODUCT_INFORMATION_ENDPOINT);case"MAIN_IFRAME":return Ya("navigation",$a.MAIN_IFRAME_RESOURCE);case"LOAD":return Ya("script",$a.LIBRARY_RESOURCE);case"NONCE":return Ya("fetch",$a.CARD_NONCE_ENDPOINT);default:return null}};function Ka(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ja(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ka(Object(r),!0).forEach((function(t){Xa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ka(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xa(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Za=Fn.METRICS_URL,Qa=Fn.METRICS_V2_URL;function es(e){return t=e.event,Ua.has(t);var t}function ts(e){return t=e.event,Ha.has(t);var t}function rs(e){return!es(e)&&!ts(e)}class ns{constructor(e,t){this.logVisibilityEvent=()=>{var e={event:"visible"===c.documentVisibilityState?"VISIBILITY:VISIBLE":"VISIBILITY:HIDDEN",eventSource:"WebSDK"},t=this.getMetricsLoggerBody(e,this.session.instanceId,this.session.sessionId,this.session.paymentMethodTrackingId);this.metricsBuffer.push(t)},this.flushAllMetrics=()=>{"hidden"===c.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)},this.sdkVersion=Fn.VERSION,this.jsFramework="",this.applicationData=t,this.manualTelemetryStarts={},this.metricsBuffer=[],this.errorLogger=e,this.disableBeacon=!1}setAvt(e){this.avt=e}setFeatureFlagValues(e){this.featureFlagValues=e}logEvent(e,t,r,n){try{var i=this.getMetricsLoggerBody(e,t,r,n);if(this.session=i.session,this.disableBeacon||!c.supportsSendBeacon||!c.supportsDocumentVisibilityState)return void Sn(Za,{body:i}).catch((e=>{this.errorLogger.captureException(e)}));this.metricsBuffer.push(i),"NONCE:OK"!==e.event&&"DESTROYED"!==e.event||this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",this.logVisibilityEvent),document.addEventListener("visibilitychange",this.flushAllMetrics),this.currentInterval=window.setInterval((()=>{this.buildAndSendBeacon()}),1e3))}catch(e){this.errorLogger.captureException(e)}}clearEventListener(){document.removeEventListener("visibilitychange",this.logVisibilityEvent),document.removeEventListener("visibilitychange",this.flushAllMetrics)}getJSFrameworkValue(){return 0===this.jsFramework.length&&(this.jsFramework=JSON.stringify(ja(window))),this.jsFramework}eventDuration(e,t){var r,[n,i]=e.event.split(":");if(qa(n)){var o;if(qa(r=n)&&!Ba[r]?o=n:void 0!==t&&(o="".concat(n,":").concat(t)),void 0===o)return null;if("START"===i){var a=Date.now();return this.manualTelemetryStarts[o]=a,null}if("OK"===i||"ERROR"===i||"CANCEL"===i){if(!(o in this.manualTelemetryStarts))return null;var s=this.manualTelemetryStarts[o];return delete this.manualTelemetryStarts[o],Date.now()-s}}return"START"!==i&&function(e){return Fa.has(e)}(n)?Wa(n):null}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{var e=new Blob([JSON.stringify({metrics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});window.navigator.sendBeacon(Qa,e)}catch(e){(function(e){return e instanceof Error&&"TypeError"===e.name&&(e.message.includes("Not implemented")||e.message.includes("Illegal invocation"))})(e)||this.errorLogger.captureException(e),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),Sn(Qa,{body:{metrics:this.metricsBuffer}}).catch((e=>{this.errorLogger.captureException(e)}))}this.metricsBuffer=[]}}metricsSession(e,t,r){var n=Ja(Ja({},this.applicationData),{},{instanceId:e,sessionId:t});return void 0!==r&&(n.paymentMethodTrackingId=r),n}getMetricsLoggerBody(e,t,r,n){var i=function(){if(c.isTopLevelWindow)return{origin:c.windowLocation.origin,pathname:c.windowLocation.pathname};var e=c.documentReferrer;return e&&0!==e.length?(null!=Go||(Go=document.createElement("a")),Go.href="".concat(e),{origin:Go.origin,pathname:""}):{origin:"",pathname:""}}(),o={innerHeight:c.windowInnerHeight,innerWidth:c.windowInnerWidth,isSecureContext:c.isSecureContext,language:c.windowNavigatorLanguages[0]},a=this.eventDuration(e,n),{event:s,eventSource:u}=e,{sdkVersion:l}=this,d=this.metricsSession(t,r,n),h={appLocation:i,avt:this.avt,browserData:o,event:s,eventSource:u,paymentMethodTrackingId:n,sdkVersion:l,session:d};return es(e)&&void 0!==e.eventConfigurationValues&&(h.eventConfigurationValues=ka(e.event,u,e.eventConfigurationValues)),ts(e)?h.internalConfigurationValues=e.errorMessage:rs(e)&&void 0!==this.featureFlagValues&&(h.internalConfigurationValues=JSON.stringify(this.featureFlagValues)),null!==a&&a>0&&(h.duration=a),rs(e)&&void 0!==e.sloStatus&&(h.sloStatus=e.sloStatus),"INITIALIZATION:OK"===s&&(h.jsFramework=this.getJSFrameworkValue()),h}}r(5372);class is{constructor(e,t){this.errorLogger=e,this.messenger=t}}function os(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}var as="LOCALE_CHANGED_EVENT";class ss extends is{constructor(e,t,r,n,i,o,a,s,c){super(e,t),this.session=n,this.localeStrings=o,this.paymentMethodSupportDetail=i,this.metricsHandler=r,this.eventTarget=a,this.featureFlagValues=s,this.analyticsBackend=c}addLocaleChangedListener(e){this.eventTarget.addEventListener(as,e)}removeLocaleChangedListener(e){this.eventTarget.removeEventListener(as,e)}getSession(){return this.session.serialize()}getFeatureFlagValues(){return this.featureFlagValues}getLocaleString(){return this.localeStrings.getLocaleString()}setLocale(e){var t=this.localeStrings.setLocale(e);if(t.previousLocale===t.newLocale)return t;var r=this.localeStrings.getCurrentLocale();return this.session.setLocale(r),this.eventTarget.dispatchEvent(as,r),this.messenger.sendOneWayMessage("UPDATE_SESSION",{session:this.session.serialize()}),t}updateSession(e){var t,r=this;return(t=function*(){r.session.setSessionId(e),r.errorLogger.setCustomTags({sessionId:e}),yield r.messenger.sendOneWayMessage("UPDATE_SESSION",{session:r.session.serialize()})},function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){os(o,n,i,a,s,"next",e)}function s(e){os(o,n,i,a,s,"throw",e)}a(void 0)}))})()}setPaymentMethodTrackingId(e){this.metricsHandler.setPaymentMethodTrackingId(e)}getPaymentMethodTrackingId(){return this.metricsHandler.getPaymentMethodTrackingId()}}var cs={APPLE_PAY_BROWSER_NOT_SUPPORTED:{message:"Apple Pay is only available on Safari.",type:"BROWSER_NOT_SUPPORTED"},APPLE_PAY_CONSISTENT_DOMAIN_REQUIRED:{message:"Apple Pay should be hosted on the same domain as its top-level frame.",type:"CONSISTENT_DOMAIN_REQUIRED"},APPLE_PAY_DEVICE_NOT_SUPPORTED:{message:"Device does not support Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#prerequisites-and-assumptions",type:"DEVICE_NOT_SUPPORTED"},APPLE_PAY_NOT_REGISTERED:{message:"No active card available in the Apple Wallet or domain not registered.",type:"NOT_REGISTERED"},APPLE_PAY_REQUIRES_SECURE_CONTEXT:{message:"Apple Pay requires a fully secure HTTPS context.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#prerequisites-and-assumptions",type:"IFRAME_NOT_ALLOWED"},GOOGLE_PAY_BROWSER_NOT_SUPPORTED:{message:"Browser does not support Google Pay. \nSee: https://developer.squareup.com/docs/web-payments/google-pay#prerequisites-and-assumptions",type:"BROWSER_NOT_SUPPORTED"},GOOGLE_PAY_REQUIRES_HTTPS:{message:"Google Pay requires HTTPS. \nSee: https://developer.squareup.com/docs/web-payments/google-pay#prerequisites-and-assumptions",type:"BROWSER_NOT_SUPPORTED"},INVALID_CONFIG:{message:"Configuration is invalid.",type:"INVALID_CONFIG"},MISC_THIRD_PARTY_IFRAME_NOT_ALLOWED:{message:"Third-party iframes are not allowed to request payments unless explicitly allowed via Permissions-Policy Configuration.\n    Please configure the relevant permissions policy (via the Permissions-Policy header or <iframe allow...> ) to allow 'payment' in order to enable this functionality.\n    See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy/payment",type:"IFRAME_NOT_ALLOWED"},UNABLE_TO_LOAD:{message:"Temporarily unable to register the payment method.",type:"UNABLE_TO_LOAD"},UNKNOWN:{message:"An unknown error has occurred.",type:"UNKNOWN"}},us=["COUNTRY_NOT_SUPPORTED","APPLICATION_DISABLED","MISSING_LOCATION_ID","UNVERIFIED_DOMAIN","NOT_ONBOARDED","US_AND_UK_MERCHANT_ONLY","US_MERCHANT_ONLY","INTERNAL_ERROR","DOMAIN_NOT_REGISTERED"],ls={APPLICATION_DISABLED:{message:"Wallet is disabled for your application.",type:"APPLICATION_DISABLED"},COUNTRY_NOT_SUPPORTED:{message:"Wallet is not available in this merchant country.",type:"COUNTRY_NOT_SUPPORTED"},DOMAIN_NOT_REGISTERED:{message:"Your website's domain is not registered for use with Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#production-configuration",type:"DOMAIN_NOT_REGISTERED"},INTERNAL_ERROR:{message:"There was a temporary error determining your website's payment method status",type:"INTERNAL_ERROR"},MISSING_LOCATION_ID:{field:"locationId",message:"Missing locationId in the payment request configuration.\nSee: https://developer.squareup.com/reference/sdks/web/payments/objects/Payments",type:"MISSING_LOCATION_ID"},NOT_ONBOARDED:{message:"Your merchant account has not yet been onboarded for this payment method. Please visit the Seller Dashboard to enable the payment method",type:"NOT_ONBOARDED"},UNVERIFIED_DOMAIN:{message:"Your website's domain is not verified for use with Apple Pay. Please visit the Square Developer Dashboard at https://developer.squareup.com/ to register your domain for use with Apple Pay",type:"UNVERIFIED_DOMAIN"},US_AND_UK_MERCHANT_ONLY:{message:"Wallet is available for US and UK merchants only.",type:"US_AND_UK_MERCHANT_ONLY"},US_MERCHANT_ONLY:{message:"Wallet is available for US merchants only.",type:"US_MERCHANT_ONLY"}};class ds extends Wn{constructor(e,t,r){var n="".concat(e," was called with a missing or invalid parameter. '").concat(t,"' is required");n+=" and must be a(n) ".concat(r),super("".concat(n,".")),this.name="InvalidFunctionArgumentError",Object.setPrototypeOf(this,ds.prototype)}}class hs extends Wn{constructor(e){super("One or more of the arguments needed are missing or invalid."),this.argumentErrors=e,this.name="InvalidArgumentsError",Object.setPrototypeOf(this,hs.prototype)}}function ps(e){return e instanceof Error?e:new Error(JSON.stringify(e))}function fs(e){return ps(e).message}var ms=function(e){var t,r=new(null!==(t=$o[e.name])&&void 0!==t?t:Wn);return r.fromSerializedError(e),r},gs=function(e){return{_isSerializedError:!0,errors:e.errors,message:e.message,name:e.name}};class vs{constructor(){this.listeners={}}addEventListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}removeEventListener(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0;n<r.length;n+=1)r[n]===t&&(r.splice(n,1),n-=1)}listenersForType(e){return e in this.listeners?[...this.listeners[e]]:[]}hasEventListener(e){return e in this.listeners&&this.listeners[e].length>0}}class ys{constructor(){this.listenerRegistry=new vs}addEventListener(e,t){this.listenerRegistry.addEventListener(e,t)}removeEventListener(e,t){this.listenerRegistry.removeEventListener(e,t)}dispatchEvent(e,t){var r=new Ji(e,t),n=this.listenerRegistry.listenersForType(e);for(var i of n)try{i(r)}catch(e){console.error(e)}}hasEventListener(e){return this.listenerRegistry.hasEventListener(e)}}var Es=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).slice(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())};class _s{constructor(e,t,r,n){this.metricsLogger=e,this.eventSource=r,this.session=t,this.paymentMethodTrackingId=n}logDeveloperError(e,t,r){var n={operation:t,paymentMethod:r,type:e.name};"errors"in e&&Array.isArray(e.errors)&&(n.errors=e.errors.map((e=>e.type))),e instanceof bi&&(n.message=e.message.replace("Method unsupported: ","")),this.logValidationEvent("DEVELOPER_ERROR",n)}logValidationEvent(e,t){this.logMetricEvent({errorMessage:JSON.stringify(t),event:e,eventSource:this.eventSource})}logConfigurationEvent(e,t){this.logMetricEvent({event:e,eventConfigurationValues:t,eventSource:this.eventSource})}logEvent(e,t){this.logMetricEvent({event:e,eventSource:this.eventSource,sloStatus:t})}setPaymentMethodTrackingId(e){this.paymentMethodTrackingId=e}getPaymentMethodTrackingId(){return this.paymentMethodTrackingId}logMetricEvent(e){return this.metricsLogger.logEvent(e,this.session.instanceId,this.session.sessionId,this.paymentMethodTrackingId)}}function bs(e,t,r){return void 0===e?[{code:"missing_property",expected:r,propertyPath:t}]:[]}function Ss(e,t,r,n){return r(e)?[]:[{code:"invalid_value",expected:n,propertyPath:t}]}function Cs(e,t,r,n){var i=[];i.push((()=>bs(e,t,r))),i.push((()=>function(e,t,r){return typeof e===r?[]:[{code:"invalid_type",expected:r,propertyPath:t}]}(e,t,r)));var{legalValues:o}=n;return void 0!==o&&i.push((()=>function(e,t,r){return(r instanceof Set?r.has(e):r.includes(e))?[]:[{code:"invalid_value",expected:(r instanceof Set?[...r]:r).map((e=>String(e))).join(", "),propertyPath:t}]}(e,t,o))),i}function Is(e){for(var t of e){var r=t();if(r.length>0)return r}return[]}function Os(){return{sanitizeFunction:e=>e,validateFunction:function(e,t){return bs(e,t,"any")}}}function ws(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{sanitizeFunction:function(t){return t.map((t=>e.sanitizeFunction(t)))},validateFunction:function(r,n){if(!Array.isArray(r))return[{code:"invalid_type",expected:"array",propertyPath:n}];var i=[],o=0;for(var[a,s]of r.entries())i.push(...e.validateFunction(s,"".concat(n,"[").concat(a,"]"))),o+=1;var{minLength:c}=t;return void 0!==c&&o<c&&i.push({code:"invalid_value",expected:"Array must contain ".concat(c," or more items"),propertyPath:n}),i}}}function Ts(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{sanitizeFunction:e=>e,validateFunction:function(t,r){return Is(Cs(t,r,"boolean",e))}}}r(9964);var As,Ps=/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/;function Ds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{sanitizeFunction:e=>e,validateFunction:function(t,r){var n,i,o,a,s,c=Cs(t,r,"string",{});if("string"==typeof t){c.push((()=>Ss(t,r,(e=>Ps.test(e)),"Date did not match the YYYY-MM-DD format")));var{futureDate:u}=e;!0===u&&(s=function(e){var t=Ps.exec(e),[r,n,i,o]=t.map(Number);return new Date(n,i-1,o)}(t),(n=s,i="".concat(n.getFullYear(),"-").concat((n.getMonth()+1).toString().padStart(2,"0"),"-").concat(n.getDate().toString().padStart(2,"0")),o=new Date("".concat(i,"T00:00:00").concat("-08:00")),a=new Date(o.getTime()),a.setDate(a.getDate()+1),{endDate:a,endDateMillis:a.getTime(),startDate:o,startDateMillis:o.getTime()}).endDateMillis<Date.now()&&c.push((()=>[{code:"invalid_value",expected:"Date should be a future date",propertyPath:r}])))}return Is(c)}}}function Ns(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{sanitizeFunction:e=>e,validateFunction:function(t,r){return Is(Cs(t,r,"number",e))}}}function Rs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){for(var r of t)if(0===r.validateFunction(e,"").length)return r}return{sanitizeFunction:function(e){return n(e).sanitizeFunction(e)},validateFunction:function(e,r){return void 0!==n(e)?[]:t[0].validateFunction(e,r)}}}function xs(e,t){function r(t){var r=[];for(var n of e)n.eligible(t)&&r.push(n.schemaOperation);return r}return{sanitizeFunction:function(e){var t=r(e).filter((t=>0===t.validateFunction(e,"").length));return t[0].sanitizeFunction(e)},validateFunction:function(e,n){var i=r(e);if(0===i.length)return[t];var o=i.map((t=>t.validateFunction(e,n))).filter((e=>e.length>0));return o.length===i.length?o[0]:[]}}}function ks(e){return{sanitizeFunction:function(t){if(null!=t)return e.sanitizeFunction(t)},validateFunction:function(t,r){return null==t?[]:e.validateFunction(t,r)}}}function Ls(e){return{sanitizeFunction:function(t){var r=t;if(void 0===e)return r;var n={};return Object.entries(e).forEach((e=>{var[t,i]=e,o=i.sanitizeFunction(r[t]);void 0!==o&&(n[t]=o)})),n},validateFunction:function(t,r){if(!ea(t))return[{code:"invalid_type",expected:"object",propertyPath:r}];var n=[];if(void 0!==e){var i=""===r?"":"".concat(r,".");Object.entries(e).forEach((e=>{var[r,o]=e,a=t[r];n.push(...o.validateFunction(a,"".concat(i).concat(r)))}))}return n}}}function Ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return{sanitizeFunction:function(e){return t(e)},validateFunction:function(t,r){var n=Cs(t,r,"string",e),i=t,{nonBlank:o,minLength:a,maxLength:s,matchRegexp:c,formatExample:u}=e;return!0===o&&n.push((()=>Ss(i,r,(e=>""!==e.trim()),"non-blank string"))),void 0!==a&&n.push((()=>Ss(i,r,(e=>e.length>=a),"minimum length ".concat(e.minLength)))),void 0!==s&&n.push((()=>Ss(i,r,(e=>e.length<=s),"maximum length ".concat(e.maxLength)))),void 0!==c&&n.push((()=>Ss(i,r,(e=>c.test(e)),void 0!==u?"string with format ".concat(u):"correctly formatted string"))),Is(n)}}}r(9098);class js extends Error{constructor(e){super("Unable to sanitize value: ".concat(JSON.stringify(e))),this.name="SanitizationError"}}function Us(e){var t=new WeakMap;function r(r,n){if(""!==n||"object"!=typeof r||null===r)return e.validateFunction(r,n);var i=t.get(r);if(void 0!==i)return i;var o=e.validateFunction(r,n);return t.set(r,o),o}return{logValidationFailures(e,t,n,i){var o=r(i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:"");o.length>0&&e.logValidationEvent("DEVELOPER_ERROR_PENDING",{error:o.map((e=>"".concat(e.code," ").concat(e.expected," ").concat(e.propertyPath))).join(", "),operation:n,paymentMethod:t})},sanitize:function(t){if(r(t,"").length>0)throw new js(t);return e.sanitizeFunction(t)},validate:function(e){var t=r(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"");return{isValid:0===t.length,issues:t}}}}function Hs(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Fs(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Hs(o,n,i,a,s,"next",e)}function s(e){Hs(o,n,i,a,s,"throw",e)}a(void 0)}))}}!function(e){e[e.DETACHED=0]="DETACHED",e[e.ATTACHED=1]="ATTACHED",e[e.DESTROYED=2]="DESTROYED"}(As||(As={}));class Bs{constructor(e){this.status=As.DETACHED,this.eventTarget=new ys,this.eventBuffer={},this.context=e}get session(){return this.context.getSession()}get messenger(){return this.context.messenger}get metricsHandler(){return this.context.metricsHandler}get errorLogger(){return this.context.errorLogger}addEventListener(e,t){this.eventTarget.addEventListener(e,t),e in this.eventBuffer&&this.eventBuffer[e].length>0&&(this.eventBuffer[e].forEach((t=>this.eventTarget.dispatchEvent(e,t))),this.eventBuffer[e]=[])}hasEventListener(e){return this.eventTarget.hasEventListener(e)}removeEventListener(e,t){this.eventTarget.removeEventListener(e,t)}destroy(){return Promise.resolve(!0)}detach(){return Promise.resolve(!0)}dispatchEvent(e,t){this.hasEventListener(e)?this.eventTarget.dispatchEvent(e,t):(e in this.eventBuffer||(this.eventBuffer[e]=[]),this.eventBuffer[e].push(t))}withErrorHandling(e,t,r){var{methodType:n,context:i}=this;return Fs((function*(){try{return yield e(...arguments)}catch(e){if(fo(e,t))throw i.metricsHandler.logDeveloperError(e,r,n),e;if(e instanceof Ri)throw e;throw i.errorLogger.captureException(e),new Ri("using ".concat(n))}}))}throwIfDestroyed(){if(this.status===As.DESTROYED)throw new Ii(this.methodType)}throwIfDestroyedOrAlreadyAttached(){if(this.throwIfDestroyed(),this.status===As.ATTACHED)throw new Si(this.methodType)}throwIfDestroyedOrNotAttached(){if(this.throwIfDestroyed(),this.status!==As.ATTACHED)throw new Ci(this.methodType)}}var qs={message:"the tokenization request is already in process",type:"TOKENIZATION_IN_PROCESS"};const Vs=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"];class Gs extends Error{constructor(e){super(e),this.name="InvalidAuthorizationParameter",Object.setPrototypeOf(this,Gs.prototype)}}Error,Error;class zs extends Error{constructor(e,t){super(`The listener provided for event type ${e} threw an error: ${t}`),this.name="InvalidEventListenerError",Object.setPrototypeOf(this,zs.prototype)}}class $s{constructor(){this.listeners=new Map,this.eventBuffer=new Map}addEventListener(e,t,r={}){if(!0===r.once){const r=t;t=n=>{this.removeEventListener(e,t),r(n)}}if(r.signal){if(r.signal.aborted)return;r.signal.addEventListener("abort",(()=>{this.removeEventListener(e,t)}))}const n=this.listeners.get(e);void 0===n?this.listeners.set(e,[t]):n.push(t);const i=this.eventBuffer.get(e);i&&(i.forEach((e=>{this.dispatchEvent(e)})),this.eventBuffer.set(e,[]))}removeEventListener(e,t){const r=this.listeners.get(e);if(void 0!==r)for(let e=0;e<r.length;e++)r[e]===t&&(r.splice(e,1),e--)}hasEventListener(e){const t=this.listeners.get(e);return void 0!==t&&t.length>0}dispatchEvent(e){if(this.hasEventListener(e.type)){const t=[...this.listeners.get(e.type)];for(const r of t)try{r(e)}catch(t){throw new zs(e.type,t.message)}}else{const t=this.eventBuffer.get(e.type);void 0===t?this.eventBuffer.set(e.type,[e]):t.push(e)}}}class Ys{constructor(){this.eventTarget=new $s}addEventListener(e,t){this.eventTarget.addEventListener(e,(e=>{t(e.detail)}))}dispatchEvent(e){this.eventTarget.dispatchEvent(new CustomEvent(e.type,{detail:e}))}}const Ws={get DEV_ENV(){return"development"},get IFRAME_NAME(){return"ach_authz"},get IFRAME_TITLE(){return"Square ACH Authorization"},get PRODUCTION_ENV(){return"production"},get SANDBOX_ENV(){return"sandbox"},get TEST_ENV(){return"test"},getDebitAuthHostname(e){switch(e){case this.PRODUCTION_ENV:return"https://connect.squareup.com";case this.SANDBOX_ENV:return"https://connect.squareupsandbox.com";default:return"https://connect.squareupstaging.com"}},getIframeSrc(e,t){return`${this.getSDKBaseUrlForEnv(e)}${"development"===e?"":`/${t}`}/ach-authz-sdk/enclave.html`},getSDKBaseUrlForEnv(e){switch(e){case"production":return"https://web.squarecdn.com";case"sandbox":return"https://sandbox.web.squarecdn.com";case"development":return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}};class Ks extends Error{constructor(e){super("Received error event from iframe"),this.event=e,this.name="IframeErrorEventError",Object.setPrototypeOf(this,Ks.prototype)}}const Js=function(e,t){const r=document.createElement("iframe");return new Promise(((n,i)=>{r.onerror=e=>{i(new Ks(e))},r.onload=()=>{n(r)},r.setAttribute("id","ach-auth-enclave"),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("src",Ws.getIframeSrc(e,t)),r.setAttribute("title",Ws.IFRAME_TITLE),r.style.position="fixed",r.style.inset="0px",r.style.zIndex="2147483647",r.style.borderWidth="0px",r.style.display="block",r.style.overflow="hidden auto",document.body.append(r)}))},Xs=function(e){e.parentElement?.removeChild(e)};class Zs extends Error{constructor(e,t){super(e),this.severity=t??"error"}}class Qs extends Zs{constructor(e){super(e),this.name="IframeMessengerImplementationError",Object.setPrototypeOf(this,Qs.prototype)}}class ec extends Zs{constructor(e){super(e),this.name="IframeMessengerInternalMessageError",Object.setPrototypeOf(this,ec.prototype)}}class tc extends Zs{constructor(e,t,r,n){void 0!==r?(super(`Messenger has not received an acknowledgement of message ${e} with id ${t} from iframe id=${r} which ${null===document.getElementById(r)?"does not exist":"exists"}`,n),this.iframeID=r):super(`Messenger has not received an acknowledgement of message ${e} with id ${t}, no iframeID was set`,n),this.type=e,this.id=t,this.name="IframeMessengerTimeoutError",Object.setPrototypeOf(this,tc.prototype)}}const rc="channel:connected",nc="channel:connecting",ic="channel:close",oc="channel:error";class ac{constructor(e){this.receiveMessage=e=>{switch(e.data){case this.messageWithName(nc):this.handleConnecting(e);break;case this.messageWithName(rc):this.handleConnected();break;case this.messageWithName(ic):this.close();break;case this.messageWithName(oc):break;default:this.handleMessage(e)}},this.connected=!1,this.listeners=[],this.messageBuffer=[],this.name=void 0!==e?`:${e}`:""}set onmessage(e){this.listeners.push(e)}close(){this.port&&(this.postMessage(this.messageWithName(ic)),this.port.close(),this.port=void 0,this.connected||window.removeEventListener("message",this.receiveMessage)),this.connected=!1}connect(e){if(this.connected)throw new Qs("message channel is already connected");if(e){if(void 0===e.origin)throw new Qs("message channel remote.origin must be defined");if(null===e.window)throw new Qs("message channel remote.window cannot be null");const t=new MessageChannel;this.setupPort(t.port1),e.window.postMessage(this.messageWithName(nc),e.origin,[t.port2])}else window.addEventListener("message",this.receiveMessage)}setErrorHandler(e){this.errorHandler=e}postMessage(e){this.port&&this.connected?this.port.postMessage(e):this.messageBuffer.push(e)}handleConnecting(e){if(this.connected)throw new Qs("message channel should not be connecting because already connected");window.removeEventListener("message",this.receiveMessage),e.ports[0]&&(this.setupPort(e.ports[0]),this.postMessage(this.messageWithName(rc)),this.connectionEstablished())}handleConnected(){if(this.connected)throw new Qs("message channel already connected");this.connectionEstablished()}connectionEstablished(){for(this.connected=!0;this.messageBuffer.length>0;)this.postMessage(this.messageBuffer.shift())}handleMessage(e){this.listeners.forEach((t=>{t(e)}))}setupPort(e){this.port=e,this.port.onmessage=this.receiveMessage,this.port.onmessageerror=e=>{this.postMessage(this.messageWithName(oc)),this.errorHandler&&this.errorHandler(new Qs("message channel failed to deserialize message"),e)}}messageWithName(e){return e+this.name}}function sc(){return`${Date.now()}${Math.floor(8e3*Math.random())}`}const cc=["ack","ok","error"];function uc(e={}){let t,r;const{errorSerializer:n,payloadSerializer:i}=e,o=new ac(e.name),a=new Map;function s(e,t){const{messageType:r,listener:n}=e,i=a.get(r);if(i){const e=i.get(t);e?e.push(n):i.set(t,[n])}else a.set(r,new Map([[t,[n]]]))}function c(e){const c=function(e){if(!e.mustAcknowledge)return new Promise((e=>{e({})}));let o;const c=()=>{cc.forEach((t=>{const r=a.get(`${e.type}:${t}`);void 0!==r&&r.delete(o)}))},u=window.setTimeout((()=>{!function(e){const n=new tc(e.type,e.id,r,"warning");t&&t(n,new MessageEvent(e.type,{data:e}))}(e)}),1e4);return new Promise(((t,r)=>{o=sc(),s({listener(){clearTimeout(u),e.mustRespond||(c(),t({}))},messageType:`${e.type}:ack`},o),s({listener(e){c();const{payload:r}=e.data;if(void 0===i)t(r);else{const e=i.deserialize(r);t(e)}},messageType:`${e.type}:ok`},o),s({listener(e){c();const{payload:t}=e.data;if(void 0===n)r(t);else{const e=n.deserialize(t);r(e)}},messageType:`${e.type}:error`},o)}))}(e);return e.type&&"undefined"!==e.type||void 0===t||t(new ec("attempting to send a messenger message with an undefined type")),o.postMessage(e),c}function u(e,t,r){return c({id:t.id,mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}return o.onmessage=function(e){if(void 0===e.data.type||"undefined"===e.data.type)return void(void 0!==t&&t(new ec("Received a messenger message with an undefined type"),e));const r=a.get(e.data.type);if(r)!0===e.data.mustAcknowledge&&function(e){const t=`${e.type}:ack`;c({id:e.id,mustAcknowledge:!1,mustRespond:!1,payload:void 0,type:t})}(e.data),r.forEach((t=>{t.forEach((t=>{t(e)}))}));else{const r=e.data.type;t&&t(new Qs(`Listener does not exist for ${r}. Add one to your messenger instance:\n            messenger.onMessage({\n                    listener: (msg) => {},\n                    messageType: '${r}',\n                });\n          `),e)}},Object.freeze({close:function(){o.close()},connect:function(e,t){void 0!==r&&(r=t),o.connect(e)},onMessage:function(e,t=sc()){return s(e,t),t},reject:function(e,t){const r=`${e.type}:error`;let i=t;return void 0!==n&&(i=n.serialize(t)),u(r,e,i)},request:function(e,t){let r=t;return void 0!==t&&void 0!==i&&(r=i.serialize(t)),c({id:sc(),mustAcknowledge:!0,mustRespond:!0,payload:r,type:e})},respond:function(e,t){const r=`${e.type}:ok`;let n=t;return void 0!==i&&(n=i.serialize(t)),u(r,e,n)},sendMessage:function(e,t){let r=t;return void 0!==t&&void 0!==i&&(r=i.serialize(t)),c({id:sc(),mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})},sendOneWayMessage:function(e,t){let r=t;return void 0!==t&&void 0!==i&&(r=i.serialize(t)),c({id:sc(),mustAcknowledge:!1,mustRespond:!1,payload:r,type:e})},setErrorHandler:function(e){t=e,o.setErrorHandler(e)}})}const lc=function(){return uc({name:Ws.IFRAME_NAME})},dc=async function(e,t,r){const n=Ws.getSDKBaseUrlForEnv(r);e.connect({origin:n,window:t.contentWindow},t.id),await e.sendMessage("INITIALIZE",{env:r})},hc=/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/;function pc(e){const t=function(e){const t=hc.exec(e);if(!t)throw new Gs("Date did not match the YYYY-MM-DD format");const[r,n,i,o]=t.map(Number);return new Date(n,i-1,o)}(e);return{day:t.getDate(),month:t.getMonth()+1,weekday:Vs[t.getDay()],year:t.getFullYear()}}const fc={build(e,t){const r=lc(),n=new Ys;return Promise.resolve(Object.freeze({addEventListener:function(e,t){n.addEventListener(e,t)},captureAuthorization:async function(i){let o;try{const a=function(e){const t={applicationId:e.applicationId,avt:e.avt,featureFlagValues:e.featureFlagValues,idempotencyKey:e.idempotencyKey,locationId:e.locationId};if("CHARGE"===e.intent)return"bankNonce"in e?{...t,bankNonce:e.bankNonce,kind:"ONE_TIME_BANK_NONCE",total:e.total}:{...t,bankAccountId:e.bankAccountId,kind:"ONE_TIME_BANK_ACCOUNT_ID",total:e.total};const r=pc(e.startDate);let n;n="frequency"in e?e.frequency:"WEEKLY"===e.cadence?{weekly:{daysOfWeek:[r.weekday],occurrence:1}}:{monthly:{days:{daysOfMonth:[r.day]}}};const i={...t,bankAccountId:e.bankAccountId,frequency:n,startDate:r};return"variableAmount"in e?{...i,kind:"VARIABLE_RECURRING"}:{...i,...void 0!==e.offCadencePayments&&{offCadencePayments:e.offCadencePayments.map((e=>({paymentOn:pc(e.date),total:e.total})))},kind:"RECURRING",total:e.total}}(i);o=await Js(e,t),await dc(r,o,e);const s=await r.request("CAPTURE_AUTHORIZATION",a);"success"===s.kind?n.dispatchEvent({token:s.token,type:"signed"}):n.dispatchEvent({type:"canceled"})}catch(e){n.dispatchEvent({error:e,type:"error"})}o&&Xs(o)}}))}};function mc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mc(Object(r),!0).forEach((function(t){vc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vc(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yc(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Ec(e){var{ach_architecture_changes:t,show_square_monochrome:r}=e;return{ach_architecture_changes:t,show_square_monochrome:r}}var _c={build(e){var{env:t,transactionId:r,session:n,context:i,onSigned:o,onCanceled:a,onError:s}=e;function c(){var e;return e=function*(e){var c=yield fc.build(t,Fn.VERSION);i.metricsHandler.logEvent("ACH_AUTH:START"),c.addEventListener("signed",(function(t){o(t.token,e.intent,..."bankAccountDetails"in e?[e.bankAccountDetails]:[]),i.metricsHandler.logEvent("ACH_AUTH:OK")})),c.addEventListener("canceled",(function(){i.metricsHandler.logEvent("ACH_AUTH:CANCEL"),a()})),c.addEventListener("error",(function(e){var{error:t}=e;t instanceof Gs?s(new ui(t.message)):(s(new Ri("authorizing the payment")),i.errorLogger.captureException(t)),i.metricsHandler.logEvent("ACH_AUTH:ERROR")})),yield c.captureAuthorization(gc(gc({},e),{},{applicationId:n.applicationId,avt:n.avt,featureFlagValues:Ec(i.getFeatureFlagValues()),idempotencyKey:r,locationId:n.locationId}))},c=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){yc(o,n,i,a,s,"next",e)}function s(e){yc(o,n,i,a,s,"throw",e)}a(void 0)}))},c.apply(this,arguments)}return Object.freeze({run:function(e){return c.apply(this,arguments)}})}};function bc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bc(Object(r),!0).forEach((function(t){Cc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Cc(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ic=Ls({intent:ks(Ms({legalValues:["CHARGE","STORE","RECURRING_CHARGE"]}))}),Oc=xs([{eligible:function(e){return ea(e)&&"bankAccountId"in e},schemaOperation:Ls({bankAccountId:Ms({nonBlank:!0})})},{eligible:function(e){return ea(e)&&"accountHolderName"in e&&void 0===e.bankAccountId},schemaOperation:Ls({accountHolderName:Ms({nonBlank:!0})})}],{code:"missing_property",expected:"string",propertyPath:"accountHolderName"}),wc=Ls({accountHolderName:Ms({nonBlank:!0})}),Tc=Ls({amount:Ms({matchRegexp:/^-?[0-9]+(\.[0-9]+)?$/}),currency:Ms({legalValues:["USD"]}),date:Ds({futureDate:!0})}),Ac={bankAccountId:Ms({minLength:1}),offCadencePayments:ks(ws(Tc,{minLength:1})),startDate:Ds({futureDate:!0})},Pc=Ls(Sc(Sc({},Ac),{},{cadence:Ms({legalValues:["WEEKLY","MONTHLY"]})})),Dc=Ls(Sc(Sc({},Ac),{},{frequency:Ls({weekly:Ls({daysOfWeek:ws(Ms({legalValues:Vs})),occurrence:ks(Ns())})})})),Nc=Rs(Ls({daysOfMonth:ws(Ns())}),Ls({endOfMonth:Ts()})),Rc=Ls(Sc(Sc({},Ac),{},{frequency:Ls({monthly:Ls({days:Nc,occurrence:ks(Ns())})})})),xc=Ls(Sc(Sc({},Ac),{},{frequency:Ls({yearly:Ls({days:Nc,months:ws(Ms({legalValues:["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"]})),occurrence:ks(Ns())})})}));function kc(e,t){return ea(e)&&"frequency"in e&&Qo(e.frequency)&&1===Object.keys(e.frequency).length&&t in e.frequency}var Lc=xs([{eligible:e=>ea(e)&&"cadence"in e,schemaOperation:Pc},{eligible:e=>kc(e,"days"),schemaOperation:Ls(Sc(Sc({},Ac),{},{frequency:Ls({days:Ns()})}))},{eligible:e=>kc(e,"weekly"),schemaOperation:Dc},{eligible:e=>kc(e,"monthly"),schemaOperation:Rc},{eligible:e=>kc(e,"yearly"),schemaOperation:xc}],{code:"invalid_value",expected:"exactly one of the keys days, weekly, monthly, yearly",propertyPath:"frequency"}),Mc=xs([{eligible:e=>ea(e)&&!("total"in e),schemaOperation:Ls({amount:Ms({nonBlank:!0}),currency:Ms({nonBlank:!0})})},{eligible:e=>ea(e)&&"total"in e,schemaOperation:Ls({total:Ls({amount:Ns(),currencyCode:Ms({nonBlank:!0})})})}],{code:"missing_property",expected:"string",propertyPath:"amount, currency"});function jc(e){if(!e.isValid){var t=e.issues.map((e=>{switch(e.code){case"missing_property":return'Missing property: "'.concat(e.propertyPath,'" for ACH tokenize. Expected "').concat(e.expected,'"');case"invalid_type":return'Invalid type: "'.concat(e.propertyPath,'" for ACH tokenize. Expected "').concat(e.expected,'"');default:return'Invalid value: "'.concat(e.propertyPath,'" for ACH tokenize. Expected "').concat(e.expected,'"')}}));throw new ui(t.join("; "))}}function Uc(e){jc(Us(Mc).validate(e))}function Hc(e){return"total"in e?e.total:{amount:yo(e.amount,e.currency),currencyCode:e.currency}}var Fc=function(){var e=document.createElement("div");return e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100vw",e.style.height="100%",e.style.zIndex="3",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.opacity="0",document.body.appendChild(e),e.style.transition="opacity ".concat("cubic-bezier(0.26, 0.1, 0.48, 1)"," ").concat("0.24s"),setTimeout((function(){e.style.opacity="1"})),new Promise((function(t){setTimeout((function(){t(e)}),240)}))},Bc=function(e){e&&(e.style.transition="opacity ".concat("cubic-bezier(0.52, 0, 0.74, 0)"," ").concat("0.16s"),setTimeout((function(){e.style.opacity="0"})),setTimeout((function(){e.remove()}),160))};class qc{constructor(e){this.id=Es(),this.context=e}request(e,t){return this.context.messenger.request(e,{body:t,featureFlagValues:this.context.getFeatureFlagValues(),paymentMethodInstanceId:this.id,paymentMethodTrackingId:this.context.getPaymentMethodTrackingId(),session:this.context.getSession()})}initializeMessageBus(e){var t=this,r=function(e){t.context.messenger.onMessage({listener(t){e(t)},messageType:"".concat(n,":").concat(t.id)})};for(var[n,i]of Object.entries(e))r(i)}}class Vc extends Error{constructor(e,t,r){super(`error loading script ${e}: ${t} ${r?r.toString():""}`),this.name="ScriptLoaderError",Object.setPrototypeOf(this,Vc.prototype)}}const Gc={};function zc(e){delete Gc[e],document.getElementById(e)?.remove()}function $c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yc(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wc(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Kc(){var e;return e=function*(e,t,r){try{var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$c(Object(r),!0).forEach((function(t){Yc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:"square-payments-".concat(e,"-script")},t);return yield function(e,t){const r=t();if(void 0!==r)return Promise.resolve(r);if(e.id in Gc)return Gc[e.id];const n=document.createElement("script");for(const t in e){const r=e[t];void 0!==r&&n.setAttribute(t,r)}return Gc[e.id]=new Promise(((r,i)=>{n.onload=()=>{const n=t();void 0===n?(zc(e.id),i(new Vc(e.src,"location returned undefined"))):r(n)},n.onerror=(t,r,n,o,a)=>{zc(e.id),i(new Vc(e.src,"Unknown error occurred",a))}})),document.body.appendChild(n),Gc[e.id]}(n,(()=>{var e;return"google.payments"===r?null===(e=window.google)||void 0===e?void 0:e.payments:window[r]}))}catch(e){throw new bi(cs.UNABLE_TO_LOAD)}},Kc=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Wc(o,n,i,a,s,"next",e)}function s(e){Wc(o,n,i,a,s,"throw",e)}a(void 0)}))},Kc.apply(this,arguments)}var Jc={load:function(e,t,r){return Kc.apply(this,arguments)}};function Xc(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}var Zc=new Set(["ITEM_ERROR","INSTITUTION_ERROR"]),Qc=new Set(["en","es"]),eu=["US"];function tu(){var e;return null!==(e=c.windowNavigatorLanguages.map((e=>e.split("-")[0])).find((e=>Qc.has(e))))&&void 0!==e?e:"en"}function ru(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function nu(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ru(o,n,i,a,s,"next",e)}function s(e){ru(o,n,i,a,s,"throw",e)}a(void 0)}))}}var iu=(e,t)=>nu((function*(){var r=new qc(e),n=function(e,t,r,n){var i;function o(){var a;return a=function*(){var o=yield function(e,t){var r=e.getSession();if(void 0===r.locationId||""===r.locationId)throw new Ri("locationId not defined when creating OAuth Plaid Link Session");var n={createOAuthPlaidLinkSessionRequest:{clientId:r.applicationId,languageCode:tu(),locationId:r.locationId,redirectUri:""}};return t.request("CREATE_OAUTH_PLAID_LINK_SESSION",n)}(t,r);return function(r){return new Promise(((o,a)=>{var{errorLogger:s,metricsHandler:c}=t,u="sandbox";"production"===Fn.env&&(u="production"),i=e.create({clientName:"Square, Inc.",countryCodes:eu,env:u,language:tu(),onEvent:(e,t)=>{e!==Dn.ERROR||Zc.has(t.error_type)||s.captureException(new Ao("PlaidErrorEvent: ".concat(JSON.stringify(t)),Vn.ACH)),n.onEvent(e,t)},onExit:(e,t)=>{e&&(c.logEvent("EXTERNAL_SESSION:ERROR"),Zc.has(e.error_type)||s.captureException(new Ao("PlaidErrorOnExit: ".concat(JSON.stringify(e),", Metadata: ").concat(JSON.stringify(t)),Vn.ACH))),o({kind:"canceled"})},onSuccess:(e,t)=>{if(0===t.accounts.length){c.logEvent("EXTERNAL_SESSION:ERROR");var n=new Error("No account selected but expected account, metadata: ".concat(JSON.stringify(t)));return s.captureException(n),void a(n)}c.logEvent("EXTERNAL_SESSION:OK"),o({gringottsSessionToken:r.gringottsSessionToken,kind:"success",publicToken:e,selectedBankAccountId:t.accounts[0].id})},product:["auth"],token:r.plaidLinkToken}),c.logEvent("EXTERNAL_SESSION:START"),i.open()}))}(o)},o=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=a.apply(e,t);function o(e){Xc(i,r,n,o,s,"next",e)}function s(e){Xc(i,r,n,o,s,"throw",e)}o(void 0)}))},o.apply(this,arguments)}return{beginFlow:function(){return o.apply(this,arguments)},destroy:function(){i&&(i.exit({force:!0}),i.destroy(),i=void 0)}}}(yield Jc.load("plaid-link",{src:"https://cdn.plaid.com/link/v2/stable/link-initialize.js"},"Plaid"),e,r,{onEvent:t});function i(){return i=nu((function*(e){var t=yield n.beginFlow();if("success"===t.kind){var r=yield function(e,t,r,n){return o.apply(this,arguments)}(e.accountHolderName,t.publicToken,t.selectedBankAccountId,t.gringottsSessionToken);return r}return{status:"cancelled"}})),i.apply(this,arguments)}function o(){return(o=nu((function*(t,n,i,o){var a=e.getSession(),s={accountHolderName:t,gringottsSessionToken:o,plaidPublicToken:n,selectedPlaidBankAccountId:i},c={bankNonceRequest:{clientId:a.applicationId,instanceId:a.instanceId,locationId:a.locationId,paymentMethodTrackingId:e.getPaymentMethodTrackingId(),plaidLinkData:s,sessionId:a.sessionId,websdkVersion:Fn.VERSION}};try{var u=yield r.request("REQUEST_ACH_BANK_NONCE",c);return e.setPaymentMethodTrackingId(u.paymentMethodTrackingId),{accountDetails:u.accountDetails,bankNonce:u.bankNonce,status:"successful"}}catch(e){throw e instanceof Ni?e:new Ni([Ro])}}))).apply(this,arguments)}return Object.freeze({destroy:function(){n.destroy()},run:function(e){return i.apply(this,arguments)}})}))();function ou(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function au(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ou(Object(r),!0).forEach((function(t){su(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ou(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function su(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cu(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function uu(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){cu(o,n,i,a,s,"next",e)}function s(e){cu(o,n,i,a,s,"throw",e)}a(void 0)}))}}var lu=Ls({transactionId:Ms({nonBlank:!0})});class du extends Bs{constructor(e,t){super(e),this.methodType=Vn.ACH,this.tokenizeInProgress=!1,this.wasFirstInteractionCalled=!1,this.transactionId=function(e){if(!Us(lu).validate(e).isValid)return Es();var{transactionId:t}=e;return t}(t)}initialize(){var e=this;return uu((function*(){var t=e.dispatchPlaidEvent.bind(e);e.plaidNonceFlow=yield iu(e.context,t),e.achAuthFlow=_c.build({context:e.context,env:Fn.env,onCanceled:e.dispatchCancelResult.bind(e),onError:e.dispatchError.bind(e),onSigned:e.dispatchSuccessfulTokenResult.bind(e),session:e.session,transactionId:e.transactionId})}))()}handleLegacyFlow(e){var t=this;return uu((function*(){t.context.metricsHandler.logEvent("ACH_LEGACY:START");var r=yield t.runPlaidFlow(e.accountHolderName);switch(t.context.metricsHandler.logEvent("ACH_LEGACY:OK"),r.status){case"successful":t.resetFirstInteraction();var n=pu(r.bankNonce,r.accountDetails);return t.dispatchTokenizationEvent(n),n;case"cancelled":var i=hu();return t.dispatchTokenizationEvent(i),i;default:throw new Ri("Unexpected tokenize flow status")}}))()}tokenize(e){var t=this;return uu((function*(){try{if(t.throwIfDestroyed(),t.tokenizeInProgress)throw new Ni([qs]);if(function(e,t){if(!ea(e))throw new ui("Tokenize options must be an object.");var r,n=e;if("intent"in n){var i=Us(Ic).validate(e);if(!i.isValid){var[o]=i.issues;throw new ui("Unsupported ".concat(o.propertyPath,". Must be one of: ").concat(o.expected))}"CHARGE"===(r=n).intent?(jc(Us(Oc).validate(r)),Uc(r)):"STORE"===r.intent?jc(Us(wc).validate(r)):(!0!==r.variableAmount&&Uc(r),jc(Us(Lc).validate(r)))}else{if("SUPPORTED"!==t)throw new ui("Invalid parameter format for ACH tokenize");if(!Us(wc).validate(n).isValid)throw new Kn}}(e,t.context.getFeatureFlagValues().can_use_ach_auth),!t.hasEventListener(Dn.ON_TOKENIZATION)){var r="Add event listener for '".concat(Dn.ON_TOKENIZATION,"' before calling tokenize.");console.error("".concat(r," This will result in an error when using the Plaid OAuth flow."))}if(void 0===t.achAuthFlow||void 0===t.plaidNonceFlow)throw new Ri("calling ach.tokenize(). Must call initialize() first");if(t.tokenizeInProgress=!0,t.handleFirstInteraction(),t.metricsHandler.logConfigurationEvent("TOKENIZE_CONFIGURED",e),!function(e){return"intent"in e}(e))return yield t.handleLegacyFlow(e);switch(t.veil=yield Fc(),e.intent){case"STORE":var n=yield t.runPlaidFlow(e.accountHolderName);"successful"===n.status?t.dispatchSuccessfulTokenResult(n.bankNonce,e.intent,n.accountDetails):t.dispatchTokenizationEvent(hu());break;case"CHARGE":var i=function(e){var t=Us(Oc).sanitize(e);return t.intent="CHARGE",t.total=Hc(e),t}(e);if("bankAccountId"in i)yield t.achAuthFlow.run(i);else{var o=yield t.runPlaidFlow(i.accountHolderName);"successful"===o.status?yield t.achAuthFlow.run({bankAccountDetails:o.accountDetails,bankNonce:o.bankNonce,intent:i.intent,total:i.total}):t.dispatchTokenizationEvent(hu())}break;case"RECURRING_CHARGE":var a={bankAccountId:e.bankAccountId,intent:e.intent,startDate:e.startDate};if("variableAmount"in e){"frequency"in e?yield t.achAuthFlow.run(au(au({},a),{},{frequency:e.frequency,variableAmount:!0})):"cadence"in e&&(yield t.achAuthFlow.run(au(au({},a),{},{cadence:e.cadence,variableAmount:!0})));break}var s=au(au({},a),{},{total:Hc(e)},void 0!==e.offCadencePayments&&{offCadencePayments:e.offCadencePayments.map((e=>({date:e.date,total:Hc(e)})))});"cadence"in e?yield t.achAuthFlow.run(au(au({},s),{},{cadence:e.cadence})):yield t.achAuthFlow.run(au(au({},s),{},{frequency:e.frequency}))}return}catch(e){var c=ps(e);throw t.context.metricsHandler.logDeveloperError(c,"tokenize",Vn.ACH),t.dispatchError(c),c}finally{t.tokenizeInProgress=!1,Bc(t.veil)}}))()}runPlaidFlow(e){var t=this;return uu((function*(){return yield t.plaidNonceFlow.run({accountHolderName:e})}))()}destroy(){var e;return this.status=As.DESTROYED,this.metricsHandler.logConfigurationEvent("DESTROYED"),null===(e=this.plaidNonceFlow)||void 0===e||e.destroy(),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logConfigurationEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}resetFirstInteraction(){this.wasFirstInteractionCalled=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent("FIRST_INTERACTION:OK"))}dispatchCancelResult(){this.dispatchTokenizationEvent(hu())}dispatchSuccessfulTokenResult(e,t,r){this.resetFirstInteraction();var n=pu(e,r,t);this.dispatchTokenizationEvent(n)}dispatchError(e){this.dispatchEvent(Dn.ON_TOKENIZATION,{error:e})}dispatchPlaidEvent(e,t){this.dispatchEvent(e,t)}dispatchTokenizationEvent(e){this.dispatchEvent(Dn.ON_TOKENIZATION,{tokenResult:e})}}function hu(){return{status:Gn}}function pu(e,t,r){var n={method:Vn.ACH};return void 0!==r&&(n.ach={intent:r}),t&&(n.bankAccount=t),{details:n,status:Yn,token:e}}var fu=[Zn,Qn,ei,ti],mu=new Set(["DIV","SPAN"]),gu=new Set(["DIV","SPAN"]),vu=new Set(["DIV","SPAN","BUTTON"]);function yu(e,t){var r;if(function(e){return"string"==typeof e}(e)){var n=document.querySelector(e);if(!n)throw new oi(e);r=n}else{if(!(e instanceof HTMLElement))throw new Oi(e,t);if(r=e,!document.contains(r))throw new oi(r)}if(!t.has(r.nodeName))throw new Oi(r,t);return r}function Eu(e){return yu(e,mu)}function _u(e){return yu(e,vu)}function bu(e){return yu(e,gu)}var Su="sq-focus",Cu="sq-error",Iu=".".concat(Su),Ou=".".concat(Cu),wu="sq-apply-monochrome",Tu=function(e,t,r){return new Promise(((n,i)=>{if(function(e){return Boolean(document.getElementById(e))}(t))n();else{var o=document.createElement("link");o.onload=()=>{n()},o.onerror=()=>{i(new Error("Failed to load stylesheet at ".concat(e,". The onerror callback was invoked.")))},o.href=e,o.rel="stylesheet",o.type="text/css",o.id=t,r.appendChild(o)}}))},Au=["black","green","mint"],Pu=Object.freeze({UPDATE:"update"});function Du(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Du(Object(r),!0).forEach((function(t){Ru(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Du(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ru(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(488);var xu=Ls({amount:Ms(),label:Ms()}),ku=Ls({amount:Ms(),id:Ms(),label:Ms()}),Lu=Ls({discounts:ks(ws(xu)),error:ks(Ms()),lineItems:ks(ws(xu)),shippingErrors:ks(Ls()),shippingLineItems:ks(ws(xu)),shippingOptions:ks(ws(ku)),taxLineItems:ks(ws(xu)),total:ks(xu)});function Mu(e,t){var{lineItems:r,taxLineItems:n,discounts:i,shippingLineItems:o}=e,a=!1,s=[],c=r,u=n,l=o,d=ju(i);return void 0===t||void 0===r&&void 0===n&&void 0===o&&void 0===d||(null!=c||(c=t.lineItems),null!=u||(u=t.taxLineItems),null!=d||(d=ju(t.discounts)),null!=l||(l=t.shippingLineItems)),[c,u,d,l].forEach((e=>{void 0!==e&&(a=!0,s.push(...e))})),a?s:void 0}function ju(e){return void 0===e?e:e.map((e=>Nu(Nu({},e),{},{amount:"-".concat(e.amount)})))}var Uu="".concat(Fn.ASSET_URL,"/afterpay.css"),Hu="sq-afterpay-styles",Fu={production:{marketplace:"https://js.squarecdn.com/square-marketplace.js",messaging:"https://js.afterpay.com/afterpay-1.x.js"},sandbox:{marketplace:"https://js-sandbox.squarecdn.com/square-marketplace.js",messaging:"https://js.afterpay.com/afterpay-1.x.js"},staging:{marketplace:"https://portal.stage.afterpay-beta.com/square-marketplace.js",messaging:"https://js.sandbox.afterpay.com/afterpay-1.x.js"}},Bu=Ls({addressLines:Os(),city:Ms(),countryCode:Ms(),familyName:Ms(),givenName:Ms(),postalCode:Ms(),state:Ms()}),qu=Ls({amount:Ms(),id:Ms(),label:Ms(),taxLineItems:ks(ws(xu)),total:xu}),Vu=Rs(Ls({shippingOptions:ws(qu)}),Ls({error:Os()}),Ls({shippingErrors:Os()})),Gu=Rs(Ls({shippingOption:qu}),Ls({error:Os()})),zu="#000",$u="#00d533",Yu="#b2fce4",Wu={black:{[Rn.CheckoutWithAfterpay]:{backgroundColor:zu,cdn:"WEBSDK_CDN",url:"afterpay-buttons/Afterpay_Checkout_Button_Black-White.svg"},[Rn.BuyNowWithAfterpay]:{backgroundColor:zu,cdn:"WEBSDK_CDN",url:"afterpay-buttons/Afterpay_BuyNow_Button_Black-White.svg"},[Rn.PlaceOrderWithAfterpay]:{backgroundColor:zu,cdn:"WEBSDK_CDN",url:"afterpay-buttons/Afterpay_PlaceOrder_Button_Black-White.svg"}},green:{[Rn.CheckoutWithAfterpay]:{backgroundColor:Yu,cdn:"WEBSDK_CDN",url:"afterpay-buttons/Afterpay_Checkout_Button_Mint-Black.svg"},[Rn.BuyNowWithAfterpay]:{backgroundColor:Yu,cdn:"WEBSDK_CDN",url:"afterpay-buttons/Afterpay_BuyNow_Button_Mint-Black.svg"},[Rn.PlaceOrderWithAfterpay]:{backgroundColor:Yu,cdn:"WEBSDK_CDN",url:"afterpay-buttons/Afterpay_PlaceOrder_Button_Mint-Black.svg"}}},Ku={black:{[Rn.CheckoutWithAfterpay]:{backgroundColor:zu,cdn:"AFTERPAY_CDN",url:"https://static.afterpay.com/en-US/integration/button/checkout-with-afterpay/color-on-black.svg"},[Rn.BuyNowWithAfterpay]:{backgroundColor:zu,cdn:"AFTERPAY_CDN",url:"https://static.afterpay.com/en-US/integration/button/buy-with-afterpay/color-on-black.svg"},[Rn.PlaceOrderWithAfterpay]:{backgroundColor:zu,cdn:"AFTERPAY_CDN",url:"https://static.afterpay.com/en-US/integration/button/place-order-with-afterpay/color-on-black.svg"}},green:{[Rn.CheckoutWithAfterpay]:{backgroundColor:$u,cdn:"AFTERPAY_CDN",url:"https://static.afterpay.com/en-US/integration/button/checkout-with-afterpay/black-on-green.svg"},[Rn.BuyNowWithAfterpay]:{backgroundColor:$u,cdn:"AFTERPAY_CDN",url:"https://static.afterpay.com/en-US/integration/button/buy-with-afterpay/black-on-green.svg"},[Rn.PlaceOrderWithAfterpay]:{backgroundColor:$u,cdn:"AFTERPAY_CDN",url:"https://static.afterpay.com/en-US/integration/button/place-order-with-afterpay/black-on-green.svg"}}},Ju={black:{[Rn.CheckoutWithAfterpay]:{backgroundColor:zu,cdn:"WEBSDK_CDN",url:"afterpay-buttons/Clearpay_Checkout_Button_Black-White.svg"},[Rn.BuyNowWithAfterpay]:{backgroundColor:zu,cdn:"WEBSDK_CDN",url:"afterpay-buttons/Clearpay_BuyNow_Button_Black-White.svg"},[Rn.PlaceOrderWithAfterpay]:{backgroundColor:zu,cdn:"WEBSDK_CDN",url:"afterpay-buttons/Clearpay_PlaceOrder_Button_Black-White.svg"}},green:{[Rn.CheckoutWithAfterpay]:{backgroundColor:Yu,cdn:"WEBSDK_CDN",url:"afterpay-buttons/Clearpay_Checkout_Button_Mint-Black.svg"},[Rn.BuyNowWithAfterpay]:{backgroundColor:Yu,cdn:"WEBSDK_CDN",url:"afterpay-buttons/Clearpay_BuyNow_Button_Mint-Black.svg"},[Rn.PlaceOrderWithAfterpay]:{backgroundColor:Yu,cdn:"WEBSDK_CDN",url:"afterpay-buttons/Clearpay_PlaceOrder_Button_Mint-Black.svg"}}},Xu={AU:"AFTERPAY",CA:"AFTERPAY",NZ:"AFTERPAY",US:"AFTERPAY_CASHAPP"},Zu={AFTERPAY:Wu,AFTERPAY_CASHAPP:Ku,CLEARPAY:Ju};function Qu(e,t){var r=0;return e.forEach((e=>{r+=yo(e,t)})),vo(r,t)}function el(e,t){return Qu(e.map((e=>e.amount)),t)}function tl(e){return e.requestShippingContact&&void 0!==e.lineItems&&e.lineItems.length>0}function rl(e,t){var r,n;return{description:"",id:e.id,name:e.label,orderAmount:{amount:null!==(r=e.total.amount)&&void 0!==r?r:"0.00",currency:t},shippingAmount:{amount:e.amount,currency:t},taxAmount:{amount:el(null!==(n=e.taxLineItems)&&void 0!==n?n:[],t),currency:t}}}var nl={buildAfterpayContact:function(e){return{area1:e.city,countryCode:e.countryCode,line1:e.addressLines[0],line2:e.addressLines[1],name:"".concat(e.givenName," ").concat(e.familyName),phoneNumber:e.phone,postcode:e.postalCode,region:e.state}},buildDiscounts:function(e,t){return e.map((e=>({amount:{amount:e.amount,currency:t},displayName:e.label})))},buildLineItems:function(e,t){return e.map((e=>({imageUrl:e.imageUrl,name:e.label,pageUrl:e.productUrl,price:{amount:e.amount,currency:t},quantity:1,sku:e.id})))},shippingOption:rl,shippingOptions:function(e,t){return e.shippingOptions.map((e=>rl(e,t.currencyCode)))},totalAmount:function(e){if(tl(e)){var t=el(e.lineItems,e.currencyCode);return e.discounts&&(t=Qu([t,(r=e.discounts,n=e.currencyCode,"-".concat(el(r,n)))],e.currencyCode)),{amount:t,currency:e.currencyCode}}var r,n;return{amount:Qu([e.total.amount],e.currencyCode),currency:e.currencyCode}}},il=function(e){return{amount:e.shippingAmount.amount,id:e.id,label:e.name}},ol=function(e){return Us(Bu).validate(e,"shippingContact")};function al(e){var t=nl.totalAmount(e);if(yo(t.amount,t.currency)<=0)throw tl(e)?new ri("Total line item amount must be greater than zero"):new ri("Total amount must be greater than zero")}function sl(e){var t,[r,n]=e.split("-");return null!==(t=Xu[n])&&void 0!==t?t:"CLEARPAY"}function cl(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}var ul=[25,50,75,100];function ll(e){return"CLEARPAY"===sl(e)?"clearpay-brand.svg":"afterpay-brand.svg"}class dl{constructor(e,t){this.attached=!1,this.req=e,this.context=t,this.locale=this.context.getSession().locale,this.currencyCode=this.req.currencyCode;var{today:r,weeks:n}=this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget;this.periodText=[r,"2 ".concat(n),"4 ".concat(n),"6 ".concat(n)],e.addEventListener(Pu.UPDATE,(()=>{this.update()}))}attach(e,t){var r,n=this;return(r=function*(){n.element=e;try{yield Tu(Uu,Hu,document.head)}catch(e){throw new Ri("attaching the Afterpay Checkout Widget")}var r=n.buildAmounts().map((e=>go(e,n.currencyCode,n.locale))),i=!1;!0===(null==t?void 0:t.includeBranding)&&(i=!0);var o,a=ll(n.locale),s='\n      <div class="sq-ap__checkout-widget-container">\n        '.concat(i?'<div class="sq-ap__wordmark">\n                <img id="ap-wordmark-image" src="'.concat(Fn.staticAsset(a),'"/>\n              </div>'):"",'\n        <p class="sq-ap__checkout-title">').concat(n.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.title,'</p>\n        <div class="sq-ap__payment-container">\n          ').concat(r.map(((e,t)=>'\n              <div id="ap-payment-container-'.concat(t,'" class="sq-ap__individual-payment">\n                <div class="sq-ap__harvey-ball-container">\n                  ').concat(function(e){var t=12,r=2*Math.PI*6,n=r*ul[e]/100;return'\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(24," ").concat(24,'" class="sq-ap__harvey-ball">\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="white"\n        />\n        <circle\n          r="').concat(6,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke="').concat("#B2FCE4",'"\n          stroke-width="').concat(t,'"\n          stroke-dasharray="').concat(n," ").concat(r,'"\n          transform="rotate(-90) translate(-').concat(24,')"\n        />\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke-width="2"\n          stroke="black"\n       />\n      </svg>\n    ')}(t),'\n                </div>\n                <p id="ap-payment-amount-').concat(t,'" class="sq-ap__amount">').concat(e,'</p>\n                <p class="sq-ap__period">').concat(n.periodText[t],"</p>\n              </div>\n            "))).join(""),"\n        </div>\n      </div>\n    ");n.element.insertAdjacentHTML("afterbegin",s),n.context.getFeatureFlagValues().show_square_monochrome&&(null===(o=n.element.querySelector(".sq-ap__checkout-widget-container"))||void 0===o||o.classList.add(wu)),n.attached=!0},function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){cl(o,n,i,a,s,"next",e)}function s(e){cl(o,n,i,a,s,"throw",e)}a(void 0)}))})()}update(){if(this.attached&&this.element){var e=document.getElementById("ap-wordmark-image");if(e){var t=ll(this.locale);e.src=Fn.staticAsset(t)}this.buildAmounts().map((e=>go(e,this.currencyCode,this.locale))).forEach(((e,t)=>{var r,n=null===(r=this.element)||void 0===r?void 0:r.querySelector("#ap-payment-amount-".concat(t));n&&(n.innerHTML=e)}))}}buildAmounts(){var e=yo(this.req.total.amount,this.req.currencyCode),t=e/4;switch(e%4){case 0:return hl(t,0);case 1:return hl(t,1);case 2:return hl(t,-2);case 3:return hl(t,-1);default:return[]}}}function hl(e,t){var r=Array.from({length:3}).fill(Math.round(e));return r.push(e+t),r}function pl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pl(Object(r),!0).forEach((function(t){ml(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ml(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gl(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function vl(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){gl(o,n,i,a,s,"next",e)}function s(e){gl(o,n,i,a,s,"throw",e)}a(void 0)}))}}var yl=new Set(["en_US","en_CA","fr_CA","en_AU","en_NZ","en_GB","fr_FR","es_ES","it_IT"]),El=new Set(["AUD","GBP","USD","CAD","EUR"]);class _l extends Bs{constructor(e,t,r,n,i){if(super(n),this.methodType=Vn.AFTERPAY_CLEARPAY,this.onTokenizeCallbacks=[],this.tokenizationBuffer=[],this.wasFirstInteractionCalled=!1,this.onTokenizeHandlerAdded=!1,this.transferOptions={},this.buyNowOption=!1,this.afterpayLibrary=e,this.afterpayMessagingLibrary=t,this.req=r,this.paymentRequestLockController=i,this.paymentMessenger=new qc(this.context),this.total=this.totalMoney(),void 0===this.session.locationId||""===this.session.locationId)throw new bi(cs.INVALID_CONFIG,"locationId");this.locationID=this.session.locationId,this.req.addPaymentMethodUsage("AfterpayClearpay"),al(this.req),this.req.addEventListener("update",(()=>{delete this.checkoutTokenResponse,this.element&&this.initializeAfterpayPopup(this.element),this.total=this.totalMoney()}))}attach(e,t){var r=this;return vl((function*(){var n,i;r.throwIfDestroyedOrAlreadyAttached(),r.status=As.ATTACHED,r.metricsHandler.logEvent("ATTACH:START"),r.metricsHandler.logConfigurationEvent("CONFIGURED",t);try{n=_u(e)}catch(e){throw r.metricsHandler.logEvent("ATTACH:ERROR","good"),r.status=As.DETACHED,e}if(!0!==(null==t?void 0:t.useCustomButton)){var o,a,s=document.createElement("div");n.appendChild(s);var c=s.attachShadow({mode:"open"});try{yield Tu(Uu,Hu,c)}catch(e){throw r.status=As.DETACHED,r.metricsHandler.logEvent("ATTACH:ERROR","bad"),new Ri("attaching Afterpay")}var u=null!==(o=null==t?void 0:t.buttonColor)&&void 0!==o?o:Nn.BLACK;u===Nn.MINT&&console.warn("The 'mint' option has been deprecated. Please use 'green' instead.");var l=null!==(a=null==t?void 0:t.buttonType)&&void 0!==a?a:Rn.BuyNowWithAfterpay;if(i=u,!Au.includes(i))throw r.status=As.DETACHED,r.metricsHandler.logEvent("ATTACH:ERROR","good"),new hi("buttonColor",u);var d=function(e,t){var r="mint"===e?"green":e;return Zu[sl(t)][r]}(u,r.session.locale);if(!(l in d))throw r.status=As.DETACHED,r.metricsHandler.logEvent("ATTACH:ERROR","good"),new hi("buttonType",l);var h=d[l],p=document.createElement("button");p.setAttribute("type","button"),p.setAttribute("class","sq-ap__button"),r.context.getFeatureFlagValues().show_square_monochrome&&p.classList.add(wu),p.style.backgroundColor=h.backgroundColor,p.style.backgroundImage="AFTERPAY_CDN"===h.cdn?"url(".concat(h.url,")"):"url(".concat(Fn.staticAsset(h.url),")"),c.append(p)}r.buyNowOption=(null==t?void 0:t.finalCtaButtonType)===xn.BUY_NOW,r.initializeAfterpayPopup(n),r.metricsHandler.logEvent("ATTACH:OK","good"),r.element=n,r.onTokenizeHandlerAdded&&r.element.addEventListener("click",(()=>{r.openPaymentModal()}))}))()}attachMessaging(e,t){return this.throwIfDestroyed(),bu(e),this.afterpayMessagingLibrary.createPlacements({attributes:{amount:Number(this.req.total.amount),badgeTheme:null==t?void 0:t.badgeTheme,currency:this.req.currencyCode,locale:this.session.locale,modalLinkStyle:null==t?void 0:t.modalLinkStyle,modalTheme:null==t?void 0:t.modalTheme,size:null==t?void 0:t.size},targetSelector:e}),Promise.resolve()}attachCheckoutWidget(e,t){var r=this;return vl((function*(){if(!El.has(r.req.currencyCode))throw new ri("Currency is not supported by Afterpay. Valid currencies are: ".concat([...El].join(", ")));var n=bu(e);if(r.metricsHandler.logConfigurationEvent("AFTERPAY_CHECKOUT_WIDGET_CONFIGURED",{checkoutWidgetLaunch:r.context.getFeatureFlagValues().use_new_afterpay_checkout_widget,locale:r.session.locale,selectorOrElement:e instanceof HTMLElement?"element":"selector"}),r.context.getFeatureFlagValues().use_new_afterpay_checkout_widget){var i=document.createElement("div");if(i.id="sq-ap__payment-schedule-container-".concat(Es()),i.classList.add("sq-ap__payment-schedule-container"),void 0!==(null==t?void 0:t.theme)&&!zi.includes(t.theme))throw new hi("theme",t.theme);try{yield Tu(Uu,Hu,document.head)}catch(e){throw new Ri("attaching the Afterpay Checkout Widget")}return n.appendChild(i),new Promise(((e,n)=>{var o,a,s,c,u=new r.afterpayLibrary.Widgets.PaymentSchedule({amount:nl.totalAmount(r.req),locale:r.session.locale,onError:e=>{r.errorLogger.captureException(e),n(ps(e))},onReady:function(){e()},style:{border:null===(o=null==t?void 0:t.border)||void 0===o||o,heading:null===(a=null==t?void 0:t.heading)||void 0===a||a,logo:null===(s=null==t?void 0:t.includeBranding)||void 0===s||s,theme:null!==(c=null==t?void 0:t.theme)&&void 0!==c?c:"CLASSIC"},target:"#".concat(i.id)});r.req.addEventListener(Pu.UPDATE,(()=>{u.update({amount:nl.totalAmount(r.req)})}))}))}return new dl(r.req,r.context).attach(n,t)}))()}displayInformationModal(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=uo(this.session.locale);yl.has(t)||(t="en_US"),this.afterpayMessagingLibrary.launchModal(fl(fl({},e),{},{locale:t}))}onTokenize(e){var t;this.throwIfDestroyed(),this.onTokenizeCallbacks.push(e),1===this.onTokenizeCallbacks.length&&(this.tokenizationBuffer.forEach((e=>{var{result:t,error:r}=e;this.emitTokenizationResult(t,r)})),this.tokenizationBuffer=[]),this.onTokenizeHandlerAdded||void 0===this.element||null===(t=this.element)||void 0===t||t.addEventListener("click",(()=>{this.openPaymentModal()})),this.onTokenizeHandlerAdded=!0}tokenize(){var e=this;return vl((function*(){if(e.throwIfDestroyedOrNotAttached(),e.onTokenizeHandlerAdded)throw new Jn;var t,r,n=new Promise(((e,n)=>{t=e,r=n}));return e.onTokenizeCallbacks=[function(e,n){void 0===n?void 0!==e?t(e):r(new Ni([ko.UNKNOWN])):r(n)}],yield e.openPaymentModal(),n}))()}destroy(){return this.status===As.DESTROYED?Promise.resolve(!1):(this.detachElement(As.DESTROYED,"DESTROYED"),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(As.DETACHED,"DETACHED"),Promise.resolve(!0)}internalSetCheckoutToken(){var e=this;return vl((function*(){try{var t=yield e.paymentMessenger.request("REQUEST_AFTERPAY_CHECKOUT_HANDLER",e.buildCheckoutPayload());return e.checkoutTokenResponse=t,e.checkoutTokenResponse.token}catch(t){var r=t;throw fo(t,[...fu,yi,ai,ri])||(e.errorLogger.captureException(t),r=new Ri("tokenizing with Afterpay")),r}}))()}commenceCheckout(e){var t=this;return vl((function*(){if(t.wasFirstInteractionCalled||(t.wasFirstInteractionCalled=!0,t.metricsHandler.logEvent("FIRST_INTERACTION:OK")),t.metricsHandler.logEvent("EXTERNAL_SESSION:START"),t.paymentRequestLockController.lock(t),void 0!==t.checkoutTokenResponse&&new Date(t.checkoutTokenResponse.expires)>new Date)e.resolve(t.checkoutTokenResponse.token);else try{var r=yield t.internalSetCheckoutToken();e.resolve(r)}catch(r){t.paymentRequestLockController.unlock(t),t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR");var n=ps(r);t.emitTokenizationResult(void 0,n),e.reject(n.message)}}))()}completeCheckout(e){var t=this;return vl((function*(){try{if(function(e){return"SUCCESS"===e.status&&void 0!==e.orderToken}(e)){var r=yield t.paymentMessenger.request("REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN",t.buildInstantWalletTokenPayload(e.orderToken,t.total));t.metricsHandler.logEvent("EXTERNAL_SESSION:OK");var n={method:Vn.AFTERPAY_CLEARPAY,shipping:{contact:{email:r.afterpayData.email}}};r.billingContact&&(n.billing=r.billingContact),r.shippingContact&&(n.shipping={contact:r.shippingContact}),delete t.checkoutTokenResponse,t.emitTokenizationResult({details:n,status:Yn,token:r.token})}else t.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),t.emitTokenizationResult({status:Gn})}catch(e){var i;t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),e instanceof Ni?i=e:(t.errorLogger.captureException(e),i=new Ri("tokenizing Afterpay")),t.emitTokenizationResult(void 0,i)}t.paymentRequestLockController.unlock(t)}))()}onShippingOptionChange(e,t){this.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),this.req.dispatchEvent(qn.AFTERPAY_SHIPPING_OPTION_CHANGED,{contactOrOption:il(e),requireValidation:!0},(e=>{if(void 0===e.error){if(void 0!==e.shippingOption){this.total.amount=yo(e.shippingOption.total.amount,this.req.currencyCode);var r=nl.shippingOption(e.shippingOption,this.req.currencyCode);t.resolve(r)}}else t.reject(e.error)}))}onShippingOptionChangeLegacy(e){this.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),this.total.amount=yo(e.orderAmount.amount,this.req.currencyCode),this.req.dispatchEvent(qn.AFTERPAY_SHIPPING_OPTION_CHANGED,{contactOrOption:il(e)},(e=>{}))}onShippingAddressChange(e,t){if(!this.req.hasEventListener(qn.AFTERPAY_SHIPPING_ADDRESS_CHANGED))return this.emitTokenizationResult(void 0,new Xn("PaymentRequest",qn.AFTERPAY_SHIPPING_ADDRESS_CHANGED)),t.reject("SERVICE_UNAVAILABLE"),void this.afterpayLibrary.close();var r,n,i,o,a=this.req;this.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),this.req.dispatchEvent(qn.AFTERPAY_SHIPPING_ADDRESS_CHANGED,{contactOrOption:(r=e,o=[],[r.address1,r.address2].forEach((e=>{void 0!==e&&o.push(e)})),r.name&&([n,i]=r.name.split(/\s(?=\S+$)/)),{addressLines:o,city:r.suburb,countryCode:r.countryCode,familyName:i,givenName:n,phone:r.phoneNumber,postalCode:r.postcode,state:r.state})},(e=>{if(void 0===e.error)if(e.shippingErrors)t.reject("SHIPPING_ADDRESS_UNRECOGNIZED");else{var r=nl.shippingOptions(e,a);t.resolve(r)}else t.reject("SHIPPING_ADDRESS_UNSUPPORTED")}))}emitTokenizationResult(e,t){0===this.onTokenizeCallbacks.length?this.tokenizationBuffer.push({error:t,result:e}):this.onTokenizeCallbacks.forEach((r=>{r(e,t)}))}buildInstantWalletTokenPayload(e,t){return{afterpayData:{afterpayToken:e,buyerAmount:t},clientID:this.session.applicationId,instanceID:this.session.instanceId,locationID:this.locationID,paymentMethodTrackingID:this.context.getPaymentMethodTrackingId(),requestBillingContact:this.req.requestBillingContact,requestShippingContact:this.req.requestShippingContact,sessionID:this.session.sessionId,websdkVersion:Fn.VERSION}}buildCheckoutPayload(){var e,t={amount:nl.totalAmount(this.req),applicationID:this.session.applicationId,discounts:[],locationID:this.locationID,popupOriginUrl:this.session.sourceUrl};if(this.req.lineItems&&(t.items=nl.buildLineItems(this.req.lineItems,this.req.currencyCode)),this.req.discounts&&(t.discounts=nl.buildDiscounts(this.req.discounts,this.req.currencyCode)),this.req.requestShippingContact?e=this.req.shippingContact:this.req.pickupContact&&(e=this.req.pickupContact),void 0!==e){var r=ol(e);if(!r.isValid)throw new ai(r.issues.map((e=>[e.propertyPath,e.expected])));t.shipping=nl.buildAfterpayContact(e)}return t}totalMoney(){return{amount:yo(this.req.total.amount,this.req.currencyCode),currency:this.req.currencyCode}}openPaymentModal(){var e=this;return vl((function*(){e.afterpayLibrary.open();var t=yield new Promise(((t,r)=>{e.commenceCheckout({reject:r,resolve:t})}));e.afterpayLibrary.transfer(fl({token:t},e.transferOptions))}))()}initializeAfterpayPopup(e){var t=this.commenceCheckout.bind(this),r=this.completeCheckout.bind(this),n=document.createElement("div");n.id="sq-afterpay-dummy-element-".concat(Es()),n.style.visibility="hidden",e.appendChild(n),this.transferOptions={buyNow:this.buyNowOption,shippingOptionRequired:this.req.requestShippingContact},this.req.requestShippingContact||this.req.pickupContact||(this.transferOptions.addressMode="NO_ADDRESS");var i,o,a={addressMode:this.transferOptions.addressMode,countryCode:this.req.countryCode,onCommenceCheckout:(o=vl((function*(e){yield t(e)})),function(e){return o.apply(this,arguments)}),onComplete:(i=vl((function*(e){var{data:t}=e;yield r(t)})),function(e){return i.apply(this,arguments)}),shippingOptionRequired:this.req.requestShippingContact,target:"#".concat(n.id)};this.req.requestShippingContact?(a.onShippingAddressChange=this.onShippingAddressChange.bind(this),this.context.getFeatureFlagValues().can_use_afterpay_on_shipping_options_changed&&this.req.hasEventListener(qn.AFTERPAY_SHIPPING_OPTION_CHANGED)?a.onShippingOptionChange=this.onShippingOptionChange.bind(this):a.onShippingOptionChange=this.onShippingOptionChangeLegacy.bind(this)):this.req.pickupContact&&(this.transferOptions.pickup=!0),this.afterpayLibrary.initializeForPopup(a),e.removeChild(n)}detachElement(e,t){this.afterpayLibrary.close(),this.element&&(this.element.innerHTML=""),this.element=null,this.tokenizationBuffer=[],this.onTokenizeCallbacks=[],this.status=e,this.metricsHandler.logConfigurationEvent(t)}}var bl=function(){var e,t,{messaging:r,marketplace:n}=(e=Fn.env,null!==(t=Fu[e])&&void 0!==t?t:Fu.staging);return Promise.all([Jc.load("afterpay",{src:n},"AfterPay"),Jc.load("afterpay-messaging",{src:r},"Afterpay")])},Sl=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.createElement("iframe");return new Promise(((i,o)=>{n.onerror=e=>{o(new Do(e))},n.onload=()=>{r||i(n)},Object.entries(e).forEach((e=>{var[t,r]=e;"style"===t?Object.entries(r).forEach((e=>{var[t,r]=e;n.style.setProperty(t,r,"important")})):n.setAttribute(t,r)})),t?t.appendChild(n):document.body.appendChild(n)}))},Cl=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},Il=[oi,di,hi,Ci,Ii,Pi,Ti,Ai,Di],Ol=[oi,Oi,Ti,Ai,Pi,Di,Si,Ii],wl=[Ni,Ci,Ii];function Tl(e,t,r){switch(e){case In.CARD_NUMBER:return t.paymentMethods.cards.errors.cardNumberError;case In.CVV:return t.paymentMethods.cards.errors.cvvError;case In.EXPIRATION_DATE:return t.paymentMethods.cards.errors.expirationDateError;case In.POSTAL_CODE:return t.paymentMethods.cards.errors.postalCodeErrors[r];case wn.GIFT_CARD_NUMBER:return t.paymentMethods.giftCards.errors.giftCardNumberError;default:return""}}function Al(e,t,r){switch(e){case In.CARD_NUMBER:return t.paymentMethods.cards.helperText.cardNumber;case In.CVV:return t.paymentMethods.cards.helperText.cvv;case In.EXPIRATION_DATE:return t.paymentMethods.cards.helperText.expirationDate;case In.POSTAL_CODE:return t.paymentMethods.cards.helperText.postalCodes[r];case wn.GIFT_CARD_NUMBER:return t.paymentMethods.giftCards.helperText.giftCardNumber;default:return""}}class Pl{constructor(e,t){this.errorList=new Set,this.focusedInput=void 0,this.fieldOrdering=e,this._postalCountry=null!=t?t:"US"}get postalCountry(){return this._postalCountry}setErrorOnField(e){this.errorList.add(e)}removeErrorFromField(e){this.errorList.delete(e)}setFocusOnField(e){this.focusedInput=e}removeFocusFromField(e){this.focusedInput===e&&(this.focusedInput=null)}setPostalCountry(e){this._postalCountry=e}hasFocus(){return null!==this.focusedInput&&void 0!==this.focusedInput}hasError(){return this.errorList.size>0}fieldHelperMessage(e){if(0===this.errorList.size)return{fieldName:this.focusedInput,isError:!1,message:Al(this.focusedInput,e,this.postalCountry)};var t=this.fieldOrdering.find((e=>this.errorList.has(e)));return{fieldName:t,isError:!0,message:Tl(t,e,this.postalCountry)}}}var Dl=["top","right","bottom","left"],Nl={ASPECT_RATIO:/^\d+\/\d+$/,HEX:/^#([\dA-Fa-f]{3}|[\dA-Fa-f]{6})$/,NEGATIVE_EM:/^-\d*\.?\d+em$/,NEGATIVE_PERCENT:/^\d*\.?\d+%$/,NEGATIVE_PT:/^-\d*\.?\d+pt$/,NEGATIVE_PX:/^-\d*\.?\d+px$/,POSITIVE_EM:/^\d*\.?\d+em$/,POSITIVE_PERCENT:/^\d*\.?\d+%$/,POSITIVE_PT:/^\d*\.?\d+pt$/,POSITIVE_PX:/^\d*\.?\d+px$/,POSITIVE_RESOLUTION:/^\d*\.?\d+(?:dpi|dpcm|dppx|x)$/,RGB:/^rgb\((\s*\d{1,3},){2}\s*\d{1,3}\)$/,RGBA:/^rgba\((\s*\d{1,3},){3}\s*(1|0*.\d*)\)$/},Rl=/\s(?![^(]*\))/,xl=new Set(["screen","all","print","speech"]),kl=new Set(["and"]),Ll=new Set(["not","only"]),Ml=new Set(["portrait","landscape"]),jl=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large"]),Ul=new Set(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),Hl=new Set([100,200,300,400,500,600,700,800,900]),Fl=new Set(["100","200","300","400","500","600","700","800","900","normal","bold","bolder","lighter"]),Bl=new Set(["normal"]),ql=new Set(["smaller","larger"]),Vl=new Set(["andale mono","arial","arial black","arial narrow","arial rounded mt bold","avant garde","baskerville","big caslon","bodoni mt","book antiqua","brush script mt","calibri","calisto mt","cambria","candara","century gothic","charcoal","comic sans ms","consolas","copperplate","copperplate gothic light","courier","courier new","cursive","didot","fantasy","franklin gothic medium","futura","garamond","geneva","georgia","gill sans","goudy old style","helvetica","helvetica neue","hoefler text","impact","lucida bright","lucida console","lucida grande","lucida sans unicode","lucida sans typewriter","monaco","monospace","optima","palatino","palatino linotype","papyrus","perpetua","rockwell","rockwell extra bold","sans-serif","segoe ui","serif","square market","square sans text","tahoma","times","times new roman","trebuchet ms","verdana"]),Gl=new Set(["none","antialiased","subpixel-antialiased"]),zl=new Set(["grayscale","auto"]),$l=new Set(["none"]);function Yl(e){return e.split(/, ?(?![^(]*\))/).every((e=>function(e){if("none"===e)return!0;var t=e.split(/ (?![^(]*\))/),r=0;if("inset"===t[0]&&(t.shift(),r+=1),"inset"===t[t.length-1]){if(r>0)return!1;t.pop()}for(var n=0;n<2;n+=1){var i=t.shift();if(void 0===i||!Ql(i))return!1}switch(t.length){case 0:return!0;case 1:return rd(t[0])||td(t[0]);case 2:return td(t[0])&&(rd(t[1])||ed(t[1]));case 3:return td(t[0])&&ed(t[1])&&rd(t[2]);default:return!1}}(e)))}function Wl(e){return["border-box","content-box"].includes(e)}function Kl(e){return e.split(" ").every((e=>function(e){return 0===Number(e)||fd(e)||vd(e)}(e)))}function Jl(e){var t=e.split(" ");return!(0===t.length||t.length>4)&&t.every(Xl)}function Xl(e){return 0===Number(e)||fd(e)||vd(e)}function Zl(e){return 0===Number(e)||fd(e)||vd(e)||md(e)||yd(e)}function Ql(e){return 0===Number(e)||pd(e)||gd(e)}function ed(e){return 0===Number(e)||pd(e)||gd(e)}function td(e){return 0===Number(e)||fd(e)||vd(e)}function rd(e){return function(e){return Ul.has(e.toLowerCase())}(e)||function(e){return Nl.HEX.test(e)}(e)||function(e){return Nl.RGB.test(e)}(e)||function(e){return Nl.RGBA.test(e)}(e)}function nd(e){return function(e){return jl.has(e.toLowerCase())}(e)||function(e){return ql.has(e.toLowerCase())}(e)||fd(e)||Ed(e)||vd(e)||_d(e)}function id(e){return null!==e&&e.split(", ").every((e=>{return t=e.toLowerCase().trim().replace(/["']+/g,""),Vl.has(t);var t}))}function od(e){var t=Number(e);return Number.isNaN(t)?Fl.has(e.toLowerCase()):Hl.has(t)}function ad(e){return"normal"===e||gd(e)||function(e){return Ed(e)||function(e){return Nl.NEGATIVE_PT.test(e)}(e)}(e)||pd(e)}function sd(e){var t=Number(e);return!Number.isNaN(t)&&t>=0||Bl.has(e)||vd(e)||fd(e)||Ed(e)||_d(e)}function cd(e){return Gl.has(e)}function ud(e){return zl.has(e)}function ld(e){return $l.has(e)}function dd(e){if(null===e)return!1;var t=e.toString().split(" ");return!(t.length>4)&&t.every((e=>function(e){return fd(e)||vd(e)||_d(e)||0===Number(e)}(e)))}function hd(e){if(!e.startsWith("(")||!e.endsWith(")"))return!1;var t=e.slice(1,-1),[r,n]=t.split(/: */);switch(r){case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":case"device-width":case"min-device-width":case"max-device-width":case"device-height":case"min-device-height":case"max-device-height":return fd(n)||vd(n)||_d(n);case"resolution":case"min-resolution":case"max-resolution":return function(e){return Nl.POSITIVE_RESOLUTION.test(e)}(n);case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":case"device-aspect-ratio":case"min-device-aspect-ratio":case"max-device-aspect-ratio":return function(e){return Nl.ASPECT_RATIO.test(e)}(n);case"color":case"color-index":case"monochrome":return void 0===n;case"min-color":case"max-color":case"min-color-index":case"max-color-index":case"min-monochrome":case"max-monochrome":return function(e){return Number(e)>=0}(n);case"orientation":return function(e){return Ml.has(e)}(n);default:return!1}}function pd(e){return fd(e)||md(e)}function fd(e){return Nl.POSITIVE_PX.test(e)}function md(e){return Nl.NEGATIVE_PX.test(e)}function gd(e){return vd(e)||yd(e)}function vd(e){return Nl.POSITIVE_EM.test(e)}function yd(e){return Nl.NEGATIVE_EM.test(e)}function Ed(e){return Nl.POSITIVE_PT.test(e)}function _d(e){return Nl.POSITIVE_PERCENT.test(e)}var bd=function(e,t){var r=(e=>{switch(e){case"border-color":case"background-color":case"color":case"-webkit-text-fill-color":return rd;case"-webkit-box-shadow":case"box-shadow":return Yl;case"box-sizing":return Wl;case"font-family":return id;case"font-size":return nd;case"font-weight":return od;case"letter-spacing":return ad;case"line-height":return sd;case"padding":return dd;case"-webkit-font-smoothing":return cd;case"-moz-osx-font-smoothing":return ud;case"display":return ld;case"border-radius":return Kl;case"border-width":return Jl;case"top":case"bottom":case"left":case"right":return Zl;case"width":return function(e){return""!==e};default:return}})(e);return!0===(null==r?void 0:r(t))||function(e){return["unset","inherit","revert","initial"].includes(e)}(t)?t:""},Sd=function(e){return!!(t=e).startsWith("@media")&&t.slice(7,t.length).split(/, */).every((e=>{var t=e.split(Rl);if(0===t.length)return!1;var r=0;if(!t[0].startsWith("(")){var n=0;if(Ll.has(t[0])&&(n=1),t.length===n+1)return xl.has(t[n]);if(!xl.has(t[n])||!kl.has(t[n+1]))return!1;r=2+n}if((t.length-r)%2==0)return!1;for(var[i,o]of Object.entries(t.slice(r)))if(!(Number(i)%2==0?hd(o):kl.has(o)))return!1;return!0}));var t};function Cd(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r.length>0&&!r.includes(e))throw new Ti(e);var i=lo(e),o=bd(i,t);if(0===o.length)throw new Ai(e,t);return n&&(o+=" !important"),po(i,o)}function Id(e,t,r){var n,i=[],o=[],a=new Set(null!==(n=e.excludeProperties)&&void 0!==n?n:[]);for(var[s,c]of Object.entries(t))if(!a.has(s))try{i.push(Cd(s,null!=c?c:"",r))}catch(e){(e instanceof Ti||e instanceof Ai)&&o.push(e)}if(o.length>0)throw new Di(o);return Object.fromEntries(e.toSelectors.map((function(e){return[e,i]})))}function Od(e,t,r){var n={},i=[];if(e.forEach((function(e){var{property:o,setAsImportant:a,toProperty:s,toSelectors:c,transformPropertyValue:u}=e,l=t[o];if(mo(l)){var d=u?u(l):l;try{var h=Cd(null!=s?s:o,d,void 0!==s?[...r,s]:r,a);c.forEach((e=>{e in n||(n[e]=[]),n[e].push(h)}))}catch(e){(e instanceof Ti||e instanceof Ai)&&i.push(e)}}})),i.length>0)throw new Di(i);return n}var wd=function(e,t){var r=t.split(" ");switch(r.length){case 1:return r[0];case 2:switch(e){case"top":case"bottom":return r[0];default:return r[1]}case 3:switch(e){case"top":return r[0];case"bottom":return r[2];default:return r[1]}case 4:switch(e){case"top":return r[0];case"right":return r[1];case"bottom":return r[2];case"left":return r[3];default:return""}default:return""}},Td=function e(t,r,n){var i,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[],s=[...Object.keys(r.selectorMappings),...Object.keys(null!==(i=r.selectorPropertyMappings)&&void 0!==i?i:{})],c=new Set(s),u=new Set(Object.values(n));Object.keys(t).forEach((e=>{u.has(e)||function(e,t){return!t&&Sd(e)}(e,o)||a.push(new Pi(e))}));var l={};function d(e){for(var[t,r]of Object.entries(e))t in l||(l[t]=[]),l[t].push(...r)}for(var h of c){var p,f,m,g,v=t[h],y=null!==(p=r.allowedAttributes[h])&&void 0!==p?p:[],E=null!==(f=r.selectorMappings[h])&&void 0!==f?f:[],_=null!==(m=null===(g=r.selectorPropertyMappings)||void 0===g?void 0:g[h])&&void 0!==m?m:[];if(v){try{d(Id(E,v,y))}catch(e){e instanceof Di&&a.push(...e.errors)}try{d(Od(_,v,y))}catch(e){e instanceof Di&&a.push(...e.errors)}}}if(Object.keys(t).filter((e=>!c.has(e)&&Sd(e))).forEach((i=>{try{var o=e(t[i],r,n,!0);l[i]=[o]}catch(e){e instanceof Di&&a.push(...e.errors)}})),a.length>0)throw new Di(a);return function(e){var t=[];for(var[r,n]of Object.entries(e))n&&n.length>0&&t.push("\n      ".concat(r," { ").concat(n.join(" ")," }\n      "));return t.join("")}(l)},Ad="sq-card-iframe-container",Pd="sq-card-wrapper",Dd="sq-card-component",Nd="sq-card-message",Rd="sq-card-message-error",xd="sq-card-message-no-error",kd="sq-visible",Ld=".".concat(Pd),Md=".".concat(Dd),jd=".".concat(Ad),Ud="".concat(Ld).concat(Iu),Hd="".concat(Ld).concat(Ou),Fd="".concat(Ld," ").concat(Md),Bd="".concat(Ld," ").concat(jd),qd="".concat(Ud," ").concat(jd),Vd="".concat(Hd," ").concat(jd),Gd=".sq-card-message-error::before",zd=".sq-card-message-no-error::before",$d="".concat(jd).concat("::before"),Yd=["borderWidth"];function Wd(e){var t=["".concat(e).concat(Ou," ").concat($d),"".concat(e).concat(Iu," ").concat($d)];return Dl.map((e=>{return{property:"borderWidth",toProperty:e,toSelectors:t,transformPropertyValue:(r=e,function(e){var t=wd(r,e);return t.startsWith("0")?t:"-".concat(t)})};var r}))}function Kd(e,t){return Td(e,function(e){var t="#".concat(e);return{allowedAttributes:{[On.CARD_COMPONENT]:$i,[On.CARD_COMPONENT_FOCUS]:Yi,[On.CARD_COMPONENT_ERROR]:Yi,[On.CARD_INPUT_HELPER_TEXT]:Wi,[On.CARD_INPUT_HELPER_ICON]:Ki,[On.CARD_INPUT_ERROR_TEXT]:Wi,[On.CARD_INPUT_ERROR_ICON]:Ki},selectorMappings:{[On.CARD_COMPONENT]:{toSelectors:["".concat(t).concat(Bd)]},[On.CARD_COMPONENT_FOCUS]:{excludeProperties:Yd,toSelectors:["".concat(t).concat(qd)]},[On.CARD_COMPONENT_ERROR]:{excludeProperties:Yd,toSelectors:["".concat(t).concat(Vd)]},[On.CARD_INPUT_HELPER_TEXT]:{toSelectors:["".concat(t," ").concat(".sq-card-message-no-error")]},[On.CARD_INPUT_HELPER_ICON]:{toSelectors:["".concat(t," ").concat(zd)]},[On.CARD_INPUT_ERROR_TEXT]:{toSelectors:["".concat(t," ").concat(".sq-card-message-error")]},[On.CARD_INPUT_ERROR_ICON]:{toSelectors:["".concat(t," ").concat(Gd)]}},selectorPropertyMappings:{[On.CARD_INPUT]:[{property:"backgroundColor",toSelectors:["".concat(t).concat(Bd)]}],[On.CARD_COMPONENT]:[{property:"borderRadius",toSelectors:["".concat(t," ").concat($d),"".concat(t).concat(Fd)]},{property:"borderWidth",toProperty:"width",toSelectors:["".concat(t).concat(Bd)],transformPropertyValue:e=>function(e){var t=["left","right"].map((t=>{var r=wd(t,e);return"0"===r&&(r="0px"),r})).join(" + ");return"calc(100% - (".concat(t,"))")}(e)},...Wd(t)],[On.CARD_COMPONENT_ERROR]:[{property:"borderColor",toSelectors:["".concat(t).concat(Ou," ").concat($d)]},{property:"borderWidth",toSelectors:["".concat(t).concat(Ou," ").concat($d)]}],[On.CARD_COMPONENT_FOCUS]:[{property:"borderColor",toSelectors:["".concat(t).concat(Iu," ").concat($d)]},{property:"borderWidth",toSelectors:["".concat(t).concat(Iu," ").concat($d)]}],[On.CARD_INPUT_ERROR_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Gd)]}],[On.CARD_INPUT_HELPER_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(zd)]}]}}}(t),On)}function Jd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jd(Object(r),!0).forEach((function(t){Zd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zd(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qd(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function eh(e,t,r){return th.apply(this,arguments)}function th(){var e;return e=function*(e,t,r){try{e.metricsHandler.logEvent("OSA_VERIFICATION:START");var n=function(e){if("STORE"===e.intent)return e;var t,r,n=Xd({},e);return"total"in n?(t=vo(n.total.amount,n.total.currencyCode),({currencyCode:r}=n.total),delete n.total):({amount:t,currencyCode:r}=n),Xd(Xd({},n),{},{amount:t,currencyCode:r})}(t),i=yield e.analyticsBackend.verifyBuyer(r,n);return e.metricsHandler.logEvent("OSA_VERIFICATION:OK"),i}catch(t){if(e.metricsHandler.logEvent("OSA_VERIFICATION:ERROR"),ii(t))throw new Ni([xo]);throw"UnexpectedAnalyticsClientError"!==ps(t).name&&e.errorLogger.captureException(t),Uo()}},th=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Qd(o,n,i,a,s,"next",e)}function s(e){Qd(o,n,i,a,s,"throw",e)}a(void 0)}))},th.apply(this,arguments)}function rh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nh(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ih=/^-?[0-9]+(\.[0-9]+)?$/;function oh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ah(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oh(Object(r),!0).forEach((function(t){sh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sh(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ch(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function uh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ch(o,n,i,a,s,"next",e)}function s(e){ch(o,n,i,a,s,"throw",e)}a(void 0)}))}}function lh(e,t){return void 0!==t?{status:Yn,token:"".concat(e,"#").concat(t)}:{status:Yn,token:e}}function dh(e){return"".concat("single-card-wrapper","-").concat(e)}function hh(e,t){var r=function(e){return"".concat("sq-single-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=Kd(e,dh(t))}function ph(e){var t={includeInputLabels:e=>"boolean"==typeof e,postalCode:e=>"string"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(!(r in t))throw new di(r);if(!t[r](n))throw new hi(r,n)}))}var fh=class extends Bs{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=Vn.CARD,this.updateCardDetailText=()=>{if(this.cardDetail){var{message:e,isError:t}=this.fieldState.fieldHelperMessage(this.context.getLocaleString());this.cardDetail.classList.toggle(Rd,t),this.cardDetail.classList.toggle(xd,!t),this.cardDetail.textContent!==e&&(this.cardDetail.textContent=e),this.cardDetail.classList.toggle(kd,e.length>0)}},this.onResize=e=>{var t;if(this.iframe&&this.wrapperElement&&this.iframeContainer&&(this.lastResizeWidth=this.iframe.clientWidth,void 0===this.currentResizeTimeout)){var r=e=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var t=this.inputLabelsIncluded?62:48;e<=482&&(t=2*t+1),this.iframeContainer.style.height="".concat(Math.round(t),"px"),this.iframe.height="".concat(Math.round(t),"px")}};r(null!==(t=this.lastResizeWidth)&&void 0!==t?t:0),this.currentResizeTimeout=window.setTimeout((()=>{var e;r(null!==(e=this.lastResizeWidth)&&void 0!==e?e:0),this.currentResizeTimeout=void 0}),100)}},this.id=Es(),this.iframeName="".concat("single-card","-").concat(this.id),this.paymentMessenger=new qc(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(t.includeInputLabels),this.initializeMessageBus(),this.fieldState=new Pl([In.CARD_NUMBER,In.EXPIRATION_DATE,In.CVV,In.POSTAL_CODE],"US"),this.context.addLocaleChangedListener(this.updateCardDetailText),ph(t),this.initialOptions=t,this.attach=this.withErrorHandling(this.attach.bind(this),Ol,"attach"),this.configure=this.withErrorHandling(this.configure.bind(this),Il,"configure"),this.tokenize=this.withErrorHandling(this.tokenize.bind(this),wl,"tokenize")}configure(){var e=arguments,t=this;return uh((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{};t.throwIfDestroyedOrNotAttached(),ph(r),t.metricsHandler.logConfigurationEvent("CONFIG_UPDATED",r),void 0!==r.includeInputLabels&&(t.inputLabelsIncluded=Boolean(r.includeInputLabels),t.onResize()),void 0!==r.style&&hh(r.style,t.id),yield t.paymentMessenger.request("configure",{includeInputLabels:t.inputLabelsIncluded,postalCode:r.postalCode,style:r.style,type:t.methodType})}))()}attach(e){var t=this;return uh((function*(){t.throwIfDestroyedOrAlreadyAttached(),t.status=As.ATTACHED,t.metricsHandler.logEvent("ATTACH:START"),t.metricsHandler.logConfigurationEvent("CONFIGURED",t.initialOptions);try{var r=Eu(e);t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent("ATTACH:OK","good")}catch(e){t.status=As.DETACHED;var n=fo(e,Ol);throw t.metricsHandler.logEvent("ATTACH:ERROR",n?"good":"bad"),e}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(As.DETACHED,"DETACHED")}destroy(){var e=this;return uh((function*(){if(e.status===As.DESTROYED)return!1;var t=yield e.detachElement(As.DESTROYED,"DESTROYED");return e.context.removeLocaleChangedListener(e.updateCardDetailText),t}))()}focus(e){var t=this;return uh((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(In).includes(e))throw new li(e);t.metricsHandler.logConfigurationEvent("FOCUSED",e);try{return yield t.paymentMessenger.request("setFocus",{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return uh((function*(){e.throwIfDestroyedOrNotAttached(),e.metricsHandler.logConfigurationEvent("CLEAR");try{return yield e.paymentMessenger.request("clear")}catch(t){e.errorLogger.captureException(t)}return!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logConfigurationEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(e,t){var r=this;return uh((function*(){var n=r.context.getFeatureFlagValues().one_shot_authentication_eligibility;try{var i,o,a,s=function(e,t){if(t&&void 0!==e){!function(e){var t=[];if(!ea(e))throw new Mo([jo("verificationDetails","object")]);if("billingContact"in e&&"object"==typeof e.billingContact||t.push(jo("verificationDetails.billingContact","object")),"intent"in e&&"string"==typeof e.intent&&["CHARGE","CHARGE_AND_STORE","STORE"].includes(e.intent)||t.push(jo("verificationDetails.intent","string")),"customerInitiated"in e&&"boolean"==typeof e.customerInitiated||t.push(jo("verificationDetails.customerInitiated","boolean")),"sellerKeyedIn"in e&&"boolean"==typeof e.sellerKeyedIn||t.push(jo("verificationDetails.sellerKeyedIn","boolean")),t.length>0)throw new Mo(t)}(e);var r=[];if(function(e){return"STORE"===e.intent}(e)?function(e,t){["amount","currencyCode","total"].forEach((r=>{r in e&&t.push({field:"verificationDetails.".concat(r),message:"The STORE intent does not support the ".concat(r," field."),type:"VALIDATION_ERROR"})}))}(e,r):function(e){return"total"in e}(e)?function(e,t){"object"!=typeof e.total?t.push(jo("verificationDetails.total","object")):"number"!=typeof e.total.amount?t.push(jo("verificationDetails.total.amount","number")):"string"!=typeof e.total.currencyCode&&t.push(jo("verificationDetails.total.currencyCode","string"))}(e,r):function(e,t){"string"!=typeof e.amount?t.push(jo("verificationDetails.amount","string")):ih.test(e.amount)||t.push({field:"verificationDetails.amount",message:"The amount needs to be a valid decimal monetary value.",type:"VALIDATION_ERROR"}),"string"!=typeof e.currencyCode&&t.push(jo("verificationDetails.currencyCode","string"))}(e,r),r.length>0)throw new Mo(r);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rh(Object(r),!0).forEach((function(t){nh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}}(e,n),c=function(e){if(void 0!==e){if("string"!=typeof e)throw new Mo([jo("cofToken","string")]);return e.trim().length>0?e:void 0}}(t);if(void 0===c&&r.throwIfDestroyedOrNotAttached(),r.tokenizeInProcess)throw new Ni([qs]);if(r.metricsHandler.logConfigurationEvent("TOKENIZE_CONFIGURED",{cofToken:c,verificationDetails:s}),void 0!==c?(o=c,a=lh(c)):(r.tokenizeInProcess=!0,i=yield r.paymentMessenger.request("requestCardNonceIfValidForm",{type:r.methodType}),r.tokenizeInProcess=!1,r.context.setPaymentMethodTrackingId(i.paymentMethodTrackingId),o=(a=function(e){var{card:t,billingContact:r,cardNonce:n}=e;return{details:{billing:r,card:t,method:Vn.CARD},status:Yn,token:n}}(i)).token),n&&void 0!==s){var u;(function(e,t,r){if(!e)return!1;if(void 0===r)return!1;var n=t.billingContact.postalCode;return void 0===n||n.toLowerCase()!==r.toLowerCase()})(r.context.getFeatureFlagValues().can_override_postal_code,s,null===(u=a.details)||void 0===u||null===(u=u.billing)||void 0===u?void 0:u.postalCode)&&(s.billingContact={postalCode:a.details.billing.postalCode},r.metricsHandler.logEvent("OSA_VERIFICATION:POSTAL_CODE_OVERRIDE"));var l=yield eh(r.context,s,o);void 0!==c&&(a=lh(c,l.token))}return a}catch(e){if(e instanceof Mo)return{errors:e.errors,status:$n};throw e}finally{r.tokenizeInProcess=!1}}))()}recalculateSize(){this.throwIfDestroyedOrNotAttached(),this.metricsHandler.logConfigurationEvent("RECALCULATED_SIZE"),this.onResize()}setError(e){var t=this;return uh((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(In).includes(e))throw new li(e);t.metricsHandler.logConfigurationEvent("SET_ERROR",e);try{return yield t.paymentMessenger.request("setError",{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return uh((function*(){var r=Tu(Fn.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",document.head);yield t.buildCardElement(e),yield t.paymentMessenger.request("loadCardsForm",{configuration:ah(ah({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield r}))()}addErrorMessage(e){this.fieldState.setErrorOnField(e),this.updateCardDetailText()}removeErrorMessage(e){this.fieldState.removeErrorFromField(e),this.updateCardDetailText()}addFocusMessage(e){this.fieldState.setFocusOnField(e),this.updateCardDetailText()}removeFocusMessage(e){this.fieldState.removeFocusFromField(e),setTimeout((()=>{this.fieldState.hasFocus()||this.updateCardDetailText()}),50)}removeFocusClass(){setTimeout((()=>{var e;this.fieldState.hasFocus()||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Su)}),50)}removeErrorClass(){var e;this.fieldState.hasError()||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Cu)}handleInputEvent(e){var{data:t}=e,r=t.payload.body;switch(r.eventType){case Cn.ERROR_CLASS_ADDED:var n;this.addErrorMessage(r.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(Cu);break;case Cn.ERROR_CLASS_REMOVED:this.removeErrorMessage(r.field),this.removeErrorClass();break;case Cn.FOCUS_CLASS_ADDED:var i;this.addFocusMessage(r.field),null===(i=this.wrapperElement)||void 0===i||i.classList.add(Su);break;case Cn.FOCUS_CLASS_REMOVED:this.removeFocusMessage(r.field),this.removeFocusClass()}super.dispatchEvent(r.eventType,r)}handleSetPostalCountry(e){var{data:t}=e;this.fieldState.setPostalCountry(t.payload.body.postalCountry)}handleBankIdentificationNumberChanged(e){var t=this;return uh((function*(){var{data:r}=e;if(t.context.getFeatureFlagValues().eager_three_ds_method_execution_eligibility){var n=r.payload.body.bankIdentificationNumber,i=yield t.paymentMessenger.request("REQUEST_THREE_DS_METHOD_INITIALIZATION",{applicationId:t.context.getSession().applicationId,bin:n,locationId:t.context.getSession().locationId});"string"==typeof i.three_ds_server_transaction_id&&""!==i.three_ds_server_transaction_id.trim()&&"string"==typeof i.three_ds_method_url&&""!==i.three_ds_method_url.trim()&&"string"==typeof i.three_ds_method_notification_url&&""!==i.three_ds_method_notification_url.trim()&&t.context.analyticsBackend.execute3DSMethod({threeDSServerTransId:i.three_ds_server_transaction_id,threeDsMethodNotificationUrl:i.three_ds_method_notification_url,threeDsMethodUrl:i.three_ds_method_url})}}))()}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t=this.handleSetPostalCountry.bind(this),r={bankIdentificationNumberChanged:this.handleBankIdentificationNumberChanged.bind(this),cardBrandChanged:e,errorClassAdded:e,errorClassRemoved:e,escape:e,focusClassAdded:e,focusClassRemoved:e,postalCodeChanged:e,setPostalCountry:t,submit:e};this.paymentMessenger.initializeMessageBus(r)}buildCardIframe(e){return Sl({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:Fn.SINGLE_CARD_IFRAME,title:this.context.getLocaleString().paymentMethods.cards.formTitle,width:"100%"},e)}hideCardElement(){var e;null===(e=this.wrapperElement)||void 0===e||e.setAttribute("hidden","")}showCardElement(){var e;null===(e=this.wrapperElement)||void 0===e||e.removeAttribute("hidden")}buildCardElement(e){var t=this;return uh((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=dh(t.id),t.wrapperElement.classList.add(Pd),t.context.getFeatureFlagValues().show_square_monochrome&&t.wrapperElement.classList.add(wu),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(Nd),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(Ad),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(Dd),t.wrapperElement.appendChild(t.cardDetail),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&hh(t.initialOptions.style,t.id)}))()}detachElement(e,t){var r=this;return uh((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request("destroy");return r.element&&(Cl(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logConfigurationEvent(t),i}catch(e){throw r.status=n,e}}))()}};class mh extends Wn{constructor(){super("A grant was not returned from CashApp and is required for tokenization"),this.name="CashAppPayGrantIsUndefinedError",Object.setPrototypeOf(this,mh.prototype)}}var gh=["CUSTOMER_INTERACTION","CUSTOMER_DISMISSED","CUSTOMER_REQUEST_APPROVED","CUSTOMER_REQUEST_DECLINED","CUSTOMER_REQUEST_FAILED"],vh=ks(Rs(Ls({shape:ks(Ms({legalValues:Oa})),size:ks(Ms({legalValues:Ia})),theme:ks(Ms({legalValues:wa})),values:ks(Ms({legalValues:wa})),width:ks(Ms({legalValues:Ta}))}),Ts({legalValues:[!1]})));function yh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Eh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yh(Object(r),!0).forEach((function(t){_h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _h(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bh(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Sh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){bh(o,n,i,a,s,"next",e)}function s(e){bh(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Ch=new Set(["USD"]),Ih="cash_app_pay_v1_element";class Oh extends Bs{constructor(e,t,r,n,i){if(super(n),this.methodType=Vn.CASH_APP_PAY,this.wasFirstInteractionCalled=!1,this.isMobile=!1,this.payKit=e,this.req=t,this.req.addPaymentMethodUsage("Cash App Pay"),this.context=n,this.paymentRequestLockController=i,this.paymentMessenger=new qc(this.context),this.tokenizeValidator=function(){return Promise.resolve(!0)},this.clickEventHandler=()=>{this.beginAuthorizationFlow()},!mo(this.session.locationId))throw new bi(cs.INVALID_CONFIG,"locationId");if(!mo(this.session.cashAppPayMerchantIdentifier))throw new bi(cs.INVALID_CONFIG,"merchantId");if(!Ch.has(this.req.currencyCode))throw new mi("".concat(this.req.currencyCode," is not supported by CashAppPay. Valid currencies are: ").concat([...Ch].join(", ")));if(yo(this.req.total.amount,this.req.currencyCode)<1)throw new mi("".concat(this.req.total.amount," is an invalid payment amount. Total amount should be greater than 0"));if(!r.redirectURL)throw new gi;for(var o of(this.cashAppPaymentRequestOptions=r,this.cashAppPayMerchantIdentifier=this.session.cashAppPayMerchantIdentifier,this.cashAppEventHandler={CUSTOMER_DISMISSED:()=>{this.dispatchEvent("customerDismissed",null)},CUSTOMER_INTERACTION:e=>this.registerExternalEventStart(e),CUSTOMER_REQUEST_APPROVED:e=>this.customerRequestApprovedEvent(e),CUSTOMER_REQUEST_DECLINED:()=>this.customerRequestDeclinedEvent(),CUSTOMER_REQUEST_FAILED:()=>this.customerRequestFailedEvent()},gh))this.payKit.addEventListener(o,this.cashAppEventHandler[o]);this.paymentRequestLockController.lock(this)}attach(e,t,r){var n=this;return Sh((function*(){var i;n.throwIfDestroyedOrAlreadyAttached();try{n.metricsHandler.logEvent("ATTACH:START"),i=function(e){var t=Us(vh).validate(e);if(!t.isValid)throw t.issues.some((e=>"invalid_type"===e.code))?new pi(t.issues.map((e=>[e.propertyPath,e.expected]))):new fi(t.issues.map((e=>[e.propertyPath,e.expected])));var r,n=e;return!1===n||void 0===n||!("values"in n)||null!==(r=n.theme)&&void 0!==r||(n.theme=n.values),n}(t)}catch(e){throw n.metricsHandler.logEvent("ATTACH:ERROR","good"),e}var o=!1===i;if(r&&(n.tokenizeValidator=r),"function"!=typeof n.tokenizeValidator)throw n.metricsHandler.logEvent("ATTACH:ERROR","good"),new vi;void 0===i||o||n.metricsHandler.logConfigurationEvent("CONFIGURED",t),n.status=As.ATTACHED,n.element=o?_u(e):Eu(e);try{var a=document.createElement("div");a.id=Ih,o?n.element.before(a):n.element.appendChild(a);var s="#".concat(Ih);n.renderController=yield n.payKit.render(s,{button:i,manage:!1}),n.element.addEventListener("click",n.clickEventHandler),n.metricsHandler.logEvent("ATTACH:OK","good")}catch(e){throw n.metricsHandler.logEvent("ATTACH:ERROR","bad"),n.status=As.DETACHED,e}}))()}destroy(){return this.status===As.DESTROYED?Promise.resolve(!1):(this.detachElement(As.DESTROYED,"DESTROYED"),this.paymentRequestLockController.unlock(this),this.payKit.restart(),gh.forEach((e=>this.payKit.removeEventListener(e,this.cashAppEventHandler[e]))),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(As.DETACHED,"DETACHED"),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logConfigurationEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}initializeCustomerRequest(){var e=this;return Sh((function*(){var t=Eh({actions:{payment:{amount:{currency:e.req.currencyCode,value:yo(e.req.total.amount,e.req.currencyCode)},scopeId:e.cashAppPayMerchantIdentifier}}},e.cashAppPaymentRequestOptions);try{yield e.payKit.customerRequest(t)}catch(e){var{name:r,message:n}=e;if("CashAppPayError"===r&&"redirectURL must be a valid URL"===n)throw new mi(n);throw e}}))()}customerRequestApprovedEvent(e){var t=this;return Sh((function*(){var r=yield t.createNonce(e);t.dispatchEvent("ontokenization",{tokenResult:r})}))()}customerRequestDeclinedEvent(){var e={status:Gn};this.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),this.dispatchEvent("ontokenization",{tokenResult:e})}customerRequestFailedEvent(){var e={errors:[new Ri("tokenizing Cash App Pay")],status:zn};this.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),this.dispatchEvent("ontokenization",{tokenResult:e})}createNonce(e){var t=this;return Sh((function*(){var{customerProfile:{cashtag:r},grants:n,referenceId:i}=e,o=n.payment,{total:{amount:a},currencyCode:s}=t.req;try{if(!o)throw new mh;var c=yield t.paymentMessenger.request("REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN",{applicationId:t.session.applicationId,cashAppPayData:{cashtag:r,grantId:o.grantId,isMobile:t.isMobile,referenceId:i,totalAmount:{amount:a,currency:s}},clientID:t.session.applicationId,instanceID:t.session.instanceId,locationID:t.session.locationId,paymentMethodTrackingID:t.context.getPaymentMethodTrackingId(),requestBillingContact:t.req.requestBillingContact,requestShippingContact:t.req.requestShippingContact,sessionID:t.session.sessionId,websdkVersion:Fn.VERSION});return t.metricsHandler.logEvent("EXTERNAL_SESSION:OK"),{details:{cashAppPay:{cashtag:r,referenceId:i},method:Vn.CASH_APP_PAY},status:Yn,token:c.token}}catch(e){var u;return t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),e instanceof Ni?u=e:(t.errorLogger.captureException(e),u=new Ri("tokenizing CashAppPay")),{errors:[u],status:zn}}}))()}beginAuthorizationFlow(){var e=this;return Sh((function*(){if(e.throwIfDestroyedOrNotAttached(),!e.renderController)throw new Ri("Could not begin Cash App Pay authorization flow");e.metricsHandler.logEvent("CASH_APP_PAY_CLICK:VALIDATING");try{(yield e.tokenizeValidator())?(e.renderController.begin(),e.metricsHandler.logEvent("CASH_APP_PAY_AUTH:START")):e.metricsHandler.logEvent("CASH_APP_PAY_CLICK:INVALID")}catch(t){throw e.metricsHandler.logEvent("CASH_APP_PAY_CLICK:ERROR"),t}}))()}registerExternalEventStart(e){this.metricsHandler.logEvent("EXTERNAL_SESSION:START"),this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent("FIRST_INTERACTION:OK")),this.isMobile=e.isMobile,this.dispatchEvent("customerInteraction",Eh({},e))}detachElement(e,t){this.renderController&&this.renderController.destroy();var r=document.getElementById(Ih);r&&r.remove(),this.element&&this.element.removeEventListener("click",this.clickEventHandler),this.status=e,this.metricsHandler.logConfigurationEvent(t)}}function wh(){return(wh=Sh((function*(){var e="https://kit.cashstaging.app/v1/pay.js",t="SQ_SELLER";return"sandbox"===Fn.env?(e="https://sandbox.kit.cash.app/v1/pay.js",t="CAS-CI_SQ_SELLER_SANDBOX"):"production"===Fn.env&&(e="https://kit.cash.app/v1/pay.js",t="CA-CI_SQ_SELLER"),(yield Jc.load("cash-app-pay",{src:e},"CashApp")).pay({clientId:t})}))).apply(this,arguments)}var Th={initialize:function(){return wh.apply(this,arguments)}};function Ah(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Ph(){var e;return e=function*(e,t){var r=co("https://sandbox.src.mastercard.com/srci/integration/2/lib.js",{locale:e,srcDpaId:t});return new(yield Jc.load("mastercard-ctp",{src:r},"Click2Pay"))},Ph=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Ah(o,n,i,a,s,"next",e)}function s(e){Ah(o,n,i,a,s,"throw",e)}a(void 0)}))},Ph.apply(this,arguments)}var Dh="https://src.mastercard.com/srci/integration/components/src-ui-kit/src-ui-kit.esm.js",Nh="https://src.mastercard.com/srci/integration/components/src-ui-kit/src-ui-kit.css",Rh={attachUiScripts:function(){if(null===document.querySelector('script[src="'.concat(Dh,'"]'))){var e=document.createElement("script");e.type="module",e.src=Dh,document.head.appendChild(e)}if(null===document.querySelector('link[href="'.concat(Nh,'"]'))){var t=document.createElement("link");t.rel="stylesheet",t.href=Nh,document.head.appendChild(t)}},initialize:function(e,t){return Ph.apply(this,arguments)}},xh=[oi,Oi,Ti,Ai,Pi,Di,Si,Ii];function kh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kh(Object(r),!0).forEach((function(t){Mh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mh(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jh(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Uh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){jh(o,n,i,a,s,"next",e)}function s(e){jh(o,n,i,a,s,"throw",e)}a(void 0)}))}}class Hh extends Bs{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=Vn.GIFT_CARD,this.onResize=e=>{if(this.iframe&&this.wrapperElement&&this.iframeContainer&&void 0===this.currentResizeTimeout){var t=()=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var e=this.inputLabelsIncluded?62:48;e+=2,this.iframe.style.height="".concat(e,"px"),this.iframeContainer.style.height="".concat(Math.round(e),"px")}};t(),this.currentResizeTimeout=window.setTimeout((()=>{t(),this.currentResizeTimeout=void 0}),100)}},this.id=Es(),this.iframeName="".concat("gift-card","-").concat(this.id),this.paymentMessenger=new qc(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(t.includeInputLabels),this.initializeMessageBus(),qh(t),this.initialOptions=t,this.fieldState=new Pl([wn.GIFT_CARD_NUMBER]),this.attach=this.withErrorHandling(this.attach.bind(this),xh,"attach"),this.configure=this.withErrorHandling(this.configure.bind(this),Il,"configure")}attach(e){var t=this;return Uh((function*(){t.throwIfDestroyedOrAlreadyAttached(),t.status=As.ATTACHED,t.metricsHandler.logEvent("ATTACH:START"),t.metricsHandler.logConfigurationEvent("CONFIGURED",t.initialOptions);try{var r=Eu(e);t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent("ATTACH:OK","good")}catch(e){t.status=As.DETACHED;var n=fo(e,xh)?"good":"bad";throw t.metricsHandler.logEvent("ATTACH:ERROR",n),e}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(As.DETACHED,"DETACHED")}destroy(){return this.status===As.DESTROYED?Promise.resolve(!1):this.detachElement(As.DESTROYED,"DESTROYED")}configure(e){var t=this;return Uh((function*(){t.throwIfDestroyedOrNotAttached(),qh(e),void 0!==e.includeInputLabels&&(t.inputLabelsIncluded=Boolean(e.includeInputLabels),t.onResize()),void 0!==e.style&&Bh(e.style,t.id),t.metricsHandler.logConfigurationEvent("CONFIG_UPDATED",e),yield t.paymentMessenger.request("giftCardConfigure",{includeInputLabels:t.inputLabelsIncluded,style:e.style,type:t.methodType})}))()}focus(e){var t=this;return Uh((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(wn).includes(e))throw new li(e);t.metricsHandler.logConfigurationEvent("FOCUSED",e);try{return yield t.paymentMessenger.request("giftCardSetFocus",{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return Uh((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request("giftCardClear")}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logConfigurationEvent("CLEAR"),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logConfigurationEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(){var e=this;return Uh((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProcess)throw new Ni([qs]);e.tokenizeInProcess=!0;try{var t=yield e.paymentMessenger.request("giftCardRequestCardNonceIfValidForm",{type:e.methodType});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),function(e){var{card:t,cardNonce:r}=e;return{details:{giftCard:t,method:Vn.GIFT_CARD},status:Yn,token:r}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof Mo)return{errors:t.errors,status:$n};throw fo(t,wl)?t:(e.errorLogger.captureException(t),Uo())}}))()}setError(e){var t=this;return Uh((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(wn).includes(e))throw new li(e);t.metricsHandler.logConfigurationEvent("SET_ERROR",e);try{return yield t.paymentMessenger.request("giftCardSetError",{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return Uh((function*(){var r=Tu(Fn.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",document.head);yield t.buildCardElement(e),yield t.paymentMessenger.request("loadGiftCardsForm",{configuration:Lh(Lh({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield r}))()}buildCardElement(e){var t=this;return Uh((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=Fh(t.id),t.wrapperElement.classList.add(Pd),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(Nd),e.appendChild(t.wrapperElement),t.context.getFeatureFlagValues().show_square_monochrome&&t.wrapperElement.classList.add(wu),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(Ad),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(Dd),t.wrapperElement.appendChild(t.cardDetail),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&Bh(t.initialOptions.style,t.id)}))()}buildCardIframe(e){return Sl({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:Fn.GIFT_CARD_IFRAME,title:this.context.getLocaleString().paymentMethods.giftCards.formTitle,width:"100%"},e)}hideCardElement(){var e;null===(e=this.wrapperElement)||void 0===e||e.setAttribute("hidden","")}showCardElement(){var e;null===(e=this.wrapperElement)||void 0===e||e.removeAttribute("hidden")}updateCardDetailText(){if(this.cardDetail){var{message:e,isError:t}=this.fieldState.fieldHelperMessage(this.context.getLocaleString());this.cardDetail.classList.toggle(Rd,t),this.cardDetail.classList.toggle(xd,!t),this.cardDetail.textContent!==e&&(this.cardDetail.textContent=e),this.cardDetail.classList.toggle(kd,e.length>0)}}addErrorMessage(e){this.fieldState.setErrorOnField(e),this.updateCardDetailText()}removeErrorMessage(e){this.fieldState.removeErrorFromField(e),this.updateCardDetailText()}addFocusMessage(e){this.fieldState.setFocusOnField(e),this.updateCardDetailText()}removeFocusMessage(e){this.fieldState.removeFocusFromField(e),setTimeout((()=>{this.fieldState.hasFocus()||this.updateCardDetailText()}),50)}handleInputEvent(e){var{data:t}=e,r=t.payload.body;switch(r.eventType){case Tn.ERROR_CLASS_ADDED:var n;this.addErrorMessage(r.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(Cu);break;case Tn.ERROR_CLASS_REMOVED:this.removeErrorMessage(r.field),this.removeErrorClass();break;case Tn.FOCUS_CLASS_ADDED:var i;this.addFocusMessage(r.field),null===(i=this.wrapperElement)||void 0===i||i.classList.add(Su);break;case Tn.FOCUS_CLASS_REMOVED:this.removeFocusMessage(r.field),this.removeFocusClass()}super.dispatchEvent(r.eventType,r)}removeFocusClass(){setTimeout((()=>{var e;this.fieldState.hasFocus()||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Su)}),50)}removeErrorClass(){var e;this.fieldState.hasError()||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Cu)}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t={cardBrandChanged:e,errorClassAdded:e,errorClassRemoved:e,escape:e,focusClassAdded:e,focusClassRemoved:e,submit:e};this.paymentMessenger.initializeMessageBus(t)}detachElement(e,t){var r=this;return Uh((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request("giftCardDestroy");return r.element&&(Cl(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logConfigurationEvent(t),i}catch(e){throw r.status=n,e}}))()}}function Fh(e){return"".concat("gift-card-wrapper","-").concat(e)}function Bh(e,t){var r=function(e){return"".concat("sq-gift-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=Kd(e,Fh(t))}function qh(e){var t={includeInputLabels:e=>"boolean"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(!(r in t))throw new di(r);if(!t[r](n))throw new hi(r,n)}))}class Vh extends Wn{constructor(e){super("The event listener for ".concat(e," timed out (30 seconds). If you've returned a promise, ensure it is resolving")),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,Vh.prototype)}}function Gh(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}class zh{constructor(){this.listenerRegistry=new vs}addEventListener(e,t){this.listenerRegistry.addEventListener(e,t)}removeEventListener(e,t){this.listenerRegistry.removeEventListener(e,t)}dispatchEvent(e,t,r){var n,i=this;return(n=function*(){var n=new Ji(e,t),o=i.listenerRegistry.listenersForType(e),a=function*(){var t,i;try{t=s(n)}catch(t){throw new ci(e,fs(t))}if(t instanceof Promise)try{i=yield fn((()=>t),3e4,new Vh(e))}catch(t){if(t instanceof Vh)throw t;throw new ci(e,fs(t))}else i=t;r&&r(i)};for(var s of o)yield*a()},function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){Gh(o,r,i,a,s,"next",e)}function s(e){Gh(o,r,i,a,s,"throw",e)}a(void 0)}))})()}hasEventListener(e){return this.listenerRegistry.hasEventListener(e)}}var $h={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua And Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Finland",AZ:"Azerbaijan",BA:"Bosnia And Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria (rep.)",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius, And Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (keeling) Islands",CD:"Congo (dem. Rep.)",CF:"Central African Republic",CG:"Congo (rep.)",CH:"Switzerland",CI:"Cote D'ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Rep.",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Rep.",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (malvinas)",FM:"Micronesia (federated State Of)",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada (west Indies)",GE:"Georgia",GF:"French Guiana",GG:"Channel Islands",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia",GT:"Guatemala",GU:"Guam",GW:"Guinea-bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard And Mcdonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary (rep.)",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle Of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Channel Islands",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts And Nevis",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao (people's Dem. Rep.)",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Rep. Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru Central Pacific",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama (rep.)",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"St. Pierre And Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Republic Of Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SE:"Sweden",SG:"Rep. Of Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard And Jan Mayen Islands",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome And Principe",SV:"El Salvador",SX:"Sint Maarten",SZ:"Swaziland",TC:"Turks And Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad And Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania (united Rep.)",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican",VC:"Saint Vincent And The Grenadines (antilles)",VE:"Venezuela",VG:"Virgin Islands (british)",VI:"Virgin Islands (u.s.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis And Futuna Islands",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function Yh(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Wh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Yh(o,n,i,a,s,"next",e)}function s(e){Yh(o,n,i,a,s,"throw",e)}a(void 0)}))}}function Kh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jh(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Xh{constructor(e,t,r){this.eventTarget=new zh,this.metricsBuffer=[],this.localeStrings=t,this._requestBillingContact=Boolean(e.requestBillingContact),this._requestShippingContact=Boolean(e.requestShippingContact),this._countryCode=e.countryCode,this._currencyCode=e.currencyCode,this._lineItems=e.lineItems,this._shippingLineItems=e.shippingLineItems,this._taxLineItems=e.taxLineItems,this._discounts=e.discounts,this._total=e.total,this._shippingOptions=e.shippingOptions,this._shippingContact=e.shippingContact,this._pickupContact=e.pickupContact,this.updateLock=r,this.paymentMethodUsages=[],ep(this)}get requestBillingContact(){return this._requestBillingContact}get requestShippingContact(){return this._requestShippingContact}get countryCode(){return this._countryCode}get currencyCode(){return this._currencyCode}get lineItems(){return this._lineItems}get pickupContact(){return this._pickupContact}get shippingLineItems(){return this._shippingLineItems}get taxLineItems(){return this._taxLineItems}get discounts(){return this._discounts}get total(){return this._total}get shippingOptions(){return this._shippingOptions}get shippingContact(){return this._shippingContact}addPaymentMethodUsage(e){this.paymentMethodUsages.push(e)}update(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kh(Object(r),!0).forEach((function(t){Jh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({countryCode:this.countryCode,currencyCode:this.currencyCode,discounts:this.discounts,lineItems:this.lineItems,pickupContact:this.pickupContact,requestBillingContact:this.requestBillingContact,requestShippingContact:this.requestShippingContact,shippingContact:this.shippingContact,shippingLineItems:this.shippingLineItems,shippingOptions:this.shippingOptions,taxLineItems:this.taxLineItems,total:this.total},e),r=new Xh(t,this.localeStrings,this.updateLock);if(ep(r),this.paymentMethodUsages.includes("AfterpayClearpay"))try{al(r)}catch(e){var n;null===(n=this.metricsHandler)||void 0===n||n.logValidationEvent("REQUEST_AFTERPAY_INVALID",{exceptionMessage:fs(e),paymentMethodUsages:this.paymentMethodUsages})}return!this.updateLock.isLocked&&(void 0!==e.requestBillingContact&&(this._requestBillingContact=Boolean(e.requestBillingContact)),void 0!==e.requestShippingContact&&(this._requestShippingContact=Boolean(e.requestShippingContact)),void 0!==e.countryCode&&(this._countryCode=e.countryCode),void 0!==e.currencyCode&&(this._currencyCode=e.currencyCode),e.lineItems&&(this._lineItems=e.lineItems),e.shippingLineItems&&(this._shippingLineItems=e.shippingLineItems),e.taxLineItems&&(this._taxLineItems=e.taxLineItems),e.discounts&&(this._discounts=e.discounts),e.total&&(this._total=e.total),e.pickupContact&&(this._pickupContact=e.pickupContact),e.shippingOptions&&(this._shippingOptions=e.shippingOptions),e.shippingContact&&(this._shippingContact=e.shippingContact),this.eventTarget.dispatchEvent(Pu.UPDATE,r),this.logMetrics("CONFIG_UPDATED",t),!0)}addEventListener(e,t){switch(ho(Bn).includes(e)&&this.logMetrics("EVENT_LISTENER_ADDED",e),e){case Bn.SHIPPING_CONTACT_CHANGED:this.shippingContactEventListener(t);break;case Bn.SHIPPING_OPTION_CHANGED:this.shippingOptionEventListener(t);break;case Pu.UPDATE:this.updateEventListener(t);break;case qn.AFTERPAY_SHIPPING_ADDRESS_CHANGED:this.afterpayShippingContactEventListener(t);break;case qn.AFTERPAY_SHIPPING_OPTION_CHANGED:this.afterpayShippingOptionEventListener(t);break;default:throw new ds("PaymentRequest.addEventListener","event","PaymentRequestEvent")}}dispatchEvent(e,t,r){return this.eventTarget.dispatchEvent(e,t,(n=>{if(e===qn.AFTERPAY_SHIPPING_ADDRESS_CHANGED)return function(e){var t=Us(Vu).validate(e,"paymentRequestUpdate");if(!t.isValid)throw new si(t.issues.map((e=>[e.propertyPath,e.expected])))}(n),void r(n);if(e!==qn.AFTERPAY_SHIPPING_OPTION_CHANGED)!function(e){var t=Us(Lu).validate(e,"paymentRequestUpdate");if(!t.isValid)throw new si(t.issues.map((e=>[e.propertyPath,e.expected])))}(n),r(n);else try{this.logMetrics("SHIPPING_OPTION_UPDATE_RECEIVED",n),function(e){var t=Us(Gu).validate(e,"paymentRequestUpdate");if(!t.isValid)throw new si(t.issues.map((e=>[e.propertyPath,e.expected])))}(n),r(n)}catch(e){if("requireValidation"in t&&!0===t.requireValidation||!(e instanceof si))throw e}}))}hasEventListener(e){return this.eventTarget.hasEventListener(e)}setMetricsHandler(e){this.metricsHandler=e,this.metricsBuffer.length>0&&(this.metricsBuffer.forEach((t=>{var[r,n]=t;e.logConfigurationEvent(r,n)})),this.metricsBuffer=[])}shippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(Bn.SHIPPING_CONTACT_CHANGED,function(){var r=Wh((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.contactError}}}));return function(e){return r.apply(this,arguments)}}())}shippingOptionEventListener(e){var t=this;this.eventTarget.addEventListener(Bn.SHIPPING_OPTION_CHANGED,function(){var r=Wh((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingOptionUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(qn.AFTERPAY_SHIPPING_ADDRESS_CHANGED,function(){var r=Wh((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingOptionEventListener(e){var t=this;this.eventTarget.addEventListener(qn.AFTERPAY_SHIPPING_OPTION_CHANGED,function(){var r=Wh((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}updateEventListener(e){this.eventTarget.addEventListener(Pu.UPDATE,(t=>{e(t.detail)}))}logMetrics(e,t){this.metricsHandler?this.metricsHandler.logConfigurationEvent(e,t):this.metricsBuffer.push([e,t])}}function Zh(e){return Boolean(e.shippingOptions&&e.shippingOptions.length>0)}var Qh=Ls({countryCode:Ms(),currencyCode:Ms(),total:Ls({amount:Ms(),label:Ms()})});function ep(e){var{isValid:t,issues:r}=Us(Qh).validate(e),n=r.map((e=>[e.propertyPath,e.expected])),i=[];if(e.countryCode in $h||i.push("Country code '".concat(e.countryCode,"' is not a valid ISO country code.")),!t||i.length>0)throw new ai(n,i)}function tp(e,t){return new Intl.NumberFormat(c.windowNavigatorLanguages,{currency:t,style:"currency"}).format(Number.parseFloat(e))}function rp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function np(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rp(Object(r),!0).forEach((function(t){ip(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ip(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var op=["PAN_ONLY","CRYPTOGRAM_3DS"],ap=["AMEX","DISCOVER","JCB","MASTERCARD","VISA"];function sp(e){return{label:e.label,price:e.amount,status:!0===e.pending?"ESTIMATED":"FINAL",type:"LINE_ITEM"}}function cp(e,t){var r=null!=t?t:e;return r?r.map((e=>sp(e))):[]}function up(e,t){return t.map((t=>function(e,t){return{description:tp(t.amount,e),id:t.id,label:t.label}}(e,t)))}function lp(e,t,r,n){var i=null!=n?n:r;if(i&&i.length>0){var o={shippingOptions:up(e,i)},a=i.some((e=>e.id===t));return a&&(o.defaultSelectedOptionId=t),o}}function dp(e,t){return null==t?void 0:t.find((t=>t.id===e))}function hp(e,t,r,n,i,o){var{countryCode:a,currencyCode:s,total:c,lineItems:u,taxLineItems:l,discounts:d,requestBillingContact:h,requestShippingContact:p,shippingOptions:f}=t,m=Zh(t),g=Boolean(p||m),v=np(np({},e),{},{emailRequired:Boolean(h),merchantInfo:i,shippingAddressRequired:g,shippingOptionRequired:m,transactionInfo:{countryCode:a,currencyCode:s,totalPrice:c.amount,totalPriceLabel:c.label,totalPriceStatus:n}});if(u&&u.length>0&&(v.transactionInfo.displayItems=cp([],Mu({discounts:d,lineItems:u,taxLineItems:l},t))),g&&(v.shippingAddressParameters={phoneNumberRequired:!0}),m){var y=lp(s,o,[],f);y&&(v.shippingOptionParameters=y)}return r.length>0&&(v.callbackIntents=r),v}function pp(e,t){var r=[];return void 0!==e.error&&r.push({intent:t,message:e.error,reason:Gi.SHIPPING_ADDRESS_UNSERVICEABLE}),e.shippingErrors&&Object.entries(e.shippingErrors).forEach((e=>{var[n,i]=e;r.push({intent:t,message:"".concat(n,": ").concat(i),reason:Gi.SHIPPING_ADDRESS_INVALID})})),r}function fp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fp(Object(r),!0).forEach((function(t){gp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gp(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vp(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function yp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){vp(o,n,i,a,s,"next",e)}function s(e){vp(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Ep=["#google"];class _p extends Bs{constructor(e,t,r,n,i){var o;super(r),this.methodType=Vn.GOOGLE_PAY,this.shippingOptions=void 0,this.wasFirstInteractionCalled=!1,this.validateConfiguration(),this.logDebugInfoIfEnabled("init"),this.paymentRequestLockController=i,this.req=t,this.req.addPaymentMethodUsage("Google Pay"),this.merchantInfo=n,this.element=null,this.paymentMethodMessenger=new qc(r),Zh(this.req)&&(this.shippingOptions=this.req.shippingOptions,this.selectedShippingOptionId=null===(o=this.req.shippingOptions)||void 0===o?void 0:o[0].id),this.callbackIntents=function(e,t){var r=[],n=Zh(e)&&t.includes(Bn.SHIPPING_OPTION_CHANGED),i=e.requestShippingContact&&t.includes(Bn.SHIPPING_CONTACT_CHANGED);return n?r.push("SHIPPING_ADDRESS","SHIPPING_OPTION"):i&&r.push("SHIPPING_ADDRESS"),(!c.isAndroid()||n||i)&&r.push("PAYMENT_AUTHORIZATION"),r}(this.req,this.handlers);var a,s,u,l,d=function(e,t,r){var n="TEST";"production"===Fn.env&&(n="PRODUCTION");var i={environment:n,merchantInfo:r},o=e.includes("SHIPPING_OPTION")||e.includes("SHIPPING_ADDRESS");if(!c.isAndroid()||o){var a={onPaymentAuthorized:()=>({transactionState:"SUCCESS"})};o&&(a.onPaymentDataChanged=t),i.paymentDataCallbacks=a}return i}(this.callbackIntents,this.onPaymentDataChanged.bind(this),this.merchantInfo);this.googlePayClient=new e.api.PaymentsClient(d),this.isReadyToPayRequest=(a=this.session.applicationId,s=this.req.requestBillingContact,u=this.context.getFeatureFlagValues().can_use_interac,l=[...ap],u&&l.push("INTERAC"),{allowedPaymentMethods:[{parameters:{allowedAuthMethods:op,allowedCardNetworks:l,billingAddressParameters:{format:s?"FULL":"MIN",phoneNumberRequired:Boolean(s)},billingAddressRequired:!0},tokenizationSpecification:{parameters:{gateway:"square",gatewayMerchantId:a},type:"PAYMENT_GATEWAY"},type:"CARD"}],apiVersion:2,apiVersionMinor:0})}get handlers(){var e=[];return this.req.hasEventListener(Bn.SHIPPING_OPTION_CHANGED)&&e.push(Bn.SHIPPING_OPTION_CHANGED),this.req.hasEventListener(Bn.SHIPPING_CONTACT_CHANGED)&&e.push(Bn.SHIPPING_CONTACT_CHANGED),e}attach(e,t){var r=this;return yp((function*(){r.throwIfDestroyedOrAlreadyAttached(),r.status=As.ATTACHED,r.metricsHandler.logEvent("ATTACH:START"),r.metricsHandler.logConfigurationEvent("CONFIGURED",t);try{r.element=_u(e)}catch(e){throw r.status=As.DETACHED,r.metricsHandler.logEvent("ATTACH:ERROR","good"),e}r.isReadyToPay=yield r.checkIfReadyToPay("ATTACH:ERROR",!0);var{buttonColor:n,buttonSizeMode:i,buttonType:o,buttonBorderType:a,buttonRadius:s}=null!=t?t:{},{show_square_monochrome:c}=r.context.getFeatureFlagValues(),u=c?20:void 0,l={buttonBorderType:null!=a?a:c?"no_border":"default_border",buttonColor:null!=n?n:Bi.DEFAULT,buttonRadius:null!=s?s:u,buttonSizeMode:null!=i?i:qi.STATIC,buttonType:null!=o?o:Vi.LONG,onClick:()=>{}};try{var d=r.googlePayClient.createButton(l);r.element.appendChild(d),r.metricsHandler.logEvent("ATTACH:OK","good")}catch(e){throw r.status=As.DETACHED,r.maybeHandleDeveloperError(e,"createButton","ATTACH:ERROR",!0),new bi(cs.UNKNOWN)}}))()}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(As.DETACHED,"DETACHED"),Promise.resolve(!0)}destroy(){return this.status===As.DESTROYED?Promise.resolve(!1):(this.detachElement(As.DESTROYED,"DESTROYED"),Promise.resolve(!0))}tokenize(e){var t=this;return yp((function*(){var r,n;t.throwIfDestroyed(),t.handleFirstInteraction(),t.metricsHandler.logEvent("EXTERNAL_SESSION:START"),t.isReadyToPay=null!==(r=t.isReadyToPay)&&void 0!==r?r:yield t.checkIfReadyToPay("EXTERNAL_SESSION:ERROR",!1),t.paymentRequestLockController.lock(t);try{n=yield t.loadPaymentData(),delete t.googlePayTokenDeferred,t.metricsHandler.logEvent("EXTERNAL_SESSION:OK")}catch(e){if(delete t.googlePayTokenDeferred,t.paymentRequestLockController.unlock(t),function(e){return null!==e&&"object"==typeof e&&"statusCode"in e}(e)&&"CANCELED"===e.statusCode)return t.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),{status:Gn};throw t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),t.errorLogger.captureException(t.asInternalError(e),{context:"loadPaymentData"}),new Ri("tokenizing Google Pay.")}var{token:i,details:o}=yield t.requestGooglePayCardNonce(n);if(t.context.getFeatureFlagValues().one_shot_authentication_google_pay){var a,s=mp(mp({},e),{},{amount:t.req.total.amount,billingContact:null!==(a=o.billing)&&void 0!==a?a:{},currencyCode:t.req.currencyCode,customerInitiated:!0,intent:"CHARGE",sellerKeyedIn:!1});yield eh(t.context,s,i)}return{details:o,status:Yn,token:i}}))()}validateConfiguration(){var e=Ep.join(", ");if(document.querySelectorAll(e).length>0)throw new wi(this.methodType,e)}logDebugInfoIfEnabled(e){"GOOGLE_PAY"===this.context.getFeatureFlagValues().enable_payment_debug_output&&console.debug(e)}checkIfReadyToPay(e,t){var r=this;return yp((function*(){var n=!1;try{var{result:i}=yield r.googlePayClient.isReadyToPay(r.isReadyToPayRequest);(n=i)||r.metricsHandler.logEvent(e,t?"good":void 0)}catch(n){r.maybeHandleDeveloperError(n,"isReadyToPay",e,t)}if(n){var o=r.callbackIntents.length>0?"NOT_CURRENTLY_KNOWN":"FINAL";try{var a=hp(r.isReadyToPayRequest,r.req,r.callbackIntents,o,r.merchantInfo,r.selectedShippingOptionId);return r.logDebugInfoIfEnabled(a),r.googlePayClient.prefetchPaymentData(a),n}catch(n){r.maybeHandleDeveloperError(n,"prefetchPaymentData",e,t)}}throw new bi(cs.GOOGLE_PAY_BROWSER_NOT_SUPPORTED)}))()}loadPaymentData(){if(this.googlePayTokenDeferred)return this.googlePayTokenDeferred;var e=hp(this.isReadyToPayRequest,this.req,this.callbackIntents,"FINAL",this.merchantInfo,this.selectedShippingOptionId);return this.logDebugInfoIfEnabled(e),this.googlePayTokenDeferred=this.googlePayClient.loadPaymentData(e),this.googlePayTokenDeferred}onPaymentDataChanged(e){switch(e.callbackTrigger){case"INITIALIZE":case"SHIPPING_ADDRESS":return this.onPaymentDataChangedShippingAddress(e);case"SHIPPING_OPTION":return this.onPaymentDataChangedShippingOption(e);default:return this.errorLogger.captureException(new Ao("Unknown callbackTrigger: ".concat(e.callbackTrigger),Vn.GOOGLE_PAY)),Promise.resolve({})}}onPaymentDataChangedShippingOption(e){var t=this;return yp((function*(){var r;t.selectedShippingOptionId=null===(r=e.shippingOptionData)||void 0===r?void 0:r.id;var{updatedOptionRequest:n,optionErrors:i}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,t.shippingOptions);return t.paymentDataChangedComplete(n,i)}))()}dispatchShippingOptionChanged(e,t){var r=this,n={optionErrors:[],updatedOptionRequest:{}};if(!this.handlers.includes(Bn.SHIPPING_OPTION_CHANGED))return Promise.resolve(n);var i=dp(e,t);return i?this.status===As.DESTROYED?Promise.resolve({optionErrors:[{intent:"SHIPPING_OPTION",message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Gi.PAYMENT_METHOD_DESTROYED}],updatedOptionRequest:{}}):new Promise((e=>{this.req.dispatchEvent(Bn.SHIPPING_OPTION_CHANGED,{contactOrOption:i},(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.metricsHandler.logConfigurationEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",mp(mp({},t),{},{eventName:Bn.SHIPPING_OPTION_CHANGED})),r.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),e({optionErrors:pp(t,"SHIPPING_OPTION"),updatedOptionRequest:t})}))})):Promise.resolve(n)}onPaymentDataChangedShippingAddress(e){var t=this;return yp((function*(){var{updatedContactRequest:r,contactErrors:n}=yield t.dispatchShippingContactChanged(e);if(void 0===t.req.shippingOptions||0===t.req.shippingOptions.length)return t.paymentDataChangedComplete(r,n);var i,{shippingOptions:o}=t;r.shippingOptions?(o=r.shippingOptions,t.selectedShippingOptionId=r.shippingOptions[0].id):t.selectedShippingOptionId=null===(i=t.shippingOptions)||void 0===i?void 0:i[0].id;var{updatedOptionRequest:a,optionErrors:s}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,o),c=mp(mp({},r),a),u=[...n,...s];return t.paymentDataChangedComplete(c,u)}))()}dispatchShippingContactChanged(e){var t=this,r={contactErrors:[],updatedContactRequest:{}};return new Promise((n=>{var i;void 0!==e.shippingAddress&&this.handlers.includes(Bn.SHIPPING_CONTACT_CHANGED)?this.status!==As.DESTROYED?this.req.dispatchEvent(Bn.SHIPPING_CONTACT_CHANGED,{contactOrOption:(i=e.shippingAddress,{city:i.locality,countryCode:i.countryCode,postalCode:i.postalCode,state:i.administrativeArea})},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.metricsHandler.logConfigurationEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",mp(mp({},e),{},{eventName:Bn.SHIPPING_CONTACT_CHANGED})),t.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),n({contactErrors:pp(e,"SHIPPING_ADDRESS"),updatedContactRequest:e})})):n({contactErrors:[{intent:"SHIPPING_ADDRESS",message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Gi.PAYMENT_METHOD_DESTROYED}],updatedContactRequest:{}}):n(r)}))}paymentDataChangedComplete(e,t){e.shippingOptions&&e.shippingOptions.length>0&&(this.shippingOptions=e.shippingOptions);var r=function(e,t,r,n){var i,{total:o,countryCode:a,currencyCode:s}=t,c=r,u=sp(null!==(i=e.total)&&void 0!==i?i:o),l={countryCode:a,currencyCode:s,totalPrice:u.price,totalPriceLabel:u.label,totalPriceStatus:u.status},d=cp(Mu(t),Mu(e,t));d.length>0&&(l.displayItems=d);var h={newTransactionInfo:l},p=lp(s,n,c,e.shippingOptions);return p&&(h.newShippingOptionParameters=p),h}(e,this.req,this.shippingOptions,this.selectedShippingOptionId);return t.length>0&&(r.error=t[0]),r}requestGooglePayCardNonce(e){var t=this;return yp((function*(){var r=dp(t.selectedShippingOptionId,t.shippingOptions);try{var n=yield t.paymentMethodMessenger.request("REQUEST_GOOGLE_PAY_CARD_NONCE",e);return t.context.setPaymentMethodTrackingId(n.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,t.paymentRequestLockController.unlock(t),function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,a={details:{card:r,method:Vn.GOOGLE_PAY},token:n};return i&&(a.details.shipping={contact:i},t&&(a.details.shipping.option=t)),o&&(a.details.card&&(a.details.card.billing=o),a.details.billing=o),a}(n,r)}catch(e){throw t.paymentRequestLockController.unlock(t),e instanceof Ni?e:(t.errorLogger.captureException(e),Uo())}}))()}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent("FIRST_INTERACTION:OK"))}detachElement(e,t){this.element&&(this.element.innerHTML=""),this.status=e,this.metricsHandler.logConfigurationEvent(t)}asInternalError(e){return e instanceof Error?e:new Ao(JSON.stringify(e),this.methodType)}maybeHandleDeveloperError(e,t,r,n){var i=function(e){if(e instanceof Error)return"SecurityError"===e.name?new bi(cs.MISC_THIRD_PARTY_IFRAME_NOT_ALLOWED):void 0;var t=e;return"DEVELOPER_ERROR"===t.statusCode&&t.statusMessage.includes("secure context")?new bi(cs.GOOGLE_PAY_REQUIRES_HTTPS):void 0}(e),o=void 0!==i?"good":"bad";if(this.metricsHandler.logEvent(r,n?o:void 0),void 0!==i)throw i;this.errorLogger.captureException(this.asInternalError(e),{context:t})}}function bp(){return(bp=yp((function*(e,t){return{authJwt:(yield e.request("GENERATE_GOOGLE_PAY_AUTH_TOKEN",{session:t})).token,merchantId:"05498866192997955200",merchantName:t.merchantName}}))).apply(this,arguments)}var Sp=function(e){var t=function(e,t){return bp.apply(this,arguments)}(e.messenger,e.getSession()),r=Jc.load("google-link",{src:"https://pay.google.com/gp/p/js/pay.js"},"google.payments");return Promise.all([r,t])};class Cp{constructor(){this.lockSet=new Set}get isLocked(){return this.lockSet.size>0}lock(e){this.lockSet.add(e)}unlock(e){this.lockSet.delete(e)}}class Ip extends Error{constructor(e,t){super(e),this.name=t,this.type="VERIFY_BUYER_DEVELOPER_ERROR"}}const Op=function(){return new Ip("The Analytics library must be initialized with analyticsParameters to call verifyBuyer.","AnalyticsParametersRequiredError")},wp=function(e,t){return new Ip(`The Analytics '${e}' argument must be of type '${t}'`,"InvalidArgumentError")},Tp=function(e,t){return new Ip(`An element with selector ${e} must be of type '${t}'`,"InvalidElementTypeError")},Ap=function(e,t,r){return new Ip(`The '${e}' function '${t}' argument must be of type '${r}'.`,"InvalidFunctionArgumentError")},Pp=function(e,t){return new Ip(`The '${e}' '${t}' callback must be a function.`,"InvalidFunctionCallbackError")},Dp=function(e){return new Ip(`The Analytics '${e}' argument is required.`,"MissingArgumentError")},Np=function(e,t){return new Ip(`The '${e}' '${t}' is required when verificationDetails.intent is 'CHARGE'.`,"MissingChargeVerificationArgumentError")},Rp=function(e,t){return new Ip(`An element with selector '${e}' attribute '${t}' is required`,"MissingElementAttributeError")},xp=function(e){return new Ip(`An element with selector '${e}' cannot be found.`,"MissingElementError")},kp=function(e,t){return new Ip(`The '${e}' '${t}' argument is required.`,"MissingFunctionArgumentError")},Lp=function(e,t){return new Ip(`The '${e}' '${t}' callback is required.`,"MissingFunctionCallbackError")},Mp=function(){return new Ip("One of analyticsParameters.locationId or analyticsParameters.accountId must be specified.","NoIdsError")},jp=function(e,t,r,n,i=!1){return new Ip(`The '${e}' function '${t}' argument must be within range: ${r} and ${n} (${(i?"inclusive":"exclusive")+" of upper limit"}).`,"OutOfRangeArgumentError")},Up=function(){return new Ip("Only one of analyticsParameters.locationId or analyticsParameters.accountId can be specified.","TooManyIdsError")},Hp=function(){const e=new Error("An unknown error has occurred");return e.name="UnexpectedAnalyticsClientError",e};class Fp extends Error{constructor(e="Unknown error",t){super(e),void 0!==t&&(this.token=t),this.name="AnalyticsError"}}class Bp extends Fp{constructor(){super("Three ds method timed out while waiting for a response"),this.name="ThreeDSMethodTimeoutError"}}class qp extends Fp{constructor(){super("Form is no longer connected"),this.name="ThreeDSMethodFormError"}}class Vp extends Fp{constructor(e){super("Three ds method failed with unexpected error"),this.name="ThreeDSMethodError","string"==typeof e&&""!==e&&(this.message+=`: ${e}`)}}class Gp extends Fp{constructor(e,t){super(`Received 3DS method response with transaction ID ${e}, expected ${t}`),this.name="ThreeDSMethodTransactionIdError"}}class zp{constructor(e){this.iframeInputs=e,this.eventListenerReference=this.handleResponse.bind(this)}async handle(){const e=new Promise(((e,t)=>{this.threeDSPromiseResolve=e,this.threeDSPromiseReject=t}));return this.build(),this.submit(),e}build(){void 0!==this.iframeInputs.iframeSelector&&document.querySelector(this.iframeInputs.iframeSelector)?this.iframe=document.querySelector(this.iframeInputs.iframeSelector):this.buildDefault();const e=`${this.iframeInputs.baseID}-form`;if(document.getElementById(e))this.form=document.getElementById(e);else{this.form=document.createElement("form"),this.form.setAttribute("id",e),this.form.setAttribute("name",`${this.iframeInputs.baseName}Form`),this.form.setAttribute("method","POST"),this.form.setAttribute("action",this.iframeInputs.notificationURL),this.form.setAttribute("target",this.iframe.name);const t=document.createElement("input");t.setAttribute("name",this.iframeInputs.notificationData.name),t.setAttribute("value",this.iframeInputs.notificationData.data),t.setAttribute("type","hidden"),this.form.appendChild(t),document.body.appendChild(this.form)}window.addEventListener("message",this.eventListenerReference)}buildDefault(){const e=`${this.iframeInputs.baseID}-modal`;document.getElementById(e)?this.modal=document.getElementById(e):(this.modal=document.createElement("div"),this.modal.id=e,this.modal.classList.add("square_threeds_modal"),document.body.appendChild(this.modal));const t=`${this.iframeInputs.baseID}-iframe`,r=document.getElementById(t);r&&this.modal.contains(r)?this.iframe=document.getElementById(t):(this.iframe=document.createElement("iframe"),this.iframe.id=t,this.iframe.name=`${this.iframeInputs.baseName}Iframe`,this.iframe.setAttribute("frameBorder","0"),this.iframe.setAttribute("width",this.iframeInputs.width),this.iframe.setAttribute("height",this.iframeInputs.height),this.iframe.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-pointer-lock"),this.iframe.style.visibility="hidden",this.iframe.setAttribute("allowpaymentrequest","false"),this.iframe.setAttribute("allowfullscreen","false"),this.iframe.setAttribute("allow","payment *;publickey-credentials-get *"),this.iframe.classList.add("square_threeds_iframe"),this.modal.appendChild(this.iframe))}handleResponse(e){const t=e.data;if("object"==typeof t&&this.iframeInputs.listenerMessageTypes.includes(t.type)){this.destroy();try{this.iframeInputs.validateMessage(t),this.threeDSPromiseResolve(t)}catch(e){this.threeDSPromiseReject(e)}}}submit(){this.form.isConnected?(this.form.submit(),void 0!==this.iframeInputs.onShow&&this.iframeInputs.onShow(this.iframe,this.modal),void 0!==this.iframeInputs.timeoutSeconds&&(this.timeoutID=window.setTimeout(this.timedOut.bind(this),1e3*this.iframeInputs.timeoutSeconds))):(this.destroy(),this.threeDSPromiseReject(this.iframeInputs.getErrorMessage("SQUARE_3DS_IFRAME_FORM_DISCONNECTED")))}timedOut(){this.destroy(),this.threeDSPromiseReject(this.iframeInputs.getErrorMessage("SQUARE_3DS_IFRAME_TIMEOUT"))}destroy(){void 0!==this.timeoutID&&window.clearTimeout(this.timeoutID),window.removeEventListener("message",this.eventListenerReference),void 0!==this.iframeInputs.onDestroy&&this.iframeInputs.onDestroy(this.iframe),this.form.isConnected&&this.form.remove(),!0===this.modal?.isConnected&&(this.iframe.isConnected&&this.iframe.remove(),this.modal.remove())}}function $p(e){switch(e){case"SQUARE_3DS_IFRAME_TIMEOUT":return new Bp;case"SQUARE_3DS_IFRAME_FORM_DISCONNECTED":return new qp;default:return new Vp}}class Yp{constructor(e){if(void 0===e.threeDsMethodUrl||void 0===e.threeDsMethodNotificationUrl)throw new Error(`Cannot complete 3DS method flow, one or more of threeDSMethodUrl and threeDSMethodNotificationUrl are undefined. Transaction data: ${JSON.stringify(e)}`);this.threeDsMethodUrl=e.threeDsMethodUrl,this.threeDSMethodData={threeDSMethodNotificationURL:e.threeDsMethodNotificationUrl,threeDSServerTransID:e.threeDSServerTransId},this.square3DSMethodIframe=new zp({baseID:"sq-threeds-3ds-method-"+1e6*Math.random(),baseName:"3DSMethod",getErrorMessage:$p,height:"10",listenerMessageTypes:[`threeDsMethodResponse-${this.threeDSMethodData.threeDSServerTransID}`,"threeDsMethodError"],notificationData:{data:btoa(JSON.stringify(this.threeDSMethodData)),name:"threeDSMethodData"},notificationURL:this.threeDsMethodUrl,timeoutSeconds:11,validateMessage:this.validateMessage.bind(this),width:"10"})}async handle3DSMethod(){return this.square3DSMethodIframe.handle()}validateMessage(e){if("threeDsMethodError"===e.type)throw new Vp(e.error);if(e.threeDsServerTransId!==this.threeDSMethodData.threeDSServerTransID)throw new Gp(e.threeDsServerTransId,this.threeDSMethodData.threeDSServerTransID)}}class Wp{constructor(e,t){this.threeDsMethodPromise=e,this.threeDsServerTransactionId=t}reset(){this.threeDsMethodPromise=void 0,this.threeDsServerTransactionId=void 0}}class Kp extends Fp{constructor(e){super(`The verification was not successful: ${e}`,e),this.name="VerificationError",this.type="VERIFICATION_NOT_SUCCESSFUL"}}class Jp extends Fp{constructor(){super("A verification request is already in progress"),this.name="VerificationInProgressError",this.type="VERIFICATION_IN_PROGRESS"}}class Xp extends Fp{constructor(e){super(`The time to complete the verification has expired: ${e}`),this.name="VerificationTimeoutError",this.type="VERIFICATION_TIMEOUT"}}var Zp,Qp;!function(e){e.AUTHENTICATED="Y",e.AUTHENTICATION_ATTEMPTED="A",e.CHALLENGE_REQUIRED="C",e.DECOUPLED_CHALLENGE_REQUIRED="D",e.NOT_AUTHENTICATED="N",e.AUTHENTICATION_COULD_NOT_BE_PERFORMED="U",e.INFORMATIONAL_ONLY="I",e.REJECTED="R"}(Zp||(Zp={})),function(e){e._250X400="01",e._390X400="02",e._500X600="03",e._600X400="04",e.FULL_SCREEN="05"}(Qp||(Qp={}));class ef extends Fp{constructor(){super("Form is no longer connected"),this.name="ChallengeFlowFormError"}}class tf extends Fp{constructor(e){super("Challenge flow failed with unknown error"),this.name="ChallengeFlowError","string"==typeof e&&""!==e&&(this.message+=`: ${e}`)}}class rf extends Fp{constructor(e,t){super(`Received Challenge response with transaction ID ${e}, expected ${t}`),this.name="ChallengeResponseTransactionIdError"}}const nf="data-challenge-displayed",of="VISIBLE";function af(e){return"SQUARE_3DS_IFRAME_FORM_DISCONNECTED"===e?new ef:new tf}class sf{constructor(e,t,r,n){if(this.errorLogger=t,this.esLogger=r,void 0===e.acsUrl||void 0===e.encodedCReq)throw new Error(`Cannot complete Challenge flow, acsUrl or encodedCReq is undefined. Transaction data: ${JSON.stringify(e)}`);this.acsUrl=e.acsUrl,this.challengeFlowData={encodedCReq:e.encodedCReq,threeDSServerTransID:e.threeDSServerTransId};const i=this.decodeChallengeWindowSize();void 0!==n&&({challengeDisplayedCallback:this.challengeDisplayedCallback,challengeHiddenCallback:this.challengeHiddenCallback,elementSelector:this.iframeSelector}=n);const o={baseID:"sq-threeds-challenge-flow",baseName:"3DSChallengeFlow",getErrorMessage:af,height:`${i.height}`,listenerMessageTypes:[`challengeResponse-${this.challengeFlowData.threeDSServerTransID}`,"challengeError"],notificationData:{data:this.challengeFlowData.encodedCReq,name:"creq"},notificationURL:this.acsUrl,onDestroy:this.onDestroy.bind(this),onShow:this.onShow.bind(this),timeoutSeconds:610,validateMessage:this.validateMessage.bind(this),width:`${i.width}`};void 0!==this.iframeSelector&&(o.iframeSelector=this.iframeSelector),this.squareChallengeFlowIframe=new zp(o)}async handleChallengeFlow(){const e=this.decodeCReq(this.challengeFlowData.encodedCReq);return e&&this.esLogger.trackTdsEvent({catalog_name:"tds_analyticsjs_c_req",tds_analyticsjs_c_req_message_version:e.messageVersion,tds_base_three_ds_server_trans_id:e.threeDsServerTransId||this.challengeFlowData.threeDSServerTransID}),this.squareChallengeFlowIframe.handle().then((e=>(this.esLogger.trackTdsEvent({catalog_name:"tds_analyticsjs_c_res",tds_analyticsjs_c_res_message_version:e.messageVersion,tds_analyticsjs_c_res_trans_status:e.transStatus,tds_base_three_ds_server_trans_id:e.threeDsServerTransId}),e)))}onShow(e,t){e.setAttribute(nf,of),e.style.visibility="visible",void 0!==this.challengeDisplayedCallback&&this.challengeDisplayedCallback(),t&&t.classList.add("square_threeds_modal__show")}onDestroy(e){const t=e.getAttribute(nf)===of;e.setAttribute(nf,"REMOVED"),void 0!==this.challengeHiddenCallback&&t&&this.challengeHiddenCallback()}validateMessage(e){if("challengeError"===e.type)throw new tf(e.error);if(e.threeDsServerTransId!==this.challengeFlowData.threeDSServerTransID)throw new rf(e.threeDsServerTransId,this.challengeFlowData.threeDSServerTransID)}decodeChallengeWindowSize(){let e=Qp._250X400;try{const t=JSON.parse(atob(this.challengeFlowData.encodedCReq));null!==t&&"object"==typeof t&&"challengeWindowSize"in t&&(e=t.challengeWindowSize)}catch(e){this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}})}switch(e){case Qp._390X400:return{height:400,width:390};case Qp._500X600:return{height:600,width:500};case Qp._600X400:return{height:400,width:600};case Qp.FULL_SCREEN:return{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth};case Qp._250X400:default:return{height:400,width:250}}}decodeCReq(e){try{return JSON.parse(atob(e))}catch(t){return this.errorLogger.addBreadcrumb({data:{encodedCReq:e},message:"Unable to parse JSON for challenge request message",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-challenge"}}}),null}}}var cf;!function(e){e.COMPLETED="COMPLETED",e.ERROR="ERROR"}(cf||(cf={}));class uf{constructor(e,t,r){this.userChallenged=!1,this.esLogger=e,this.errorLogger=t,this.threeDsMethodData=r}async execute3dsAuthentication(e,t){this.configuration=e,this.threeDsTransactionData=t,await this.handle3DSMethodFlow();try{const e=await this.authenticate();await this.handleAuthenticateResponse(e)}catch(e){this.handleError(e)}}async handle3DSMethodFlow(){if(void 0===this.threeDsMethodData.threeDsServerTransactionId||void 0===this.threeDsMethodData.threeDsMethodPromise){if(void 0!==this.threeDsTransactionData?.threeDsMethodUrl)try{const e=new Yp(this.threeDsTransactionData),t=new URL(this.threeDsTransactionData.threeDsMethodUrl).hostname;this.esLogger.trackAnalyticsEvent({analyticsjs_event:"three_ds_method_invoked",analyticsjsverification_id:this.threeDsTransactionData.verificationId,analyticsjsverification_verification_token:this.threeDsTransactionData.verificationToken,is_eager_three_ds_method_execution:!1,three_ds_method_url_hostname:t,three_ds_server_transaction_id:this.threeDsTransactionData.threeDSServerTransId}),await e.handle3DSMethod(),this.esLogger.trackAnalyticsEvent({analyticsjs_event:"three_ds_method_completed",analyticsjsverification_id:this.threeDsTransactionData.verificationId,analyticsjsverification_verification_token:this.threeDsTransactionData.verificationToken,is_eager_three_ds_method_execution:!1,three_ds_method_url_hostname:t,three_ds_server_transaction_id:this.threeDsTransactionData.threeDSServerTransId})}catch(e){this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}})}}else try{await this.threeDsMethodData.threeDsMethodPromise}catch(e){this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}})}}async handleChallengeFlow(e){this.esLogger.trackAnalyticsEvent({analyticsjs_event:"buyer_challenged",analyticsjsverification_challenge_type:"3DS",analyticsjsverification_id:this.threeDsTransactionData.verificationId,analyticsjsverification_user_challenged:!0,analyticsjsverification_verification_token:this.threeDsTransactionData.verificationToken});const t={threeDSServerTransId:e.three_ds_server_trans_id};return void 0!==e.encoded_creq&&(t.encodedCReq=e.encoded_creq),void 0!==e.challenge_acs_url&&(t.acsUrl=e.challenge_acs_url),new sf(t,this.errorLogger,this.esLogger,this.configuration.verifyBuyerCustomElement).handleChallengeFlow()}authenticate(){const e={browser_info:{color_depth:window.screen.colorDepth,java_enabled:window.navigator.javaEnabled(),screen_height:window.innerHeight,screen_width:window.innerWidth},client_id:"",token:this.threeDsTransactionData.verificationToken};return this.configuration.callbacks.postAuthenticate(e)}async handleAuthenticateResponse(e){if(void 0===e.errors)if(e.three_ds_trans_status===Zp.CHALLENGE_REQUIRED)try{this.userChallenged=!0,await this.handleChallengeFlow(e),this.configuration.callbacks.onComplete({status:cf.COMPLETED,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:!0})}catch(e){this.handleError(e)}else this.configuration.callbacks.onComplete({status:cf.COMPLETED,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged});else this.configuration.callbacks.onComplete({status:cf.ERROR,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged})}handleError(e){this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}}),this.configuration.callbacks.onComplete({status:cf.ERROR,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged})}}class lf{constructor(e,t,r){this.callback=e,this.onError=r,this.called=!1,this.callback=e,this.timeout=window.setTimeout((()=>this.timedOut()),t),this.onError=r}invoke(...e){this.called?this.callback(...this.onError):(clearTimeout(this.timeout),this.called=!0,this.callback(...e))}timedOut(){this.invoke(...this.onError)}}function df(e){return e instanceof Fp}function hf(e,t,r){return df(e)?e:e instanceof Error&&"SqError"===e.name?new Fp(e.message,r):new Fp(t,r)}function pf(e){return void 0!==e.square_three_ds_verification?.three_ds_server_transaction_id}class ff{constructor(e,t,r,n,i,o){this.applicationId=e,this.analyticsParameters=t,this.esLogger=r,this.errorLogger=n,this.challengeUpdatesQueue=[],this.verificationUpdatePending=!1,this.userChallenged=!1,this.messenger=i,this.threeDsMethodData=o,this.squareThreeds=new uf(this.esLogger,this.errorLogger,this.threeDsMethodData),(()=>{this.pendingVerifyBuyerCall&&this.verifyBuyer(this.pendingVerifyBuyerCall.verificationId,this.pendingVerifyBuyerCall.source,this.pendingVerifyBuyerCall.details,this.pendingVerifyBuyerCall.callback,this.pendingVerifyBuyerCall.verifyBuyerCustomElement)})()}verifyBuyer(e,t,r,n,i){void 0===this.verifyBuyerCallback?(this.verifyBuyerCallback=new lf(((e,t)=>{n(e,t),delete this.verifyBuyerCallback}),9e5,[new Xp(e)]),this.getVerification(e,t,r)):n(new Jp,null)}async updateVerification(e,t){const r=t.some((e=>{if("SQUARE_THREEDS"===e.type){const t=e.square_threeds_verification?.status;return function(e){return"CANCELED"===e||"REJECTED"===e||"AUTHENTICATED"===e||"COMPLETED"===e}(t)||"ERROR"===t}return!1}));if(!this.verificationUpdatePending||r){this.verificationUpdatePending=!r;try{const r={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,challengeUpdates:t,token:this.token,verificationId:e},n=await this.messenger.request("REQUEST_VERIFICATION_UPDATE",{body:{...r}});this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_verification_update",analyticsjsverification_id:e,analyticsjsverification_verification_token:this.token}),this.handleChallenges(e,n)}catch(t){this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_verification_update",analyticsjsverification_id:e,analyticsjsverification_verification_token:this.token}),this.handleChallenges(e,hf(t,"Update verification failed",this.token))}}else this.challengeUpdatesQueue.push(t)}handleChallenges(e,t){if(void 0===this.verifyBuyerCallback)return;const r=this.challengeUpdatesQueue.shift();if(void 0!==r?this.updateVerification(e,r):this.verificationUpdatePending=!1,df(t))return void this.verifyBuyerCallback.invoke(t,null);this.token=t.token;const n={token:this.token,userChallenged:this.userChallenged};switch(t.status){case"COMPLETED":this.verifyBuyerCallback.invoke(null,n);break;case"CANCELED":this.verifyBuyerCallback.invoke(new Kp(t.token),null);break;case"PENDING":if(void 0===t.challenges||0===t.challenges.length)return void this.verifyBuyerCallback.invoke(new Kp(t.token),null);for(const r of t.challenges)if("SQUARE_THREEDS"===r.type){if(this.squareThreedsConfiguration={callbacks:{onComplete:t=>{this.handleSquareThreeDsComplete(t,e)},postAuthenticate:t=>this.handlePostAuthenticate(t,e)}},!pf(r))return;this.squareThreeDsTransactionData={directoryServerId:r.square_three_ds_verification.directory_server_id,messageVersion:r.square_three_ds_verification.message_version,threeDSServerTransId:r.square_three_ds_verification.three_ds_server_transaction_id,...void 0!==r.square_three_ds_verification?.three_ds_method_notification_url&&{threeDsMethodNotificationUrl:r.square_three_ds_verification.three_ds_method_notification_url},...void 0!==r.square_three_ds_verification?.three_ds_method_url&&{threeDsMethodUrl:r.square_three_ds_verification.three_ds_method_url},verificationId:e,verificationToken:this.token},this.squareThreeds.execute3dsAuthentication(this.squareThreedsConfiguration,this.squareThreeDsTransactionData)}break;default:this.errorLogger.captureException(new Fp(`Invalid verification response status: ${t.status}`),{captureContext:{tags:{action:"nonFatal-verify"}}})}}async getVerification(e,t,r){const n={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,source:t,verificationDetails:r,verificationId:e};try{const t=await this.messenger.request("REQUEST_VERIFICATION_CREATE",{body:{...n,...void 0!==this.threeDsMethodData.threeDsMethodPromise&&void 0!==this.threeDsMethodData.threeDsServerTransactionId?{threeDsServerTransactionId:this.threeDsMethodData.threeDsServerTransactionId}:{}}}),r=t.challenges?.find((e=>"SQUARE_THREEDS"===e.type));r?.square_three_ds_verification?.three_ds_server_transaction_id===this.threeDsMethodData.threeDsServerTransactionId||this.threeDsMethodData.reset(),this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_verification",analyticsjsverification_id:e,analyticsjsverification_verification_token:t.token}),this.handleChallenges(e,t)}catch(t){this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_verification",analyticsjsverification_id:e,analyticsjsverification_verification_token:this.token}),this.handleChallenges(e,hf(t,"Create verification failed",this.token))}}handleSquareThreeDsComplete(e,t){this.userChallenged=e.userChallenged;const r={square_threeds_verification:{directory_server_id:this.squareThreeDsTransactionData.directoryServerId,message_version:this.squareThreeDsTransactionData.messageVersion,status:e.status===cf.COMPLETED?cf.COMPLETED:cf.ERROR,three_ds_server_transaction_id:e.threeDsServerTransId},type:"SQUARE_THREEDS"};this.updateVerification(t,[r])}async handlePostAuthenticate(e,t){const r={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,browser_info:e.browser_info,client_id:e.client_id,token:this.token,verificationId:t};try{const e=await this.messenger.request("REQUEST_THREE_DS_AUTHENTICATION",{body:{...r}});return this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_three_ds_authenticate",analyticsjsverification_id:t,analyticsjsverification_verification_token:this.token}),e}catch(e){throw this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_three_ds_authenticate",analyticsjsverification_id:t,analyticsjsverification_verification_token:this.token}),hf(e,"Three ds authentication failed",this.token)}}}function mf(e,t){if(!e)throw Lp("IframeCustomElement",t);if("function"!=typeof e)throw Pp("IframeCustomElement",t)}function gf(e){return"string"==typeof e&&""!==e}function vf(e){if("object"!=typeof e||null===e)return"";const t=[];return"familyName"in e&&gf(e.familyName)&&t.push("familyName"),"givenName"in e&&gf(e.givenName)&&t.push("givenName"),"email"in e&&gf(e.email)&&t.push("email"),"country"in e&&gf(e.country)&&t.push("country"),"countryName"in e&&gf(e.countryName)&&t.push("countryName"),"region"in e&&gf(e.region)&&t.push("region"),"city"in e&&gf(e.city)&&t.push("city"),"addressLines"in e&&Array.isArray(e.addressLines)&&gf(e.addressLines.join())&&t.push("addressLines"),"postalCode"in e&&gf(e.postalCode)&&t.push("postalCode"),"phone"in e&&gf(e.phone)&&t.push("phone"),t.join(",")}function yf(){return`verify-buyer-${(new Date).getMilliseconds()}-${1e5*Math.random()}`}class Ef{constructor(e,t,r,n,i,o={generateVerificationId:yf}){this.verificationId=void 0,this.applicationId=e,this.esLogger=t,this.errorLogger=r,this.messenger=n,this.threeDsMethodData=new Wp,this.verificationIdGenerator=o,function(e,t){if(!e)throw Dp("applicationId");if("string"!=typeof e)throw wp("applicationId","string");if(t){const e="locationId"in t,r="accountId"in t;if(!e&&!r)throw Mp();if(e&&r)throw Up();if(e&&"string"!=typeof t.locationId)throw wp("analyticsParameters.locationId","string");if(r&&"string"!=typeof t.accountId)throw wp("analyticsParameters.accountId","string")}}(e,i),i&&(this.verifier=new ff(this.applicationId,i,this.esLogger,this.errorLogger,this.messenger,this.threeDsMethodData),this.analyticsParameters=i)}async execute3DSMethod(e){const t=new Yp({threeDSServerTransId:e.threeDSServerTransId,threeDsMethodNotificationUrl:e.threeDsMethodNotificationUrl,threeDsMethodUrl:e.threeDsMethodUrl});this.verificationId=this.verificationIdGenerator.generateVerificationId();const r=new URL(e.threeDsMethodUrl).hostname;this.esLogger.trackAnalyticsEvent({analyticsjs_event:"three_ds_method_invoked",analyticsjsverification_id:this.verificationId,analyticsjsverification_verification_token:void 0,is_eager_three_ds_method_execution:!0,three_ds_method_url_hostname:r,three_ds_server_transaction_id:e.threeDSServerTransId});const n=t.handle3DSMethod();this.threeDsMethodData.threeDsMethodPromise=n,this.threeDsMethodData.threeDsServerTransactionId=e.threeDSServerTransId;try{await n}catch(e){throw this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}}),e}finally{this.esLogger.trackAnalyticsEvent({analyticsjs_event:"three_ds_method_completed",analyticsjsverification_id:this.verificationId,analyticsjsverification_verification_token:void 0,is_eager_three_ds_method_execution:!0,three_ds_method_url_hostname:r,three_ds_server_transaction_id:e.threeDSServerTransId})}}async verifyBuyer(e,t,r){return new Promise(((n,i)=>{this._verifyBuyer(e,t,((e,t)=>{this.threeDsMethodData.reset(),this.verificationId=void 0,e?i(e):n(t)}),r)}))}_verifyBuyer(e,t,r,n){const i=this.verificationId??this.verificationIdGenerator.generateVerificationId();try{this.esLogger.trackAnalyticsEvent({analyticsjs_event:"verify_buyer_invoked",analyticsjsverification_amount:t.amount,analyticsjsverification_contact_fields:vf(t.billingContact),analyticsjsverification_currency:t.currencyCode,analyticsjsverification_custom_score:null===t.customScore?void 0:t.customScore,analyticsjsverification_id:i,analyticsjsverification_intent:t.intent,analyticsjsverification_source:e,analyticsjsverification_source_prefix:e.substring(0,5),analyticsjsverification_square_product:t.squareProduct})}catch(e){throw this.errorLogger.captureException(e,{captureContext:{tags:{action:"verifyBuyer"}}}),Hp()}try{!function(e,t,r,n,i){const o="verifyBuyer";if(!e)throw Op();if(void 0===t)throw kp(o,"source");if("string"!=typeof t)throw Ap(o,"source","string");if(!r)throw kp(o,"verificationDetails");if("object"!=typeof r)throw Ap(o,"verificationDetails","object");if(function(e,t){const r="verificationDetails";if("object"!=typeof t.billingContact)throw Ap(e,`${r}.billingContact`,"object");const{customScore:n}=t;if(null!=n){if("number"!=typeof n||Number.isNaN(n))throw Ap(e,`${r}.customScore`,"integer");if(n<0||n>1e3)throw jp(e,`${r}.customScore`,0,1e3,!0)}if("string"!=typeof t.intent)throw Ap(e,`${r}.intent`,"string");if("CHARGE"===t.intent||"CHARGE_AND_STORE"===t.intent){if(!t.currencyCode)throw Np(e,`${r}.currencyCode`);if("string"!=typeof t.currencyCode)throw Ap(e,`${r}.currencyCode`,"string");if(!t.amount)throw Np(e,`${r}.amount`);if("string"!=typeof t.amount)throw Ap(e,`${r}.amount`,"string")}}(o,r),!n)throw Lp(o,"verifyBuyerCallback");if("function"!=typeof n)throw Pp(o,"verifyBuyerCallback");void 0!==i&&(function(e){if("string"!=typeof e)throw wp("iframeElementSelector","string");const t=document.querySelector(e);if(null===t)throw xp(e);if(null===t.getAttribute("name"))throw Rp(e,"name");if("iframe"!==t.tagName.toLowerCase()||null===t.contentDocument&&null===t.contentWindow)throw Tp(e,"IFrameElement")}(i.elementSelector),mf(i.challengeDisplayedCallback,"elementVisibleCallback"),mf(i.challengeHiddenCallback,"elementRemovedCallback"))}(this.analyticsParameters,e,t,r,n)}catch(t){throw this.esLogger.trackAnalyticsEvent({analyticsjs_event:"verify_buyer_completed",analyticsjsverification_error:t.name,analyticsjsverification_id:i,analyticsjsverification_source:e}),t}try{this.verifier.verifyBuyer(i,e,t,((t,n)=>{const o={analyticsjs_event:"verify_buyer_completed",analyticsjsverification_id:i,analyticsjsverification_source:e};t&&(o.analyticsjsverification_error=t.name),n&&(o.analyticsjsverification_user_challenged=n.userChallenged,o.analyticsjsverification_verification_token=n.token),this.esLogger.trackAnalyticsEvent(o),r(t,n)}),n)}catch(e){throw this.errorLogger.captureException(e,{captureContext:{tags:{action:"verifyBuyer"}}}),Hp()}}}const _f=(e,t,r,n,i)=>new Ef(e,t,r,n,i),bf={get documentVisibilityState(){return document.visibilityState},windowLocationHref:()=>window.location.href,get windowLocationOrigin(){return window.location.origin},get windowNavigationBeacon(){return window.navigator.sendBeacon.bind(window.navigator)}},Sf=/^https?:\/\//;function Cf(e){if(!e)return"";if(!Sf.test(e))return"[Not Parsable]";const t=new URL(e);return`${t.protocol}//${t.host}`}const If={buyer_challenged:"analyticsjsverification",receive_three_ds_authenticate:"analyticsjsverification",receive_verification:"analyticsjsverification",receive_verification_update:"analyticsjsverification",three_ds_method_completed:"analyticsjsverification",three_ds_method_invoked:"analyticsjsverification",verify_buyer_completed:"analyticsjsverification",verify_buyer_invoked:"analyticsjsverification"};function Of(e){const t=document.cookie.split(";");for(const r of t){const[t,n]=r.split("=");if(void 0!==t&&t.trim()===e&&void 0!==n)return decodeURIComponent(n)}return null}class wf{constructor(e,t,r,n){const{locationId:i,avt:o}=r;this.es=e,this.errorLogger=n,this.telemetryStarts={},this.baseEvent=function(e,t,r){return"accountId"in r?{anonymous_user_token:t,oauth_credential_account_id:r.accountId,oauth_credential_client_id:e}:{anonymous_user_token:t,oauth_credential_client_id:e,oauth_credential_location_id:r.locationId}}(t,o,{locationId:i??""})}trackAnalyticsEvent(e){try{const t={catalog_name:If[e.analyticsjs_event],...this.baseEvent,analyticsjsverification_duration:this.getAnalyticsEventDuration(e),browser_height:window.innerHeight,browser_width:window.innerWidth,device_screen_height:window.screen.height,device_screen_width:window.screen.width,subject_anonymous_token:Of("_savt"),webpage_base_url:bf.windowLocationOrigin,webpage_full_url:Cf(bf.windowLocationHref()),webpage_path:"",webpage_referrer:Cf(window.document.referrer),webpage_referrer_path:"",webpage_referrer_search:"",webpage_search:"",webpage_title:window.document.title,...e};this.es.trackV2(t)}catch(t){this.errorLogger.addBreadcrumb({data:{event:e},message:"Eventstream Track Error",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-es2"}}})}}trackTdsEvent(e){try{this.es.trackV2(e)}catch(t){this.errorLogger.addBreadcrumb({data:{event:e},message:"Eventstream TrackTdsEvent Error",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-es2"}}})}}getAnalyticsEventDuration(e){const{analyticsjs_event:t,analyticsjsverification_id:r}=e,n=e=>(this.telemetryStarts[e]=performance.now(),null),i=e=>{const t=this.telemetryStarts[e];return void 0===t?null:(delete this.telemetryStarts[e],performance.now()-t)};switch(t){case"verify_buyer_invoked":return n(r);case"verify_buyer_completed":return i(r);case"three_ds_method_invoked":return n(`three_ds_method_${r}`);case"three_ds_method_completed":return i(`three_ds_method_${r}`);default:return null}}}class Tf{constructor(e){this.metricsBatchUrl=`${e.pciConnectApiUrl}/v2/analytics/aux`,this.errorLogger=e.errorLogger,this.analyticsClientVersion=e.analyticsClientVersion,this.webSdkVersion=e.webSdkVersion,this.metricsBuffer=[],this.disableBeacon=!1}trackV2(e){const t={u_library_name:"analytics-client",u_library_version:this.analyticsClientVersion,web_sdk_version:this.webSdkVersion,...e};this.postMetricsEvent(t,!1)}postMetricsEvent(e,t=!1){this.disableBeacon?Sn(this.metricsBatchUrl,{body:{analytics:[e]}}).catch((t=>{this.errorLogger.addBreadcrumb({data:{event:e},message:"Unable to HTTP Post analytics event",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-es2"}}})})):(this.metricsBuffer.push(e),t&&this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",(()=>{"hidden"===bf.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)})),this.currentInterval=setInterval((()=>{this.buildAndSendBeacon()}),1e3)))}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{const e=new Blob([JSON.stringify({analytics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});bf.windowNavigationBeacon(this.metricsBatchUrl,e)}catch(e){this.errorLogger.addBreadcrumb({data:{events:this.metricsBuffer},message:"Unable to send beacons for analytics events",type:"error"}),this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-es2"}}}),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),Sn(this.metricsBatchUrl,{body:{analytics:this.metricsBuffer}}).catch((e=>{this.errorLogger.addBreadcrumb({data:{events:this.metricsBuffer},message:"Unable to send HTTP request for analytics events",type:"error"}),this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-es2"}}})}))}this.metricsBuffer=[]}}}const Af={setupClient(e,t){const{environment:r,hostname:n,locationId:i,pciConnectApiUrl:o,clientVersion:a,webSdkVersion:s,messenger:c}=t,u=void 0===a||""===a?`web-payments-sdk@${s}`:`analytics-client@${a}`,l=new pn({dsn:"https://4197e265423545aba2d849d023e8cd33@o160250.ingest.sentry.io/1516559",environment:r,initialScope:{tags:{applicationId:e,applicationUrl:n,source:"analytics-client",webSdkVersion:s}},release:u}),d=new Tf({analyticsClientVersion:u,errorLogger:l,pciConnectApiUrl:o,webSdkVersion:s}),h=new wf(d,e,t,l);return void 0===i?_f(e,h,l,c):_f(e,h,l,c,{locationId:i})}};function Pf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Df(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pf(Object(r),!0).forEach((function(t){Nf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nf(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rf="".concat(Fn.ASSET_URL,"/square-threeds-modal.css");class xf{constructor(e){var{applePayMerchantIdentifier:t,cashAppPayMerchantIdentifier:r,merchantName:n,applicationId:i,avt:o,hostname:a,locationId:s,instanceId:c,sessionId:u,sourceUrl:l,locale:d,srcDpaId:h}=e;this.applicationId=i,this.locationId=s,this._sessionId=u,this.instanceId=c,this.applePayMerchantIdentifier=t,this.cashAppPayMerchantIdentifier=r,this.merchantName=n,this.hostname=a,this.sourceUrl=l,this._locale=d,this.avt=o,this.srcDpaId=h}get sessionId(){return this._sessionId}setSessionId(e){this._sessionId=e,this._serialized=void 0}setLocale(e){this._locale=e,this._serialized=void 0}serialize(){var e,t;return this._serialized||(this._serialized={applePayMerchantIdentifier:null!==(e=this.applePayMerchantIdentifier)&&void 0!==e?e:"",applicationId:this.applicationId,avt:this.avt,cashAppPayMerchantIdentifier:null!==(t=this.cashAppPayMerchantIdentifier)&&void 0!==t?t:"",hostname:this.hostname,instanceId:this.instanceId,locale:this._locale,locationId:this.locationId,merchantName:this.merchantName,sessionId:this._sessionId,sourceUrl:this.sourceUrl,srcDpaId:this.srcDpaId}),this._serialized}}function kf(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Lf(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){kf(o,n,i,a,s,"next",e)}function s(e){kf(o,n,i,a,s,"throw",e)}a(void 0)}))}}function Mf(){return Mf=Lf((function*(e,t){var r=new Promise(((e,r)=>{var n=setTimeout((function(){var e;window.removeEventListener("message",i),r(((e=new Error("Web Payments SDK was unable to be initialized in time")).type="InitializationTimeoutError",e))}),1e4),i=function(r){"main-iframe:loaded"===r.data&&r.origin===Fn.ASSET_BASE_URL&&(clearTimeout(n),window.removeEventListener("message",i),t.addBreadcrumb({message:"Processed main-iframe:loaded message"}),e())};window.addEventListener("message",i)})),n=function(e,t){return jf.apply(this,arguments)}(e,t),[i,o]=yield Promise.all([n,r]);return i})),Mf.apply(this,arguments)}function jf(){return(jf=Lf((function*(e,t){var r=yield Sl({frameborder:"0",height:"0",scrolling:"no",src:e,style:{border:"none",display:"block",visibility:"hidden"},width:"0"});return t.addBreadcrumb({message:"main iframe loaded"}),r}))).apply(this,arguments)}var Uf={build:function(e,t){return Mf.apply(this,arguments)},getIframeSrc:function(e){var t=new URL(Fn.IFRAME_SRC);return Object.entries(e).forEach((e=>{var[r,n]=e;t.searchParams.set(r,n)})),t.toString()}};function Hf(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Ff(){var e;return e=function*(e,t,r,n){var i=uc({errorSerializer:{deserialize:e=>e instanceof Error?e:ms(e),serialize:e=>e instanceof Wn?gs(e):e},name:n});return i.setErrorHandler((function(e){"warning"!==e.severity&&t.captureException(e)})),i.connect({origin:Fn.ASSET_URL,window:e.contentWindow},e.id),yield i.sendMessage("INITIALIZE",r),i},Ff=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Hf(o,n,i,a,s,"next",e)}function s(e){Hf(o,n,i,a,s,"throw",e)}a(void 0)}))},Ff.apply(this,arguments)}var Bf={build:function(e,t,r,n){return Ff.apply(this,arguments)}};function qf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vf(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gf={ach_architecture_changes:"AMOUNT_SCHEMA",can_override_postal_code:!1,can_use_ach_auth:"REQUIRED",can_use_afterpay_on_shipping_options_changed:!1,can_use_interac:!1,eager_three_ds_method_execution_eligibility:!1,enable_payment_debug_output:"NONE",haasv2_encryption_of_paymentdata:!1,handle_insecure_contexts:"IGNORE",one_shot_authentication_apple_pay:!1,one_shot_authentication_eligibility:!1,one_shot_authentication_google_pay:!1,show_square_monochrome:!1,use_new_afterpay_checkout_widget:!1},zf={ach_architecture_changes:["AMOUNT_SCHEMA"],can_use_ach_auth:["SUPPORTED","REQUIRED"],enable_payment_debug_output:["NONE","GOOGLE_PAY"],handle_insecure_contexts:["IGNORE","WARN","BLOCK"]};function $f(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Yf(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){$f(o,n,i,a,s,"next",e)}function s(e){$f(o,n,i,a,s,"throw",e)}a(void 0)}))}}function Wf(){return Wf=Yf((function*(e,t,r,n){var{applicationId:i,locationId:o,hostname:a,sourceUrl:s}=e;t.logEvent({errorMessage:JSON.stringify({hostname:a,sourceUrl:s}),event:"PAYMENTS_ENV_METADATA",eventSource:"WebSDK"}),t.logEvent({event:"INITIALIZATION:START",eventSource:"WebSDK"});var u,l,d=n.getCurrentLocale();try{u=yield function(e,t,r,n,i){return Kf.apply(this,arguments)}(i,o,a,d,r)}catch(e){var h=(l=e)instanceof Error&&"type"in l&&"InitializationTimeoutError"===l.type?"good":"bad";if(t.logEvent({event:"INITIALIZATION:ERROR",eventSource:"WebSDK",sloStatus:h}),"bad"===h&&r.captureException(e),Vo(e))throw new Ri("initializing the payment method");throw e}try{var{avt:p,sessionId:f,applePartnerInternalMerchantIdentifier:m,cashAppPayMerchantIdentifier:g,merchantName:v,instanceId:y,paymentMethodSupportDetail:E,featureFlagValues:_,srcDpaId:b}=yield u.request("REQUEST_HYDRATION",{body:{applicationId:i,hostname:a,locationId:o}}),S=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qf(Object(r),!0).forEach((function(t){Vf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Gf);for(var[r,n]of Object.entries(Gf)){var i=r;if(i in e){var o=e[i],a=zf[i];t[i]=void 0===a?"true"===o:a.includes(o)?o:n}}return t}(_);if(!0!==c.isSecureContext){if("BLOCK"===S.handle_insecure_contexts)throw new _i;"WARN"===S.handle_insecure_contexts&&console.warn("[Square Web Payments SDK] WARNING: We have detected that this instance of the Web Payments SDK is being loaded in an insecure context.  As of October 31, 2025, the Web Payments SDK will block traffic from insecure contexts.  See https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts for more details.")}t.setAvt(p);var C=new xf({applePayMerchantIdentifier:m,applicationId:i,avt:p,cashAppPayMerchantIdentifier:g,hostname:a,instanceId:y,locale:d,locationId:o,merchantName:v,sessionId:f,sourceUrl:s,srcDpaId:b});t.setFeatureFlagValues(S),t.logEvent({event:"INITIALIZATION:OK",eventSource:"WebSDK",sloStatus:"good"},y,f);var I=function(e,t,r,n){var i,o=void 0!==t&&t.length>0?t:void 0,a=null!=r?r:"";function s(){if(i)return i;Tu(Rf,"sq-threeds-modal-styles",document.head);var t=Af.setupClient(e,{avt:a,clientVersion:Fn.ANALYTICS_CLIENT_VERSION,connectApiUrl:Fn.CONNECT_API_URL,environment:Fn.env,hostname:c.windowLocation.origin,locationId:o,messenger:n,pciConnectApiUrl:Fn.API_URL,webSdkVersion:Fn.VERSION});return i=t,t}return Object.freeze({execute3DSMethod:function(e){return s().execute3DSMethod(e)},verifyBuyer:function(e,t){var r,n=s(),i=Df(Df({},t),{},{billingContact:(r=t.billingContact,function(e){return"region"in e||"country"in e||"countryName"in e}(r)?r:{addressLines:r.addressLines,city:r.city,country:r.countryCode,email:r.email,familyName:r.familyName,givenName:r.givenName,phone:r.phone,postalCode:r.postalCode,region:r.state})});return n.verifyBuyer(e,i)}})}(C.applicationId,C.locationId,C.avt,u);return{analyticsBackend:I,featureFlagValues:S,localeStrings:n,messenger:u,paymentMethodSupportDetail:E,session:C}}catch(e){if(t.logEvent({event:"INITIALIZATION:ERROR",eventSource:"WebSDK",sloStatus:"WebSdkEmbedError"===ps(e).name?"good":"bad"}),Vo(e))throw new Ri("initializing the payment method");throw e}})),Wf.apply(this,arguments)}function Kf(){return(Kf=Yf((function*(e,t,r,n,i){var o=yield Uf.build(Uf.getIframeSrc({applicationId:e,hostname:r}),i);return yield Bf.build(o,i,{applicationId:e,hostname:r,locale:n,locationId:t})}))).apply(this,arguments)}var Jf={initializePayment:function(e,t,r,n){return Wf.apply(this,arguments)},validateVerificationDetails:function(e,t){var r=[];return ea(e.billingContact)||r.push(new ds(t,"details.billingContact","object")),e.intent&&"string"==typeof e.intent&&["CHARGE","STORE","CHARGE_AND_STORE"].includes(e.intent)||r.push(new ds(t,"details.intent","string")),"CHARGE"!==e.intent&&"CHARGE_AND_STORE"!==e.intent||(e.amount&&"string"==typeof e.amount||r.push(new ds(t,"details.amount","string")),e.currencyCode&&"string"==typeof e.currencyCode||r.push(new ds(t,"details.currencyCode","string"))),r}},Xf=[Si,Ii,Ci,Ni];function Zf(e){var{addressLines:t,locality:r,administrativeArea:n,postalCode:i,countryCode:o,givenName:a,familyName:s,emailAddress:c,phoneNumber:u}=e;return{addressLines:t,city:r,countryCode:null==o?void 0:o.toUpperCase(),email:c,familyName:s,givenName:a,phone:u,postalCode:i,state:n}}function Qf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function em(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qf(Object(r),!0).forEach((function(t){tm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tm(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rm={addressLines:"addressLines",city:"locality",country:"countryCode",postalCode:"postalCode",state:"administrativeArea"},nm=["visa","masterCard","jcb","discover","amex"];function im(e){var t;return{amount:e.amount,label:e.label,type:null!==(t=e.pending)&&void 0!==t&&t?"pending":"final"}}function om(e){return{amount:e.amount,detail:"",identifier:e.id,label:e.label}}function am(e,t){return t?im(t):e}function sm(e,t){return t?t.map(im):e}function cm(e,t){return t?t.map(om):e}function um(e){for(var t=3;t>0&&!e.supportsVersion(t);)t-=1;return t}function lm(e){var{amount:t,identifier:r,label:n}=e;return{amount:t,id:r,label:n}}function dm(e,t,r){return{errors:(n=e,i=[],void 0!==n.error&&i.push(new window.ApplePayError("addressUnserviceable","postalAddress",n.error)),n.shippingErrors&&Object.entries(n.shippingErrors).forEach((e=>{var t,[r,n]=e,o=null!==(t=rm[r])&&void 0!==t?t:"postalAddress";i.push(new window.ApplePayError("shippingContactInvalid",o,n))})),i),newLineItems:sm(t.lineItems,Mu(e,r)),newShippingMethods:cm(t.shippingMethods,e.shippingOptions),newTotal:am(t.total,e.total)};var n,i}function hm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hm(Object(r),!0).forEach((function(t){fm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fm(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mm(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function gm(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){mm(o,n,i,a,s,"next",e)}function s(e){mm(o,n,i,a,s,"throw",e)}a(void 0)}))}}class vm extends Error{}var ym=[{messageContains:"",name:"SecurityError",unsupportedReason:cs.MISC_THIRD_PARTY_IFRAME_NOT_ALLOWED},{messageContains:"insecure document",name:"InvalidAccessError",unsupportedReason:cs.APPLE_PAY_REQUIRES_SECURE_CONTEXT},{messageContains:"insecure parent frame",name:"InvalidAccessError",unsupportedReason:cs.APPLE_PAY_REQUIRES_SECURE_CONTEXT},{messageContains:"different security origin",name:"InvalidAccessError",unsupportedReason:cs.APPLE_PAY_CONSISTENT_DOMAIN_REQUIRED}];class Em extends Bs{constructor(e,t,r){if(super(t),this.methodType=Vn.APPLE_PAY,this.sessionInProgress=!1,this.wasFirstInteractionCalled=!1,this.paymentMethodMessenger=new qc(this.context),this.paymentRequestLockController=r,this.req=e,this.req.addPaymentMethodUsage("Apple Pay"),void 0===window.ApplePaySession)throw new bi(cs.APPLE_PAY_BROWSER_NOT_SUPPORTED);var n=!1;try{n=window.ApplePaySession.canMakePayments()}catch(e){var i=ps(e);for(var o of ym)if(i.name===o.name&&i.message.includes(o.messageContains))throw new bi(o.unsupportedReason);throw e}if(!n)throw new bi(cs.APPLE_PAY_DEVICE_NOT_SUPPORTED);this.SessionHandle=window.ApplePaySession,this.validateConfiguration(),this.tokenize=this.withErrorHandling(this.tokenize.bind(this),Xf,"tokenize")}tokenize(e){var t=this;return gm((function*(){if(t.handleFirstInteraction(),t.throwIfDestroyed(),t.sessionInProgress)throw new Ni([qs]);var r;t.applePayPaymentRequest=function(e,t){var r=[...nm];null!=t&&t&&r.push("interac");var n,i,o={countryCode:e.countryCode,currencyCode:e.currencyCode,lineItems:sm([],Mu(e)),merchantCapabilities:["supports3DS"],requiredBillingContactFields:["postalAddress"],shippingMethods:cm([],e.shippingOptions),supportedNetworks:r,total:im(e.total)};return e.shippingContact&&(o.shippingContact={addressLines:(n=e.shippingContact).addressLines,administrativeArea:n.state,country:$h[null!==(i=n.countryCode)&&void 0!==i?i:""],countryCode:n.countryCode,emailAddress:n.email,familyName:n.familyName,givenName:n.givenName,locality:n.city,phoneNumber:n.phone,postalCode:n.postalCode}),e.requestBillingContact&&(o.requiredShippingContactFields=["email","name","phone"]),e.requestShippingContact&&(o.requiredShippingContactFields=["postalAddress","name","email","phone"]),o}(t.req,t.context.getFeatureFlagValues().can_use_interac);try{r=new t.SessionHandle(um(t.SessionHandle),t.applePayPaymentRequest)}catch(e){var n=function(e){var t=ps(e);if("InvalidAccessError"===t.name&&"Must create a new ApplePaySession from a user gesture handler."===t.message)return{detail:"Due to Apple Pay security requirements, no async operations (like API calls or await statements) can occur between the button click and the tokenize() call.",message:"Apple Pay session creation failed. No async operations can be called between the user gesture (click) and tokenize().",type:"INVALID_APPLE_PAY_SESSION_CONTEXT"}}(e);if(void 0!==n)throw new Ni([n]);throw e}var i=t.shippingContactChanged.bind(t);r.onshippingcontactselected=e=>{i(e.shippingContact,t.applePayPaymentRequest)};var o=t.shippingOptionChanged.bind(t);r.onshippingmethodselected=e=>{o(e.shippingMethod,t.applePayPaymentRequest)};var a,s,c=new Promise(((e,t)=>{r.oncancel=()=>{t(new vm)}})),u=new Promise(((e,n)=>{r.onvalidatemerchant=function(){var r=gm((function*(r){try{var i=yield t.requestApplePayMerchantValidity(r.validationURL,t.applePayPaymentRequest);e(i)}catch(e){n(ps(e))}}));return function(e){return r.apply(this,arguments)}}()})),l=new Promise(((e,n)=>{r.onpaymentauthorized=function(){var r=gm((function*(r){try{var i=yield t.requestApplePayCardNonce(r);e(i)}catch(e){n(ps(e))}}));return function(e){return r.apply(this,arguments)}}()}));t.currentSession=r,t.sessionInProgress=!0,t.paymentRequestLockController.lock(t),t.metricsHandler.logEvent("EXTERNAL_SESSION:START"),r.begin();try{var d=yield Promise.race([u,c]);r.completeMerchantValidation(d),({token:a,details:s}=yield Promise.race([l,c])),t.metricsHandler.logEvent("EXTERNAL_SESSION:OK")}catch(e){if(e instanceof vm)return t.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),{status:Gn};throw t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),e}finally{t.deleteApplePaySession()}if(t.context.getFeatureFlagValues().one_shot_authentication_apple_pay){var h,p=pm(pm({},e),{},{amount:t.req.total.amount,billingContact:null!==(h=s.billing)&&void 0!==h?h:{},currencyCode:t.req.currencyCode,customerInitiated:!0,intent:"CHARGE",sellerKeyedIn:!1});yield eh(t.context,p,a)}return{details:s,status:Yn,token:a}}))()}destroy(){return this.currentSession&&(this.currentSession.abort(),this.deleteApplePaySession()),this.status=As.DESTROYED,this.metricsHandler.logConfigurationEvent("DESTROYED"),Promise.resolve(!0)}validateConfiguration(){var e=this.session;if(void 0===e.applePayMerchantIdentifier||""===e.applePayMerchantIdentifier)throw new bi(cs.INVALID_CONFIG,"applePayMerchantIdentifier");if(void 0===e.locationId||""===e.locationId)throw new bi(cs.INVALID_CONFIG,"locationId")}requestApplePayCardNonce(e){var t=this;return gm((function*(){var r,n={applepayData:e.payment},i=null!==(r=t.selectedShippingMethod)&&void 0!==r?r:t.getDefaultShippingMethod();try{var o=yield t.paymentMethodMessenger.request("REQUEST_APPLE_PAY_CARD_NONCE",n);return t.getApplePaySession().completePayment(t.SessionHandle.STATUS_SUCCESS),t.context.setPaymentMethodTrackingId(o.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,a={details:{card:r,method:Vn.APPLE_PAY},token:n};if(i){var s={contact:i};t&&(s.option=lm(t)),a.details.shipping=s}return o&&(a.details.card&&(a.details.card.billing=o),a.details.billing=o),a}(o,i)}catch(e){throw t.getApplePaySession().completePayment(t.SessionHandle.STATUS_FAILURE),e}}))()}requestApplePayMerchantValidity(e,t){var r=this;return gm((function*(){var n,i=t.total.label,o=r.session,a={clientId:o.applicationId,locationId:o.locationId,merchantName:i,sourceUrl:o.sourceUrl,validationUrl:e};try{n=yield r.paymentMethodMessenger.request("REQUEST_APPLE_PAY_MERCHANT_VALIDITY",a)}catch(e){throw r.getApplePaySession().abort(),e}try{return JSON.parse(n.session)}catch(e){throw r.getApplePaySession().abort(),e}}))()}shippingContactChanged(e,t){var r=um(this.SessionHandle)>=3?this.updateApplePayShippingContactV3(t):this.updateApplePayShippingContactLegacy(t);this.req.hasEventListener(Bn.SHIPPING_CONTACT_CHANGED)?this.req.dispatchEvent(Bn.SHIPPING_CONTACT_CHANGED,{contactOrOption:Zf(e)},(e=>{this.metricsHandler.logConfigurationEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",pm(pm({},e),{},{eventName:Bn.SHIPPING_CONTACT_CHANGED})),this.handleShippingContactUpdate(r,e)})):this.handleShippingContactUpdate(r)}handleShippingContactUpdate(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null===(t=r.shippingOptions)||void 0===t?void 0:t[0],i=this.getDefaultShippingMethod();void 0===n&&null!==i&&(n=lm(i)),void 0!==n&&this.req.hasEventListener(Bn.SHIPPING_OPTION_CHANGED)?(this.selectedShippingMethod=om(n),this.req.dispatchEvent(Bn.SHIPPING_OPTION_CHANGED,{contactOrOption:n},(t=>{this.metricsHandler.logConfigurationEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",pm(pm({},t),{},{eventName:Bn.SHIPPING_OPTION_CHANGED})),e(pm(pm({},r),t))}))):e(r)}shippingOptionChanged(e,t){this.selectedShippingMethod=e;var r=um(this.SessionHandle)>=3?this.updateApplePayShippingMethodV3(t):this.updateApplePayShippingMethodLegacy(t);this.req.hasEventListener(Bn.SHIPPING_OPTION_CHANGED)?this.req.dispatchEvent(Bn.SHIPPING_OPTION_CHANGED,{contactOrOption:lm(e)},r):r({})}updateApplePayPaymentRequest(e){this.applePayPaymentRequest.total=e.newTotal,e.newLineItems&&(this.applePayPaymentRequest.lineItems=e.newLineItems),function(e){return"newShippingMethods"in e}(e)&&(this.applePayPaymentRequest.shippingMethods=e.newShippingMethods)}updateApplePayShippingContactV3(e){return t=>{var r=dm(t,e,this.req);this.updateApplePayPaymentRequest(r),this.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),this.getApplePaySession().completeShippingContactSelection(r)}}updateApplePayShippingContactLegacy(e){return t=>{var r=function(e,t,r,n){return em({status:n},dm(e,t,r))}(t,e,this.req,this.SessionHandle.STATUS_SUCCESS);this.updateApplePayPaymentRequest(r),this.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),this.getApplePaySession().completeShippingContactSelection(r.status,r.newShippingMethods,r.newTotal,r.newLineItems)}}updateApplePayShippingMethodV3(e){return t=>{var r=function(e,t,r){return{newLineItems:sm(t.lineItems,Mu(e,r)),newTotal:am(t.total,e.total)}}(t,e,this.req);this.updateApplePayPaymentRequest(r),this.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),this.getApplePaySession().completeShippingMethodSelection(r)}}updateApplePayShippingMethodLegacy(e){return t=>{var r=function(e,t,r,n){return em({status:n},dm(e,t,r))}(t,e,this.req,this.SessionHandle.STATUS_SUCCESS);this.updateApplePayPaymentRequest(r),this.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),this.getApplePaySession().completeShippingMethodSelection(r.status,r.newTotal,r.newLineItems)}}getDefaultShippingMethod(){var{shippingMethods:e}=this.applePayPaymentRequest;return e.length>0?this.applePayPaymentRequest.shippingMethods[0]:null}deleteApplePaySession(){delete this.currentSession,this.paymentRequestLockController.unlock(this),this.sessionInProgress=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.metricsHandler.logEvent("FIRST_INTERACTION:OK"),this.wasFirstInteractionCalled=!0)}getApplePaySession(){if(void 0===this.currentSession)throw new Ri("getting Apple Pay Session");return this.currentSession}}var _m=xs([{eligible:function(e){return ea(e)&&"email"in e},schemaOperation:Ls({email:Ms({formatExample:"example@domain.com",matchRegexp:/^\S+@\S+\.\S+$/,nonBlank:!0})})},{eligible:function(e){return ea(e)&&"mobileNumber"in e},schemaOperation:Ls({mobileNumber:Ls({countryCode:Ms({formatExample:"+X / +XX / +XXX (non-zero first digit)",matchRegexp:/^\+?[1-9]\d{0,2}$/,nonBlank:!0},(e=>e.replace(/\+/g,""))),phoneNumber:Ms({nonBlank:!0},(e=>e.replace(/[^\d]/g,"")))})})}],{code:"missing_property",expected:"string",propertyPath:"email"});function bm(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}var Sm="".concat(Fn.ASSET_URL,"/modal.css");class Cm{constructor(){this.modalVeilContext=document.createElement("div"),this.modalVeilContext.className="modal-veil-context";var e,t=document.createElement("div");t.className="modal-veil",this.modal=document.createElement("div"),this.modal.className="modal",this.cancelButton=document.createElement("button"),this.cancelButton.classList.add("cancel"),this.cancelButton.setAttribute("type","button"),this.cancelButton.setAttribute("aria-label","cancel"),this.cancelButton.innerHTML='<svg width="'.concat(e=48,'" height="').concat(e,'" viewBox="0 0 ').concat(e," ").concat(e,'" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <rect width="').concat(e,'" height="').concat(e,'" rx="').concat(Math.floor(24),'" fill="black" fill-opacity="0.05"/>\n    <path d="M18.71 30.71L24 25.41L29.29 30.71L30.71 29.29L25.41 24L30.71 18.71L29.29 17.29L24 22.59L18.71 17.29L17.29 18.71L22.59 24L17.29 29.29L18.71 30.71Z" fill="black" fill-opacity="0.9"/>\n  </svg>');var r=document.createElement("div");r.classList.add("content","buttons"),r.appendChild(this.cancelButton),this.contentElement=document.createElement("div"),this.contentElement.className="content",this.contentElement.id="js-content",this.modal.appendChild(r),this.modal.appendChild(this.contentElement),t.appendChild(this.modal),this.modalVeilContext.appendChild(t)}getElement(){return this.modalVeilContext}getContentElement(){return this.contentElement}getCancelButton(){return this.cancelButton}loadStyles(){var e,t=this;return(e=function*(){yield Tu(Sm,"click-to-pay-modal-styles",t.modalVeilContext)},function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){bm(o,n,i,a,s,"next",e)}function s(e){bm(o,n,i,a,s,"throw",e)}a(void 0)}))})()}showModal(){this.modalVeilContext.setAttribute("active",""),this.modal.removeAttribute("hidden"),this.contentElement.innerHTML=""}hideModal(){return this.modal.setAttribute("hidden",""),new Promise((e=>{setTimeout((()=>{this.modalVeilContext.removeAttribute("active"),e()}),240)}))}}function Im(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Om(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Im(o,n,i,a,s,"next",e)}function s(e){Im(o,n,i,a,s,"throw",e)}a(void 0)}))}}var wm=["mastercard","visa","amex","discover"];class Tm extends Bs{constructor(e,t,r,n,i){var o;super(r),this.tokenizeInProgress=!1,this.paymentRequestLockController=i,this.mastercardSdk=e,this.req=t,this.srcDpaId=r.getSession().srcDpaId,function(e){if(!ea(e))throw new ui("Click to Pay options must be an object.");var t=Us(_m).validate(e);if(!t.isValid){var r=t.issues.map((e=>{switch(e.code){case"missing_property":return'Missing property: "'.concat(e.propertyPath,'" for Click to Pay constructor. Expected "').concat(e.expected,'"');case"invalid_type":return'Invalid type: "'.concat(e.propertyPath,'" for Click to Pay constructor. Expected "').concat(e.expected,'"');default:return'Invalid value: "'.concat(e.propertyPath,'" for Click to Pay constructor. Expected "').concat(e.expected,'"')}}));throw new ui(r.join("; "))}}(n),this.clickToPayOptions=(o=n,Us(_m).sanitize(o)),this.clickToPayButton=null,this.element=null,this.modal=new Cm,this.attach=this.withErrorHandling(this.attach.bind(this),[Si,oi,Oi],"attach"),this.tokenize=this.withErrorHandling(this.tokenize.bind(this),[Ii,Ci,Ni],"tokenize"),this.paymentRequestLockController.lock(this),Rh.attachUiScripts()}attach(e){var t=this;return Om((function*(){t.throwIfDestroyedOrAlreadyAttached(),t.status=As.ATTACHED;try{t.element=_u(e)}catch(e){throw t.status=As.DETACHED,e}return document.body.appendChild(t.modal.getElement()),yield t.modal.loadStyles(),t.clickToPayButton=document.createElement("src-button"),t.clickToPayButton.setAttribute("card-brands",wm.join(", ")),t.element.appendChild(t.clickToPayButton),Promise.resolve()}))()}initialize(){var e=this;return Om((function*(){var{locale:t}=e.context.getSession();yield e.mastercardSdk.init({cardBrands:wm,dpaData:{dpaName:"ClickToPayStaging",dpaPresentationName:"Square Inc."},dpaTransactionOptions:{dpaLocale:t.replace(/-/g,"_")},srcDpaId:e.srcDpaId});var r=function(e){if("email"in e)return e;var{countryCode:t,phoneNumber:r}=e.mobileNumber;return{countryCode:t,phoneNumber:Number(r)}}(e.clickToPayOptions);try{if(!(yield e.mastercardSdk.idLookup(r)).consumerPresent)throw new bi({message:"Buyer is not registered for Click to Pay",type:"BUYER_NOT_REGISTERED"})}catch(e){var n=ps(e);if("click2PayError"===n.name&&"reason"in n&&"ACCT_INACCESSIBLE"===n.reason)throw new bi({message:"Buyer is not registered for Click to Pay",type:"BUYER_NOT_REGISTERED"});throw e}}))()}tokenize(){var e=this;return Om((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProgress)throw new Ni([qs]);e.tokenizeInProgress=!0,e.modal.showModal();var t=document.createElement("iframe");t.classList.add("embedded-iframe");var r=e.modal.getContentElement();r.appendChild(t);var n=function(e){if("email"in e)return{consumerIdentity:{identityType:"EMAIL_ADDRESS",identityValue:e.email}};var{countryCode:t,phoneNumber:r}=e.mobileNumber;return{consumerIdentity:{identityType:"MOBILE_PHONE_NUMBER",identityValue:t.concat(r)}}}(e.clickToPayOptions),i=e.modal.getCancelButton(),o=new Promise(((e,t)=>{i.addEventListener("click",(()=>{t(new Ri("Tokenization canceled by buyer"))}))}));try{var a=yield Promise.race([e.mastercardSdk.authenticate({accountReference:n,windowRef:t.contentWindow}),o]);if(r.removeChild(t),yield Promise.race([e.displayCards(a.cards),o]),void 0===e.selectedCardId)throw new Ri("No card selected for Click to Pay");if(r.appendChild(t),"COMPLETE"!==(yield Promise.race([e.mastercardSdk.checkoutWithCard({srcDigitalCardId:e.selectedCardId,windowRef:t.contentWindow}),o])).checkoutActionCode)throw new Ri("Click to Pay checkout did not complete successfully");return{status:"OK",token:"fake"}}finally{yield e.modal.hideModal(),e.tokenizeInProgress=!1,e.selectedCardId=void 0}}))()}destroy(){return this.status!==As.ATTACHED?Promise.resolve(!1):(this.selectedCardId=void 0,document.body.removeChild(this.modal.getElement()),this.element.removeChild(this.clickToPayButton),this.status=As.DESTROYED,this.paymentRequestLockController.unlock(this),Promise.resolve(!0))}displayCards(e){var t=this;return Om((function*(){var{locale:r}=t.context.getSession(),n=document.createElement("src-card-list");n.setAttribute("card-brands",wm.join(", ")),n.setAttribute("locale",r.replace(/-/g,"_")),n.setAttribute("card-selection-type","radioButton");var i=document.createElement("button");i.classList.add("ctp-continue-button"),i.textContent="Continue";var o=t.modal.getContentElement();o.appendChild(n),o.appendChild(i),yield customElements.whenDefined("src-card-list");var a=n;return a.addEventListener("selectSrcDigitalCardId",(e=>{var r=e;t.selectedCardId=r.detail})),a.loadCards(e),new Promise((e=>{i.addEventListener("click",(()=>{o.removeChild(n),o.removeChild(i),e()}))}))}))()}}var Am=function(e,t,r,n,i){return new _l(e,t,r,n,i)},Pm=function(e,t,r){return new Em(e,t,r)},Dm=function(e,t,r,n,i){return new Oh(e,t,r,n,i)},Nm=function(e,t,r,n,i){return new Tm(e,t,n,r,i)},Rm=function(e,t,r,n,i){return new _p(e,t,r,n,i)};function xm(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function km(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){xm(o,n,i,a,s,"next",e)}function s(e){xm(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Lm=["addEventListener","attach","clear","configure","destroy","detach","focus","recalculateSize","removeEventListener","setError","tokenize"],Mm=["addEventListener","attach","destroy","detach","removeEventListener","tokenize"],jm=["addEventListener","destroy","removeEventListener","tokenize"],Um=["addEventListener","destroy","removeEventListener","tokenize"],Hm=["addEventListener","attach","clear","configure","destroy","detach","focus","removeEventListener","setError","tokenize"],Fm=["addEventListener","attach","attachCheckoutWidget","attachMessaging","destroy","detach","displayInformationModal","removeEventListener","tokenize"],Bm=["addEventListener","attach","destroy","detach","removeEventListener"],qm=["attach","destroy","tokenize"];function Vm(e,t){var{paymentMethodSupportDetail:r}=t,n=t.getSession();if(void 0===n.locationId||0===n.locationId.length)throw new bi(cs.INVALID_CONFIG,"locationId");if(null!=r&&r[e]&&!r[e].IsSupported){var{UnsupportedReasonType:i}=r[e],o=cs.UNKNOWN;throw function(e){return us.includes(e)}(i)&&(o=ls[i]),new bi(o)}}function Gm(e){if(!(e instanceof Xh))throw new ai([["paymentRequest","PaymentRequest"]])}function zm(e,t,r,n){var i=t instanceof Error&&r.some((e=>t instanceof e));return e.metricsHandler.logEvent("BUILD:ERROR",i?"good":"bad"),i?(e.metricsHandler.logDeveloperError(t,"build",n),t):t instanceof Ri?t:(e.errorLogger.captureException(t),new Ri("initializing ".concat(n)))}class $m{constructor(e,t,r){this.localeStrings=new Zo(navigator.language),this.paymentOptions=e,this.metrics=t,this.errorLogger=r,this.paymentRequestLockMap=new WeakMap,this.paymentsNumCalls=1}setLocale(e){var t=this;return km((function*(){try{var r=yield t.getPaymentContext("WebSDK");return r.metricsHandler.logConfigurationEvent("SET_LOCALE",e),r.setLocale(e)}catch(e){if(Vo(e))throw t.errorLogger.captureException(e),new Ri("setting the locale");throw e}}))()}verifyBuyer(e,t){var r=this;return km((function*(){var n=[];if(r.paymentOptions.locationId&&0!==r.paymentOptions.locationId.length||n.push(new ds("verifyBuyer","locationId","string")),e&&"string"==typeof e&&0!==e.length||n.push(new ds("verifyBuyer","source","string")),ea(t)?n.push(...Jf.validateVerificationDetails(t,"verifyBuyer")):n.push(new ds("verifyBuyer","details","object")),n.length>0)throw new hs(n);var i=yield r.getPaymentContext("WebSDK");try{i.metricsHandler.logEvent("VERIFICATION:START");var o=yield i.analyticsBackend.verifyBuyer(e,t);return i.metricsHandler.logEvent("VERIFICATION:OK"),o}catch(e){if(i.metricsHandler.logEvent("VERIFICATION:ERROR"),ii(e))throw new ni(e);throw"UnexpectedAnalyticsClientError"!==ps(e).name&&r.errorLogger.captureException(e),new Ri("verifying buyer")}}))()}card(e){var t=this;return km((function*(){var r=yield t.getPaymentContext("Card");r.metricsHandler.logEvent("BUILD:START");try{var n=new fh(r,e);return r.metricsHandler.logEvent("BUILD:OK","good"),Ym(n,Lm)}catch(e){throw zm(r,e,[di,hi],Vn.CARD)}}))()}paymentRequest(e){var t=new Cp,r=new Xh(e,this.localeStrings,t);return this.paymentRequestLockMap.set(r,t),this.getPaymentContext("Payment Request").then((t=>{var{metricsHandler:n}=t;r.setMetricsHandler(n),n.logConfigurationEvent("CONFIGURED",e)})),r}googlePay(e){var t=this;return km((function*(){var r=yield t.getPaymentContext("Google Pay");r.metricsHandler.logEvent("BUILD:START");try{Vm("GOOGLE_PAY",r),function(){if("undefined"==typeof ShadowRoot)throw new bi(cs.GOOGLE_PAY_BROWSER_NOT_SUPPORTED)}(),Gm(e);var n=t.getPaymentRequestLock(e),[i,o]=yield Sp(r),a=Rm(i,e,r,o,n);return r.metricsHandler.logEvent("BUILD:OK","good"),Ym(a,Mm)}catch(e){throw zm(r,e,[wi,ai,bi],Vn.GOOGLE_PAY)}}))()}applePay(e){var t=this;return km((function*(){var r=yield t.getPaymentContext("Apple Pay");r.metricsHandler.logEvent("BUILD:START");try{Vm("APPLE_PAY",r),Gm(e);var n=t.getPaymentRequestLock(e),i=Pm(e,r,n);return r.metricsHandler.logEvent("BUILD:OK","good"),Ym(i,jm)}catch(e){throw zm(r,e,[ai,bi],Vn.APPLE_PAY)}}))()}ach(e){var t=this;return km((function*(){var r=yield t.getPaymentContext("ACH");r.metricsHandler.logEvent("BUILD:START");try{Vm("ACH",r);var n=new du(r,e);return yield n.initialize(),r.metricsHandler.logEvent("BUILD:OK","good"),Ym(n,Um)}catch(e){throw zm(r,e,[hi,bi],Vn.ACH)}}))()}giftCard(e){var t=this;return km((function*(){var r=yield t.getPaymentContext("Gift Card");r.metricsHandler.logEvent("BUILD:START");try{var n=new Hh(r,e);return r.metricsHandler.logEvent("BUILD:OK","good"),Ym(n,Hm)}catch(e){throw zm(r,e,[di,hi],Vn.GIFT_CARD)}}))()}afterpayClearpay(e){var t=this;return km((function*(){var r=yield t.getPaymentContext("Afterpay");r.metricsHandler.logEvent("BUILD:START");try{Vm("AFTERPAY",r),Gm(e);var n=t.getPaymentRequestLock(e),[i,o]=yield bl(),a=Am(i,o,e,r,n);return yield a.internalSetCheckoutToken(),r.metricsHandler.logEvent("BUILD:OK","good"),Ym(a,Fm)}catch(e){throw zm(r,e,[Jn,ri,Zn,yi,ai,bi],Vn.AFTERPAY_CLEARPAY)}}))()}cashAppPay(e,t){var r=this;return km((function*(){var n=yield r.getPaymentContext("Cash App Pay V1");n.metricsHandler.logEvent("BUILD:START");try{Vm("CASH_APP_PAY_V1",n),Gm(e);var i=r.getPaymentRequestLock(e),o=yield Th.initialize(),a=Dm(o,e,t,n,i);return yield a.initializeCustomerRequest(),n.metricsHandler.logEvent("BUILD:OK","good"),Ym(a,Bm)}catch(e){throw zm(n,e,[mi,gi,ai,bi],Vn.CASH_APP_PAY)}}))()}clickToPay(e,t){var r=this;return km((function*(){var n=yield r.getPaymentContext("Click to Pay");n.metricsHandler.logEvent("BUILD:START");try{Gm(e);var i=r.getPaymentRequestLock(e),{srcDpaId:o,locale:a}=n.getSession();if(!mo(o))throw new bi(cs.INVALID_CONFIG,"srcDpaId");var s=yield Rh.initialize(a.replace(/-/g,"_"),o),c=Nm(s,e,t,n,i);return yield c.initialize(),n.metricsHandler.logEvent("BUILD:OK","good"),Ym(c,qm)}catch(e){throw zm(n,e,[ai,bi],"Click to Pay")}}))()}markPaymentsReuse(){this.paymentsNumCalls+=1,this.metrics.logEvent({errorMessage:JSON.stringify({paymentsNumCalls:this.paymentsNumCalls}),event:"PAYMENTS_REUSE",eventSource:"WebSDK"})}getPaymentContext(e){var t=this;return km((function*(){var r,{featureFlagValues:n,messenger:i,session:o,paymentMethodSupportDetail:a,analyticsBackend:s}=yield t.initializePaymentMethod(),c={instanceId:o.instanceId,sessionId:o.sessionId};void 0!==o.avt&&(t.errorLogger.setUser(o.avt),c.avt=o.avt),t.errorLogger.setCustomTags(c);var u=Es(),l=new _s(t.metrics,o,e,u);return null!==(r=t.contextEventTarget)&&void 0!==r||(t.contextEventTarget=new ys),new ss(t.errorLogger,i,l,o,a,t.localeStrings,t.contextEventTarget,n,s)}))()}initializePaymentMethod(){return this.initializePaymentParamPromise||(this.initializePaymentParamPromise=Jf.initializePayment(this.paymentOptions,this.metrics,this.errorLogger,this.localeStrings)),this.initializePaymentParamPromise}getPaymentRequestLock(e){var t=this.paymentRequestLockMap.get(e);if(!t){var r=new Ri("PaymentRequestLockMap entry does not exist. This should never happen.");throw this.errorLogger.captureException(r),r}return t}}function Ym(e,t){var r={};for(var n of t)"function"==typeof e[n]&&(r[n]=e[n].bind(e));return Object.freeze(r)}var Wm=new Map,Km=["ach","afterpayClearpay","applePay","card","cashAppPay","clickToPay","giftCard","googlePay","paymentRequest","setLocale","verifyBuyer"],Jm={errors:zo,payments:function(e,t){var r,n=function(e){if(null!=e&&"string"!=typeof e)throw new Qi;return null!=e?e:""}(t),i="".concat(e,"-").concat(n),o=Wm.get(i);if(void 0!==o){var[a,s]=o;return a.markPaymentsReuse(),s}if(!(r=c.windowLocation).hostname.endsWith("localhost")&&"https:"!==r.protocol)throw new _i;if(!c.isSupported())throw new Ei;!function(e){if(!function(e){return!(e.length<22||e.length>37)&&eo.test(e)&&!to.test(e)}(e))throw new Xi;var t=/^[\w-]{22}$/.exec(e),r=e.startsWith("sq0idp-"),n=e.startsWith("sandbox-sq0idb"),i=e.startsWith("sq0ids-");if(!(t||r||n||i))throw new Xi;if(r&&!no())throw new Zi("production",Fn.env);if(n&&!ro("sandbox"))throw new Zi("sandbox",Fn.env)}(e);var{hostname:u,origin:l}=c.windowLocation,d=new Eo({applicationId:e,applicationUrl:l,source:"web-payments-sdk-public",useGlobalHandlers:!1}),h={applicationId:e,hostname:u,locationId:n,sourceUrl:l},p=new ns(d,{applicationId:e,hostname:u,locationId:n});p.logEvent({event:"LOAD:OK",eventSource:"WebSDK"});var f=new $m(h,p,d),m=Ym(f,Km);return Wm.set(i,[f,m]),m}};"Square"in window?Object.assign(window.Square,Jm):window.Square=Jm})();
//# debugId=15114c9e-f131-5ef9-9b16-a89d86590e05
